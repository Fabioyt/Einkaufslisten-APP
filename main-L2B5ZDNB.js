import{a as k,b as oe,c as zf,d as S,e as Tw}from"./chunk-NNGF5WKJ.js";function Sw(t,e){return Object.is(t,e)}var Ge=null,pu=!1,gu=1,Pn=Symbol("SIGNAL");function ve(t){let e=Ge;return Ge=t,e}function Aw(){return Ge}var sa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wf(t){if(pu)throw new Error("");if(Ge===null)return;Ge.consumerOnSignalRead(t);let e=Ge.nextProducerIndex++;if(_u(Ge),e<Ge.producerNode.length&&Ge.producerNode[e]!==t&&ia(Ge)){let n=Ge.producerNode[e];vu(n,Ge.producerIndexOfThis[e])}Ge.producerNode[e]!==t&&(Ge.producerNode[e]=t,Ge.producerIndexOfThis[e]=ia(Ge)?xw(t,Ge,e):0),Ge.producerLastReadVersion[e]=t.version}function aR(){gu++}function Mw(t){if(!(ia(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===gu)){if(!t.producerMustRecompute(t)&&!Qf(t)){t.dirty=!1,t.lastCleanEpoch=gu;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=gu}}function Rw(t){if(t.liveConsumerNode===void 0)return;let e=pu;pu=!0;try{for(let n of t.liveConsumerNode)n.dirty||cR(n)}finally{pu=e}}function Nw(){return Ge?.consumerAllowSignalWrites!==!1}function cR(t){t.dirty=!0,Rw(t),t.consumerMarkedDirty?.(t)}function yu(t){return t&&(t.nextProducerIndex=0),ve(t)}function Kf(t,e){if(ve(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ia(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)vu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Qf(t){_u(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Mw(n),r!==n.version))return!0}return!1}function Yf(t){if(_u(t),ia(t))for(let e=0;e<t.producerNode.length;e++)vu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xw(t,e,n){if(Pw(t),t.liveConsumerNode.length===0&&Ow(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=xw(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function vu(t,e){if(Pw(t),t.liveConsumerNode.length===1&&Ow(t))for(let r=0;r<t.producerNode.length;r++)vu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];_u(i),i.producerIndexOfThis[r]=e}}function ia(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _u(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Pw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Ow(t){return t.producerNode!==void 0}function kw(t){let e=Object.create(uR);e.computation=t;let n=()=>{if(Mw(e),Wf(e),e.value===mu)throw e.error;return e.value};return n[Pn]=e,n}var qf=Symbol("UNSET"),Gf=Symbol("COMPUTING"),mu=Symbol("ERRORED"),uR=oe(k({},sa),{value:qf,dirty:!0,error:null,equal:Sw,producerMustRecompute(t){return t.value===qf||t.value===Gf},producerRecomputeValue(t){if(t.value===Gf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Gf;let n=yu(t),r;try{r=t.computation()}catch(i){r=mu,t.error=i}finally{Kf(t,n)}if(e!==qf&&e!==mu&&r!==mu&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function lR(){throw new Error}var Fw=lR;function Lw(){Fw()}function Vw(t){Fw=t}var dR=null;function Uw(t){let e=Object.create(Bw);e.value=t;let n=()=>(Wf(e),e.value);return n[Pn]=e,n}function Zf(t,e){Nw()||Lw(),t.equal(t.value,e)||(t.value=e,hR(t))}function jw(t,e){Nw()||Lw(),Zf(t,e(t.value))}var Bw=oe(k({},sa),{equal:Sw,value:void 0});function hR(t){t.version++,aR(),Rw(t),dR?.()}function J(t){return typeof t=="function"}function Xi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Iu=Xi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Qr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ve=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof Iu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{$w(s)}catch(o){e=e??[],o instanceof Iu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Iu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)$w(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Qr(n,e)}remove(e){let{_finalizers:n}=this;n&&Qr(n,e),e instanceof t&&e._removeParent(this)}};Ve.EMPTY=(()=>{let t=new Ve;return t.closed=!0,t})();var Jf=Ve.EMPTY;function wu(t){return t instanceof Ve||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function $w(t){J(t)?t():t.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var es={setTimeout(t,e,...n){let{delegate:r}=es;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=es;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Eu(t){es.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(t);else throw t})}function oa(){}var Hw=Xf("C",void 0,void 0);function zw(t){return Xf("E",void 0,t)}function qw(t){return Xf("N",t,void 0)}function Xf(t,e,n){return{kind:t,value:e,error:n}}var Yr=null;function ts(t){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!Yr;if(e&&(Yr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Yr;if(Yr=null,n)throw r}}else t()}function Gw(t){Xt.useDeprecatedSynchronousErrorHandling&&Yr&&(Yr.errorThrown=!0,Yr.error=t)}var Zr=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wu(e)&&e.add(this)):this.destination=gR}static create(e,n,r){return new ns(e,n,r)}next(e){this.isStopped?tp(qw(e),this):this._next(e)}error(e){this.isStopped?tp(zw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tp(Hw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fR=Function.prototype.bind;function ep(t,e){return fR.call(t,e)}var np=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Du(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Du(r)}else Du(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Du(n)}}},ns=class extends Zr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ep(e.next,s),error:e.error&&ep(e.error,s),complete:e.complete&&ep(e.complete,s)}):i=e}this.destination=new np(i)}};function Du(t){Xt.useDeprecatedSynchronousErrorHandling?Gw(t):Eu(t)}function pR(t){throw t}function tp(t,e){let{onStoppedNotification:n}=Xt;n&&es.setTimeout(()=>n(t,e))}var gR={closed:!0,next:oa,error:pR,complete:oa};var rs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function At(t){return t}function Cu(...t){return rp(t)}function rp(t){return t.length===0?At:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var he=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=yR(n)?n:new ns(n,r,i);return ts(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ww(r),new r((i,s)=>{let o=new ns({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[rs](){return this}pipe(...n){return rp(n)(this)}toPromise(n){return n=Ww(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Ww(t){var e;return(e=t??Xt.Promise)!==null&&e!==void 0?e:Promise}function mR(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function yR(t){return t&&t instanceof Zr||mR(t)&&wu(t)}function ip(t){return J(t?.lift)}function ge(t){return e=>{if(ip(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new sp(t,e,n,r,i)}var sp=class extends Zr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function is(){return ge((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ss=class extends he{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ip(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return is()(this)}};var Kw=Xi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class t extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Kw}next(n){ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Jf:(this.currentObservers=null,s.push(n),new Ve(()=>{this.currentObservers=null,Qr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return t.create=(e,n)=>new bu(e,n),t})(),bu=class extends tt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Jf}};var nt=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var op={now(){return(op.delegate||Date).now()},delegate:void 0};var Tu=class extends Ve{constructor(e,n){super()}schedule(e,n=0){return this}};var aa={setInterval(t,e,...n){let{delegate:r}=aa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=aa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var os=class extends Tu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return aa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&aa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Qr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var as=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};as.now=op.now;var cs=class extends as{constructor(e,n=as.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ap=new cs(os);var Su=class extends os{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Au=class extends cs{};var cp=new Au(Su);var Mt=new he(t=>t.complete());function Qw(t){return t&&J(t.schedule)}function Yw(t){return t[t.length-1]}function Mu(t){return J(Yw(t))?t.pop():void 0}function or(t){return Qw(Yw(t))?t.pop():void 0}function up(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Zw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jr(t){return this instanceof Jr?(this.v=t,this):new Jr(t)}function Xw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(N){return new Promise(function(R,F){s.push([y,N,R,F])>1||u(y,N)})},b&&(i[y]=b(i[y])))}function u(y,b){try{l(r[y](b))}catch(N){m(s[0][3],N)}}function l(y){y.value instanceof Jr?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,b){y(b),s.shift(),s.length&&u(s[0][0],s[0][1])}}function eE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Zw=="function"?Zw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Ru=t=>t&&typeof t.length=="number"&&typeof t!="function";function Nu(t){return J(t?.then)}function xu(t){return J(t[rs])}function Pu(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function Ou(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ku=vR();function Fu(t){return J(t?.[ku])}function Lu(t){return Xw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Jr(n.read());if(i)return yield Jr(void 0);yield yield Jr(r)}}finally{n.releaseLock()}})}function Vu(t){return J(t?.getReader)}function $e(t){if(t instanceof he)return t;if(t!=null){if(xu(t))return _R(t);if(Ru(t))return IR(t);if(Nu(t))return wR(t);if(Pu(t))return tE(t);if(Fu(t))return ER(t);if(Vu(t))return DR(t)}throw Ou(t)}function _R(t){return new he(e=>{let n=t[rs]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IR(t){return new he(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function wR(t){return new he(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Eu)})}function ER(t){return new he(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function tE(t){return new he(e=>{CR(t,e).catch(n=>e.error(n))})}function DR(t){return tE(Lu(t))}function CR(t,e){var n,r,i,s;return Jw(this,void 0,void 0,function*(){try{for(n=eE(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Dt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ar(t,e=0){return ge((n,r)=>{n.subscribe(fe(r,i=>Dt(r,t,()=>r.next(i),e),()=>Dt(r,t,()=>r.complete(),e),i=>Dt(r,t,()=>r.error(i),e)))})}function cr(t,e=0){return ge((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function nE(t,e){return $e(t).pipe(cr(e),ar(e))}function rE(t,e){return $e(t).pipe(cr(e),ar(e))}function iE(t,e){return new he(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function sE(t,e){return new he(n=>{let r;return Dt(n,e,()=>{r=t[ku](),Dt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Uu(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(n=>{Dt(n,e,()=>{let r=t[Symbol.asyncIterator]();Dt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function oE(t,e){return Uu(Lu(t),e)}function aE(t,e){if(t!=null){if(xu(t))return nE(t,e);if(Ru(t))return iE(t,e);if(Nu(t))return rE(t,e);if(Pu(t))return Uu(t,e);if(Fu(t))return sE(t,e);if(Vu(t))return oE(t,e)}throw Ou(t)}function Ue(t,e){return e?aE(t,e):$e(t)}function ee(...t){let e=or(t);return Ue(t,e)}function us(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new he(e?i=>e.schedule(r,0,i):r)}function lp(t){return!!t&&(t instanceof he||J(t.lift)&&J(t.subscribe))}var On=Xi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(t,e){return ge((n,r)=>{let i=0;n.subscribe(fe(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:bR}=Array;function TR(t,e){return bR(e)?t(...e):t(e)}function ju(t){return ne(e=>TR(t,e))}var{isArray:SR}=Array,{getPrototypeOf:AR,prototype:MR,keys:RR}=Object;function Bu(t){if(t.length===1){let e=t[0];if(SR(e))return{args:e,keys:null};if(NR(e)){let n=RR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function NR(t){return t&&typeof t=="object"&&AR(t)===MR}function $u(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Hu(...t){let e=or(t),n=Mu(t),{args:r,keys:i}=Bu(t);if(r.length===0)return Ue([],e);let s=new he(xR(r,e,i?o=>$u(i,o):At));return n?s.pipe(ju(n)):s}function xR(t,e,n=At){return r=>{cE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)cE(e,()=>{let l=Ue(t[u],e),h=!1;l.subscribe(fe(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function cE(t,e,n){t?Dt(n,t,e):e()}function uE(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?b(N):u.push(N),b=N=>{s&&e.next(N),l++;let R=!1;$e(n(N,h++)).subscribe(fe(e,F=>{i?.(F),s?y(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let F=u.shift();o?Dt(e,o,()=>b(F)):b(F)}m()}catch(F){e.error(F)}}))};return t.subscribe(fe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function We(t,e,n=1/0){return J(e)?We((r,i)=>ne((s,o)=>e(r,s,i,o))($e(t(r,i))),n):(typeof e=="number"&&(n=e),ge((r,i)=>uE(r,i,t,n)))}function dp(t=1/0){return We(At,t)}function lE(){return dp(1)}function ls(...t){return lE()(Ue(t,or(t)))}function zu(t){return new he(e=>{$e(t()).subscribe(e)})}function hp(...t){let e=Mu(t),{args:n,keys:r}=Bu(t),i=new he(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;$e(n[h]).subscribe(fe(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?$u(r,a):a),s.complete())}))}});return e?i.pipe(ju(e)):i}function Vt(t,e){return ge((n,r)=>{let i=0;n.subscribe(fe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ur(t){return ge((e,n)=>{let r=null,i=!1,s;r=e.subscribe(fe(n,void 0,void 0,o=>{s=$e(t(o,ur(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function dE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(fe(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function ds(t,e){return J(e)?We(t,e,1):We(t,1)}function lr(t){return ge((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function kn(t){return t<=0?()=>Mt:ge((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function fp(t){return ne(()=>t)}function qu(t=PR){return ge((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function PR(){return new On}function ca(t){return ge((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function fn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,s)=>t(i,s,r)):At,kn(1),n?lr(e):qu(()=>new On))}function hs(t){return t<=0?()=>Mt:ge((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function pp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,s)=>t(i,s,r)):At,hs(1),n?lr(e):qu(()=>new On))}function Gu(t,e){return ge(dE(t,e,arguments.length>=2,!0))}function Wu(...t){let e=or(t);return ge((n,r)=>{(e?ls(t,n,e):ls(t,n)).subscribe(r)})}function en(t,e){return ge((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,h=s++;$e(t(u,h)).subscribe(i=fe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function gp(t){return ge((e,n)=>{$e(t).subscribe(fe(n,()=>n.complete(),oa)),!n.closed&&e.subscribe(n)})}function Ke(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?ge((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(fe(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):At}var YE="https://g.co/ng/security#xss",q=class extends Error{constructor(e,n){super(mg(e,n)),this.code=e}};function mg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function _a(t){return{toString:t}.toString()}var Ku="__parameters__";function OR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function ZE(t,e,n){return _a(()=>{let r=OR(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Ku)?u[Ku]:Object.defineProperty(u,Ku,{value:[]})[Ku];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function kR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function gt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(gt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function hE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var FR=Te({__forward_ref__:Te});function sn(t){return t.__forward_ref__=sn,t.toString=function(){return gt(this())},t}function pt(t){return JE(t)?t():t}function JE(t){return typeof t=="function"&&t.hasOwnProperty(FR)&&t.__forward_ref__===sn}function Q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function di(t){return{providers:t.providers||[],imports:t.imports||[]}}function Al(t){return fE(t,eD)||fE(t,tD)}function XE(t){return Al(t)!==null}function fE(t,e){return t.hasOwnProperty(e)?t[e]:null}function LR(t){let e=t&&(t[eD]||t[tD]);return e||null}function pE(t){return t&&(t.hasOwnProperty(gE)||t.hasOwnProperty(VR))?t[gE]:null}var eD=Te({\u0275prov:Te}),gE=Te({\u0275inj:Te}),tD=Te({ngInjectableDef:Te}),VR=Te({ngInjectorDef:Te}),G=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nD(t){return t&&!!t.\u0275providers}var UR=Te({\u0275cmp:Te}),jR=Te({\u0275dir:Te}),BR=Te({\u0275pipe:Te}),$R=Te({\u0275mod:Te}),rl=Te({\u0275fac:Te}),da=Te({__NG_ELEMENT_ID__:Te}),mE=Te({__NG_ENV_ID__:Te});function Ml(t){return typeof t=="string"?t:t==null?"":String(t)}function HR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ml(t)}function zR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new q(-200,t)}function yg(t,e){throw new q(-201,!1)}var ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ie||{}),Mp;function rD(){return Mp}function Ct(t){let e=Mp;return Mp=t,e}function iD(t,e,n){let r=Al(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ie.Optional)return null;if(e!==void 0)return e;yg(t,"Injector")}var qR={},ha=qR,Rp="__NG_DI_FLAG__",il="ngTempTokenPath",GR="ngTokenPath",WR=/\n/gm,KR="\u0275",yE="__source",ms;function QR(){return ms}function dr(t){let e=ms;return ms=t,e}function YR(t,e=ie.Default){if(ms===void 0)throw new q(-203,!1);return ms===null?iD(t,void 0,e):ms.get(t,e&ie.Optional?null:void 0,e)}function ae(t,e=ie.Default){return(rD()||YR)(pt(t),e)}function L(t,e=ie.Default){return ae(t,Rl(e))}function Rl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Np(t){let e=[];for(let n=0;n<t.length;n++){let r=pt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,s=ie.Default;for(let o=0;o<r.length;o++){let a=r[o],u=ZR(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(ae(i,s))}else e.push(ae(r))}return e}function sD(t,e){return t[Rp]=e,t.prototype[Rp]=e,t}function ZR(t){return t[Rp]}function JR(t,e,n,r){let i=t[il];throw e[yE]&&i.unshift(e[yE]),t.message=XR(`
`+t.message,i,n,r),t[GR]=i,t[il]=null,t}function XR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==KR?t.slice(2):t;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):gt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(WR,`
  `)}`}var on=sD(ZE("Optional"),8);var oD=sD(ZE("SkipSelf"),4);function ni(t,e){let n=t.hasOwnProperty(rl);return n?t[rl]:null}function vg(t,e){t.forEach(n=>Array.isArray(n)?vg(n,e):e(n))}function aD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function eN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function tN(t,e,n){let r=Ia(t,e);return r>=0?t[r|1]=n:(r=~r,eN(t,r,e,n)),r}function mp(t,e){let n=Ia(t,e);if(n>=0)return t[n|1]}function Ia(t,e){return nN(t,e,1)}function nN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var vs={},Ut=[],_s=new G(""),cD=new G("",-1),uD=new G(""),ol=class{get(e,n=ha){if(n===ha){let r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return n}},lD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lD||{}),mn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mn||{}),pr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(pr||{});function rN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function xp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];sN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function iN(t){return t===3||t===4||t===6}function sN(t){return t.charCodeAt(0)===64}function fa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?vE(t,n,i,null,e[++r]):vE(t,n,i,null,null))}}return t}function vE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var dD="ng-template";function oN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&rN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(_g(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function _g(t){return t.type===4&&t.value!==dD}function aN(t,e,n){let r=t.type===4&&!n?dD:t.value;return e===r}function cN(t,e,n){let r=4,i=t.attrs,s=i!==null?dN(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!tn(r)&&!tn(u))return!1;if(o&&tn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!aN(t,u,n)||u===""&&e.length===1){if(tn(r))return!1;o=!0}}else if(r&8){if(i===null||!oN(t,i,u,n)){if(tn(r))return!1;o=!0}}else{let l=e[++a],h=uN(u,i,_g(t),n);if(h===-1){if(tn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(tn(r))return!1;o=!0}}}}return tn(r)||o}function tn(t){return(t&1)===0}function uN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return hN(e,t)}function lN(t,e,n=!1){for(let r=0;r<e.length;r++)if(cN(t,e[r],n))return!0;return!1}function dN(t){for(let e=0;e<t.length;e++){let n=t[e];if(iN(n))return e}return t.length}function hN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function _E(t,e){return t?":not("+e.trim()+")":e}function fN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!tn(o)&&(e+=_E(s,i),i=""),r=o,s=s||!tn(r);n++}return i!==""&&(e+=_E(s,i)),e}function pN(t){return t.map(fN).join(",")}function gN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!tn(i))break;i=s}r++}return{attrs:e,classes:n}}function Ms(t){return _a(()=>{let e=yD(t),n=oe(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mn.Emulated,styles:t.styles||Ut,_:null,schemas:t.schemas||null,tView:null,id:""});vD(n);let r=t.dependencies;return n.directiveDefs=wE(r,!1),n.pipeDefs=wE(r,!0),n.id=vN(n),n})}function mN(t){return ri(t)||fD(t)}function yN(t){return t!==null}function hi(t){return _a(()=>({type:t.type,bootstrap:t.bootstrap||Ut,declarations:t.declarations||Ut,imports:t.imports||Ut,exports:t.exports||Ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function IE(t,e){if(t==null)return vs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=pr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==pr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Pe(t){return _a(()=>{let e=yD(t);return vD(e),e})}function hD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ri(t){return t[UR]||null}function fD(t){return t[jR]||null}function pD(t){return t[BR]||null}function gD(t){let e=ri(t)||fD(t)||pD(t);return e!==null?e.standalone:!1}function mD(t,e){let n=t[$R]||null;if(!n&&e===!0)throw new Error(`Type ${gt(t)} does not have '\u0275mod' property.`);return n}function yD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:IE(t.inputs,e),outputs:IE(t.outputs),debugInfo:null}}function vD(t){t.features?.forEach(e=>e(t))}function wE(t,e){if(!t)return null;let n=e?pD:mN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(yN)}function vN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yr(t){return{\u0275providers:t}}function _N(...t){return{\u0275providers:_D(!0,t),\u0275fromNgModule:!0}}function _D(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return vg(e,o=>{let a=o;Pp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ID(i,s),n}function ID(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ig(i,s=>{e(s,r)})}}function Pp(t,e,n,r){if(t=pt(t),!t)return!1;let i=null,s=pE(t),o=!s&&ri(t);if(!s&&!o){let u=t.ngModule;if(s=pE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Pp(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{vg(s.imports,h=>{Pp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&ID(l,e)}if(!a){let l=ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ut},i),e({provide:uD,useValue:i,multi:!0},i),e({provide:_s,useValue:()=>ae(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Ig(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ig(t,e){for(let n of t)nD(n)&&(n=n.\u0275providers),Array.isArray(n)?Ig(n,e):e(n)}var IN=Te({provide:String,useValue:Te});function wD(t){return t!==null&&typeof t=="object"&&IN in t}function wN(t){return!!(t&&t.useExisting)}function EN(t){return!!(t&&t.useFactory)}function Is(t){return typeof t=="function"}function DN(t){return!!t.useClass}var Nl=new G(""),Ju={},CN={},yp;function wg(){return yp===void 0&&(yp=new ol),yp}var $t=class{},pa=class extends $t{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kp(e,o=>this.processProvider(o)),this.records.set(cD,fs(void 0,this)),i.has("environment")&&this.records.set($t,fs(void 0,this));let s=this.records.get(Nl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(uD,Ut,ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=dr(this),r=Ct(void 0),i;try{return e()}finally{dr(n),Ct(r)}}get(e,n=ha,r=ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(mE))return e[mE](this);r=Rl(r);let i,s=dr(this),o=Ct(void 0);try{if(!(r&ie.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=MN(e)&&Al(e);l&&this.injectableDefInScope(l)?u=fs(Op(e),Ju):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ie.Self?wg():this.parent;return n=r&ie.Optional&&n===ha?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[il]=a[il]||[]).unshift(gt(e)),s)throw a;return JR(a,e,"R3InjectorError",this.source)}else throw a}finally{Ct(o),dr(s)}}resolveInjectorInitializers(){let e=ve(null),n=dr(this),r=Ct(void 0),i;try{let s=this.get(_s,Ut,ie.Self);for(let o of s)o()}finally{dr(n),Ct(r),ve(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processProvider(e){e=pt(e);let n=Is(e)?e:pt(e&&e.provide),r=TN(e);if(!Is(e)&&e.multi===!0){let i=this.records.get(n);i||(i=fs(void 0,Ju,!0),i.factory=()=>Np(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ve(null);try{return n.value===Ju&&(n.value=CN,n.value=n.factory()),typeof n.value=="object"&&n.value&&AN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=pt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Op(t){let e=Al(t),n=e!==null?e.factory:ni(t);if(n!==null)return n;if(t instanceof G)throw new q(204,!1);if(t instanceof Function)return bN(t);throw new q(204,!1)}function bN(t){if(t.length>0)throw new q(204,!1);let n=LR(t);return n!==null?()=>n.factory(t):()=>new t}function TN(t){if(wD(t))return fs(void 0,t.useValue);{let e=ED(t);return fs(e,Ju)}}function ED(t,e,n){let r;if(Is(t)){let i=pt(t);return ni(i)||Op(i)}else if(wD(t))r=()=>pt(t.useValue);else if(EN(t))r=()=>t.useFactory(...Np(t.deps||[]));else if(wN(t))r=()=>ae(pt(t.useExisting));else{let i=pt(t&&(t.useClass||t.provide));if(SN(t))r=()=>new i(...Np(t.deps));else return ni(i)||Op(i)}return r}function fs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function SN(t){return!!t.deps}function AN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function MN(t){return typeof t=="function"||typeof t=="object"&&t instanceof G}function kp(t,e){for(let n of t)Array.isArray(n)?kp(n,e):n&&nD(n)?kp(n.\u0275providers,e):e(n)}function Un(t,e){t instanceof pa&&t.assertNotDestroyed();let n,r=dr(t),i=Ct(void 0);try{return e()}finally{dr(r),Ct(i)}}function RN(){return rD()!==void 0||QR()!=null}function NN(t){return typeof t=="function"}var jn=0,ce=1,Y=2,mt=3,nn=4,an=5,al=6,cl=7,rn=8,ws=9,yn=10,He=11,ga=12,EE=13,Rs=14,vn=15,Es=16,ps=17,Ds=18,xl=19,DD=20,hr=21,vp=22,jt=23,_n=25,CD=1;var ii=7,ul=8,ll=9,Bt=10,dl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(dl||{});function fr(t){return Array.isArray(t)&&typeof t[CD]=="object"}function Bn(t){return Array.isArray(t)&&t[CD]===!0}function bD(t){return(t.flags&4)!==0}function Pl(t){return t.componentOffset>-1}function Eg(t){return(t.flags&1)===1}function gr(t){return!!t.template}function Fp(t){return(t[Y]&512)!==0}var Lp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function TD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function $n(){return SD}function SD(t){return t.type.prototype.ngOnChanges&&(t.setInput=PN),xN}$n.ngInherit=!0;function xN(){let t=MD(this),e=t?.current;if(e){let n=t.previous;if(n===vs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function PN(t,e,n,r,i){let s=this.declaredInputs[r],o=MD(t)||ON(t,{previous:vs,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Lp(l&&l.currentValue,n,u===vs),TD(t,e,i,n)}var AD="__ngSimpleChanges__";function MD(t){return t[AD]||null}function ON(t,e){return t[AD]=e}var DE=null;var pn=function(t,e,n){DE?.(t,e,n)},kN="svg",FN="math";function In(t){for(;Array.isArray(t);)t=t[jn];return t}function RD(t,e){return In(e[t])}function zt(t,e){return In(e[t.index])}function ND(t,e){return t.data[e]}function LN(t,e){return t[e]}function vr(t,e){let n=e[t];return fr(n)?n:n[jn]}function Dg(t){return(t[Y]&128)===128}function VN(t){return Bn(t[mt])}function hl(t,e){return e==null?null:t[e]}function xD(t){t[ps]=0}function PD(t){t[Y]&1024||(t[Y]|=1024,Dg(t)&&kl(t))}function UN(t,e){for(;t>0;)e=e[Rs],t--;return e}function Ol(t){return!!(t[Y]&9216||t[jt]?.dirty)}function Vp(t){t[yn].changeDetectionScheduler?.notify(8),t[Y]&64&&(t[Y]|=1024),Ol(t)&&kl(t)}function kl(t){t[yn].changeDetectionScheduler?.notify(0);let e=si(t);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!Dg(e)));)e=si(e)}function OD(t,e){if((t[Y]&256)===256)throw new q(911,!1);t[hr]===null&&(t[hr]=[]),t[hr].push(e)}function jN(t,e){if(t[hr]===null)return;let n=t[hr].indexOf(e);n!==-1&&t[hr].splice(n,1)}function si(t){let e=t[mt];return Bn(e)?e[mt]:e}var ue={lFrame:zD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kD=!1;function BN(){return ue.lFrame.elementDepthCount}function $N(){ue.lFrame.elementDepthCount++}function HN(){ue.lFrame.elementDepthCount--}function FD(){return ue.bindingsEnabled}function zN(){return ue.skipHydrationRootTNode!==null}function qN(t){return ue.skipHydrationRootTNode===t}function GN(){ue.skipHydrationRootTNode=null}function De(){return ue.lFrame.lView}function yt(){return ue.lFrame.tView}function fi(t){return ue.lFrame.contextLView=t,t[rn]}function pi(t){return ue.lFrame.contextLView=null,t}function bt(){let t=LD();for(;t!==null&&t.type===64;)t=t.parent;return t}function LD(){return ue.lFrame.currentTNode}function WN(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function wa(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function VD(){return ue.lFrame.isParent}function KN(){ue.lFrame.isParent=!1}function UD(){return kD}function CE(t){kD=t}function jD(){let t=ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function QN(t){return ue.lFrame.bindingIndex=t}function Fl(){return ue.lFrame.bindingIndex++}function YN(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ZN(){return ue.lFrame.inI18n}function JN(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Up(e)}function XN(){return ue.lFrame.currentDirectiveIndex}function Up(t){ue.lFrame.currentDirectiveIndex=t}function ex(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function BD(t){ue.lFrame.currentQueryIndex=t}function tx(t){let e=t[ce];return e.type===2?e.declTNode:e.type===1?t[an]:null}function $D(t,e,n){if(n&ie.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ie.Host);)if(i=tx(s),i===null||(s=s[Rs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ue.lFrame=HD();return r.currentTNode=e,r.lView=t,!0}function Cg(t){let e=HD(),n=t[ce];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function HD(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?zD(t):e}function zD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qD(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var GD=qD;function bg(){let t=qD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function nx(t){return(ue.lFrame.contextLView=UN(t,ue.lFrame.contextLView))[rn]}function Ns(){return ue.lFrame.selectedIndex}function oi(t){ue.lFrame.selectedIndex=t}function Ll(){let t=ue.lFrame;return ND(t.tView,t.selectedIndex)}function rx(){return ue.lFrame.currentNamespace}var WD=!0;function Tg(){return WD}function Sg(t){WD=t}function ix(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=SD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Ag(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Xu(t,e,n){KD(t,e,3,n)}function el(t,e,n,r){(t[Y]&3)===n&&KD(t,e,n,r)}function _p(t,e){let n=t[Y];(n&3)===e&&(n&=16383,n+=1,t[Y]=n)}function KD(t,e,n,r){let i=r!==void 0?t[ps]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ps]+=65536),(a<s||s==-1)&&(sx(t,n,e,u),t[ps]=(t[ps]&4294901760)+u+2),u++}function bE(t,e){pn(4,t,e);let n=ve(null);try{e.call(t)}finally{ve(n),pn(5,t,e)}}function sx(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Y]>>14<t[ps]>>16&&(t[Y]&3)===e&&(t[Y]+=16384,bE(a,s)):bE(a,s)}var ys=-1,ai=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ox(t){return t instanceof ai}function ax(t){return(t.flags&8)!==0}function cx(t){return(t.flags&16)!==0}var Ip={},jp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Rl(r);let i=this.injector.get(e,Ip,r);return i!==Ip||n===Ip?i:this.parentInjector.get(e,n,r)}};function QD(t){return t!==ys}function fl(t){return t&32767}function ux(t){return t>>16}function pl(t,e){let n=ux(t),r=e;for(;n>0;)r=r[Rs],n--;return r}var Bp=!0;function gl(t){let e=Bp;return Bp=t,e}var lx=256,YD=lx-1,ZD=5,dx=0,gn={};function hx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(da)&&(r=n[da]),r==null&&(r=n[da]=dx++);let i=r&YD,s=1<<i;e.data[t+(i>>ZD)]|=s}function ml(t,e){let n=JD(t,e);if(n!==-1)return n;let r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,wp(r.data,t),wp(e,null),wp(r.blueprint,null));let i=Mg(t,e),s=t.injectorIndex;if(QD(i)){let o=fl(i),a=pl(i,e),u=a[ce].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function wp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function JD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Mg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=rC(i),r===null)return ys;if(n++,i=i[Rs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ys}function $p(t,e,n){hx(t,e,n)}function XD(t,e,n){if(n&ie.Optional||t!==void 0)return t;yg(e,"NodeInjector")}function eC(t,e,n,r){if(n&ie.Optional&&r===void 0&&(r=null),!(n&(ie.Self|ie.Host))){let i=t[ws],s=Ct(void 0);try{return i?i.get(e,r,n&ie.Optional):iD(e,r,n&ie.Optional)}finally{Ct(s)}}return XD(r,e,n)}function tC(t,e,n,r=ie.Default,i){if(t!==null){if(e[Y]&2048&&!(r&ie.Self)){let o=yx(t,e,n,r,gn);if(o!==gn)return o}let s=nC(t,e,n,r,gn);if(s!==gn)return s}return eC(e,n,r,i)}function nC(t,e,n,r,i){let s=gx(n);if(typeof s=="function"){if(!$D(e,t,r))return r&ie.Host?XD(i,n,r):eC(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ie.Optional))yg(n);else return o}finally{GD()}}else if(typeof s=="number"){let o=null,a=JD(t,e),u=ys,l=r&ie.Host?e[vn][an]:null;for((a===-1||r&ie.SkipSelf)&&(u=a===-1?Mg(t,e):e[a+8],u===ys||!SE(r,!1)?a=-1:(o=e[ce],a=fl(u),e=pl(u,e)));a!==-1;){let h=e[ce];if(TE(s,a,h.data)){let p=fx(a,e,n,o,r,l);if(p!==gn)return p}u=e[a+8],u!==ys&&SE(r,e[ce].data[a+8]===l)&&TE(s,a,e)?(o=h,a=fl(u),e=pl(u,e)):a=-1}}return i}function fx(t,e,n,r,i,s){let o=e[ce],a=o.data[t+8],u=r==null?Pl(a)&&Bp:r!=o&&(a.type&3)!==0,l=i&ie.Host&&s===a,h=px(a,o,n,u,l);return h!==null?Cs(e,o,h,a):gn}function px(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=o[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=o[u];if(y&&gr(y)&&y.type===n)return u}return null}function Cs(t,e,n,r){let i=t[n],s=e.data;if(ox(i)){let o=i;o.resolving&&zR(HR(s[n]));let a=gl(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Ct(o.injectImpl):null,h=$D(t,r,ie.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&ix(n,s[n],e)}finally{l!==null&&Ct(l),gl(a),o.resolving=!1,GD()}}return i}function gx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(da)?t[da]:void 0;return typeof e=="number"?e>=0?e&YD:mx:e}function TE(t,e,n){let r=1<<t;return!!(n[e+(t>>ZD)]&r)}function SE(t,e){return!(t&ie.Self)&&!(t&ie.Host&&e)}var ti=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return tC(this._tNode,this._lView,e,Rl(r),n)}};function mx(){return new ti(bt(),De())}function wn(t){return _a(()=>{let e=t.prototype.constructor,n=e[rl]||Hp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[rl]||Hp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Hp(t){return JE(t)?()=>{let e=Hp(pt(t));return e&&e()}:ni(t)}function yx(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Y]&2048&&!(o[Y]&512);){let a=nC(s,o,n,r|ie.Self,gn);if(a!==gn)return a;let u=s.parent;if(!u){let l=o[DD];if(l){let h=l.get(n,gn,r);if(h!==gn)return h}u=rC(o),o=o[Rs]}s=u}return i}function rC(t){let e=t[ce],n=e.type;return n===2?e.declTNode:n===1?t[an]:null}function AE(t,e=null,n=null,r){let i=iC(t,e,n,r);return i.resolveInjectorInitializers(),i}function iC(t,e=null,n=null,r,i=new Set){let s=[n||Ut,_N(t)];return r=r||(typeof t=="object"?void 0:gt(t)),new pa(s,e||wg(),r||null,i)}var Xr=class Xr{static create(e,n){if(Array.isArray(e))return AE({name:""},n,e,"");{let r=e.name??"";return AE({name:r},e.parent,e.providers,r)}}};Xr.THROW_IF_NOT_FOUND=ha,Xr.NULL=new ol,Xr.\u0275prov=Q({token:Xr,providedIn:"any",factory:()=>ae(cD)}),Xr.__NG_ELEMENT_ID__=-1;var Ht=Xr;var vx=new G("");vx.__NG_ELEMENT_ID__=t=>{let e=bt();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(t&ie.Optional)return null;throw new q(204,!1)};var _x="ngOriginalError";function Ep(t){return t[_x]}var sC=!0,oC=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Ix,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),zp=class extends oC{constructor(e){super(),this._lView=e}onDestroy(e){return OD(this._lView,e),()=>jN(this._lView,e)}};function Ix(){return new zp(De())}var xs=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var qp=class extends tt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,RN()&&(this.destroyRef=L(oC,{optional:!0})??void 0,this.pendingTasks=L(xs,{optional:!0})??void 0)}emit(e){let n=ve(null);try{super.next(e)}finally{ve(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},xe=qp;function yl(...t){}function aC(t){let e,n;function r(){t=yl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function ME(t){return queueMicrotask(()=>t()),()=>{t=yl}}var Rg="isAngularZone",vl=Rg+"_ID",wx=0,Me=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xe(!1),this.onMicrotaskEmpty=new xe(!1),this.onStable=new xe(!1),this.onError=new xe(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=sC}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Cx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Rg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ex,yl,yl);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Ex={};function Ng(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Dx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){aC(()=>{t.callbackScheduled=!1,Gp(t),t.isCheckStableRunning=!0,Ng(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Gp(t)}function Cx(t){let e=()=>{Dx(t)},n=wx++;t._inner=t._inner.fork({name:"angular",properties:{[Rg]:!0,[vl]:n,[vl+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(bx(u))return r.invokeTask(s,o,a,u);try{return RE(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),NE(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return RE(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Tx(u)&&e(),NE(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Gp(t),Ng(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Gp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function RE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function NE(t){t._nesting--,Ng(t)}var Wp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xe,this.onMicrotaskEmpty=new xe,this.onStable=new xe,this.onError=new xe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function bx(t){return cC(t,"__ignore_ng_zone__")}function Tx(t){return cC(t,"__scheduler_tick__")}function cC(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Fn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ep(e);for(;n&&Ep(n);)n=Ep(n);return n||null}},Sx=new G("",{providedIn:"root",factory:()=>{let t=L(Me),e=L(Fn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function Ax(){return Vl(bt(),De())}function Vl(t,e){return new En(zt(t,e))}var En=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Ax;let t=e;return t})();function uC(t){return(t.flags&128)===128}var lC=new Map,Mx=0;function Rx(){return Mx++}function Nx(t){lC.set(t[xl],t)}function Kp(t){lC.delete(t[xl])}var xE="__ngContext__";function ci(t,e){fr(e)?(t[xE]=e[xl],Nx(e)):t[xE]=e}function dC(t){return fC(t[ga])}function hC(t){return fC(t[nn])}function fC(t){for(;t!==null&&!Bn(t);)t=t[nn];return t}var Qp;function pC(t){Qp=t}function xx(){if(Qp!==void 0)return Qp;if(typeof document<"u")return document;throw new q(210,!1)}var xg=new G("",{providedIn:"root",factory:()=>Px}),Px="ng",Pg=new G(""),_r=new G("",{providedIn:"platform",factory:()=>"unknown"});var Og=new G("",{providedIn:"root",factory:()=>xx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ox="h",kx="b";var Fx=()=>null;function kg(t,e,n=!1){return Fx(t,e,n)}var gC=!1,Lx=new G("",{providedIn:"root",factory:()=>gC});var _l=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${YE})`}};function Ul(t){return t instanceof _l?t.changingThisBreaksApplicationSecurity:t}function mC(t,e){let n=Vx(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${YE})`)}return n===e}function Vx(t){return t instanceof _l&&t.getTypeName()||null}var Ux=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yC(t){return t=String(t),t.match(Ux)?t:"unsafe:"+t}var Fg=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Fg||{});function vC(t){let e=jx();return e?e.sanitize(Fg.URL,t)||"":mC(t,"URL")?Ul(t):yC(Ml(t))}function jx(){let t=De();return t&&t[yn].sanitizer}function _C(t){return t instanceof Function?t():t}var Ln=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ln||{}),Bx;function Lg(t,e){return Bx(t,e)}function gs(t,e,n,r,i){if(r!=null){let s,o=!1;Bn(r)?s=r:fr(r)&&(o=!0,r=r[jn]);let a=In(r);t===0&&n!==null?i==null?CC(e,n,a):Il(e,n,a,i||null,!0):t===1&&n!==null?Il(e,n,a,i||null,!0):t===2?nP(e,a,o):t===3&&e.destroyNode(a),s!=null&&iP(e,t,s,n,i)}}function $x(t,e){return t.createText(e)}function Hx(t,e,n){t.setValue(e,n)}function IC(t,e,n){return t.createElement(e,n)}function zx(t,e){wC(t,e),e[jn]=null,e[an]=null}function qx(t,e,n,r,i,s){r[jn]=i,r[an]=e,jl(t,r,n,1,i,s)}function wC(t,e){e[yn].changeDetectionScheduler?.notify(9),jl(t,e,e[He],2,null,null)}function Gx(t){let e=t[ga];if(!e)return Dp(t[ce],t);for(;e;){let n=null;if(fr(e))n=e[ga];else{let r=e[Bt];r&&(n=r)}if(!n){for(;e&&!e[nn]&&e!==t;)fr(e)&&Dp(e[ce],e),e=e[mt];e===null&&(e=t),fr(e)&&Dp(e[ce],e),n=e&&e[nn]}e=n}}function Wx(t,e,n,r){let i=Bt+r,s=n.length;r>0&&(n[i-1][nn]=e),r<s-Bt?(e[nn]=n[i],aD(n,Bt+r,e)):(n.push(e),e[nn]=null),e[mt]=n;let o=e[Es];o!==null&&n!==o&&EC(o,e);let a=e[Ds];a!==null&&a.insertView(t),Vp(e),e[Y]|=128}function EC(t,e){let n=t[ll],r=e[mt];if(fr(r))t[Y]|=dl.HasTransplantedViews;else{let i=r[mt][vn];e[vn]!==i&&(t[Y]|=dl.HasTransplantedViews)}n===null?t[ll]=[e]:n.push(e)}function Vg(t,e){let n=t[ll],r=n.indexOf(e);n.splice(r,1)}function Yp(t,e){if(t.length<=Bt)return;let n=Bt+e,r=t[n];if(r){let i=r[Es];i!==null&&i!==t&&Vg(i,r),e>0&&(t[n-1][nn]=r[nn]);let s=sl(t,Bt+e);zx(r[ce],r);let o=s[Ds];o!==null&&o.detachView(s[ce]),r[mt]=null,r[nn]=null,r[Y]&=-129}return r}function DC(t,e){if(!(e[Y]&256)){let n=e[He];n.destroyNode&&jl(t,e,n,3,null,null),Gx(e)}}function Dp(t,e){if(e[Y]&256)return;let n=ve(null);try{e[Y]&=-129,e[Y]|=256,e[jt]&&Yf(e[jt]),Qx(t,e),Kx(t,e),e[ce].type===1&&e[He].destroy();let r=e[Es];if(r!==null&&Bn(e[mt])){r!==e[mt]&&Vg(r,e);let i=e[Ds];i!==null&&i.detachView(t)}Kp(e)}finally{ve(n)}}function Kx(t,e){let n=t.cleanup,r=e[cl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[cl]=null);let i=e[hr];if(i!==null){e[hr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Qx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ai)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];pn(4,a,u);try{u.call(a)}finally{pn(5,a,u)}}else{pn(4,i,s);try{s.call(i)}finally{pn(5,i,s)}}}}}function Yx(t,e,n){return Zx(t,e.parent,n)}function Zx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[jn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===mn.None||s===mn.Emulated)return null}return zt(r,n)}}function Il(t,e,n,r,i){t.insertBefore(e,n,r,i)}function CC(t,e,n){t.appendChild(e,n)}function PE(t,e,n,r,i){r!==null?Il(t,e,n,r,i):CC(t,e,n)}function bC(t,e){return t.parentNode(e)}function Jx(t,e){return t.nextSibling(e)}function Xx(t,e,n){return tP(t,e,n)}function eP(t,e,n){return t.type&40?zt(t,n):null}var tP=eP,OE;function Ug(t,e,n,r){let i=Yx(t,r,e),s=e[He],o=r.parent||e[an],a=Xx(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)PE(s,i,n[u],a,!1);else PE(s,i,n,a,!1);OE!==void 0&&OE(s,r,e,n,i)}function ua(t,e){if(e!==null){let n=e.type;if(n&3)return zt(e,t);if(n&4)return Zp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ua(t,r);{let i=t[e.index];return Bn(i)?Zp(-1,i):In(i)}}else{if(n&128)return ua(t,e.next);if(n&32)return Lg(e,t)()||In(t[e.index]);{let r=TC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=si(t[vn]);return ua(i,r)}else return ua(t,e.next)}}}return null}function TC(t,e){if(e!==null){let r=t[vn][an],i=e.projection;return r.projection[i]}return null}function Zp(t,e){let n=Bt+t+1;if(n<e.length){let r=e[n],i=r[ce].firstChild;if(i!==null)return ua(r,i)}return e[ii]}function nP(t,e,n){t.removeChild(null,e,n)}function jg(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&ci(In(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)jg(t,e,n.child,r,i,s,!1),gs(e,t,i,a,s);else if(u&32){let l=Lg(n,r),h;for(;h=l();)gs(e,t,i,h,s);gs(e,t,i,a,s)}else u&16?rP(t,e,r,n,i,s):gs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function jl(t,e,n,r,i,s){jg(n,r,t.firstChild,e,i,s,!1)}function rP(t,e,n,r,i,s){let o=n[vn],u=o[an].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];gs(e,t,i,h,s)}else{let l=u,h=o[mt];uC(r)&&(l.flags|=128),jg(t,e,l,h,i,s,!0)}}function iP(t,e,n,r,i){let s=n[ii],o=In(n);s!==o&&gs(e,t,r,s,i);for(let a=Bt;a<n.length;a++){let u=n[a];jl(u[ce],u,t,e,r,s)}}function sP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ln.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ln.Important),t.setStyle(n,r,i,s))}}function oP(t,e,n){t.setAttribute(e,"style",n)}function SC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function AC(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&xp(t,e,r),i!==null&&SC(t,e,i),s!==null&&oP(t,e,s)}var Ir={};function je(t=1){MC(yt(),De(),Ns()+t,!1)}function MC(t,e,n,r){if(!r)if((e[Y]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Xu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&el(e,s,0,n)}oi(n)}function le(t,e=ie.Default){let n=De();if(n===null)return ae(t,e);let r=bt();return tC(r,n,pt(t),e)}function RC(t,e,n,r,i,s){let o=ve(null);try{let a=null;i&pr.SignalBased&&(a=e[r][Pn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&pr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):TD(e,a,r,s)}finally{ve(o)}}function aP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)oi(~i);else{let s=i,o=n[++r],a=n[++r];JN(o,s);let u=e[s];a(2,u)}}}finally{oi(-1)}}function Bl(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[jn]=i,p[Y]=r|4|128|8|64,(l!==null||t&&t[Y]&2048)&&(p[Y]|=2048),xD(p),p[mt]=p[Rs]=t,p[rn]=n,p[yn]=o||t&&t[yn],p[He]=a||t&&t[He],p[ws]=u||t&&t[ws]||null,p[an]=s,p[xl]=Rx(),p[al]=h,p[DD]=l,p[vn]=e.type==2?t[vn]:p,p}function $l(t,e,n,r,i){let s=t.data[e];if(s===null)s=cP(t,e,n,r,i),ZN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=WN();s.injectorIndex=o===null?-1:o.injectorIndex}return wa(s,!0),s}function cP(t,e,n,r,i){let s=LD(),o=VD(),a=o?s:s&&s.parent,u=t.data[e]=fP(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function NC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function xC(t,e,n,r,i){let s=Ns(),o=r&2;try{oi(-1),o&&e.length>_n&&MC(t,e,_n,!1),pn(o?2:0,i),n(r,i)}finally{oi(s),pn(o?3:1,i)}}function PC(t,e,n){if(bD(e)){let r=ve(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{ve(r)}}}function OC(t,e,n){FD()&&(_P(t,e,n,zt(n,e)),(n.flags&64)===64&&UC(t,e,n))}function kC(t,e,n=zt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function FC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Bg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Bg(t,e,n,r,i,s,o,a,u,l,h){let p=_n+r,m=p+i,y=uP(p,m),b=typeof l=="function"?l():l;return y[ce]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function uP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ir);return n}function lP(t,e,n,r){let s=r.get(Lx,gC)||n===mn.ShadowDom,o=t.selectRootElement(e,s);return dP(o),o}function dP(t){hP(t)}var hP=()=>null;function fP(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return zN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function kE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=pr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?FE(r,n,l,a,u):FE(r,n,l,a)}return r}function FE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function pP(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=kE(0,p.inputs,h,u,y),l=kE(1,p.outputs,h,l,b);let N=u!==null&&o!==null&&!_g(e)?RP(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function gP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function $g(t,e,n,r,i,s,o,a){let u=zt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Hg(t,n,h,r,i),Pl(e)&&mP(n,e.index)):e.type&3?(r=gP(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function mP(t,e){let n=vr(e,t);n[Y]&16||(n[Y]|=64)}function LC(t,e,n,r){if(FD()){let i=r===null?null:{"":-1},s=wP(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&VC(t,e,n,o,i,a),i&&EP(n,r,i)}n.mergedAttrs=fa(n.mergedAttrs,n.attrs)}function VC(t,e,n,r,i,s){for(let l=0;l<r.length;l++)$p(ml(n,e),t,r[l].type);CP(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=NC(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=fa(n.mergedAttrs,h.hostAttrs),bP(t,n,e,u,h),DP(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}pP(t,n,s)}function yP(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;vP(o)!=a&&o.push(a),o.push(n,r,s)}}function vP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _P(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Pl(n)&&TP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ml(n,e),ci(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Cs(e,t,a,n);if(ci(l,e),o!==null&&MP(e,a-i,l,u,n,o),gr(u)){let h=vr(n.index,e);h[rn]=Cs(e,t,a,n)}}}function UC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=XN();try{oi(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Up(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&IP(u,l)}}finally{oi(-1),Up(o)}}function IP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function wP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(lN(e,o.selectors,!1))if(r||(r=[]),gr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Jp(t,e,u)}else r.unshift(o),Jp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Jp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function EP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new q(-301,!1);r.push(e[i],s)}}}function DP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gr(e)&&(n[""]=t)}}function CP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function bP(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ni(i.type,!0)),o=new ai(s,gr(i),le);t.blueprint[r]=o,n[r]=o,yP(t,e,r,NC(t,n,i.hostVars,Ir),i)}function TP(t,e,n){let r=zt(e,t),i=FC(n),s=t[yn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Hl(t,Bl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function SP(t,e,n,r,i,s){let o=zt(t,e);AP(e[He],o,s,t.value,n,r,i)}function AP(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Ml(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function MP(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];RC(r,n,u,l,h,p)}}function RP(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function jC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function BC(t,e){let n=t.contentQueries;if(n!==null){let r=ve(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];BD(s),a.contentQueries(2,e[o],o)}}}finally{ve(r)}}}function Hl(t,e){return t[ga]?t[EE][nn]=e:t[ga]=e,t[EE]=e,e}function Xp(t,e,n){BD(0);let r=ve(null);try{e(t,n)}finally{ve(r)}}function NP(t){return t[cl]??=[]}function xP(t){return t.cleanup??=[]}function $C(t,e){let n=t[ws],r=n?n.get(Fn,null):null;r&&r.handleError(e)}function Hg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];RC(h,l,r,a,u,i)}}function PP(t,e,n){let r=RD(e,t);Hx(t[He],r,n)}function OP(t,e){let n=vr(e,t),r=n[ce];kP(r,n);let i=n[jn];i!==null&&n[al]===null&&(n[al]=kg(i,n[ws])),zg(r,n,n[rn])}function kP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function zg(t,e,n){Cg(e);try{let r=t.viewQuery;r!==null&&Xp(1,r,n);let i=t.template;i!==null&&xC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ds]?.finishViewCreation(t),t.staticContentQueries&&BC(t,e),t.staticViewQueries&&Xp(2,t.viewQuery,n);let s=t.components;s!==null&&FP(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Y]&=-5,bg()}}function FP(t,e){for(let n=0;n<e.length;n++)OP(t,e[n])}function LP(t,e,n,r){let i=ve(null);try{let s=e.tView,a=t[Y]&4096?4096:16,u=Bl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Es]=l;let h=t[Ds];return h!==null&&(u[Ds]=h.createEmbeddedView(s)),zg(s,u,n),u}finally{ve(i)}}function LE(t,e){return!e||e.firstChild===null||uC(t)}function VP(t,e,n,r=!0){let i=e[ce];if(Wx(i,e,t,n),r){let o=Zp(n,t),a=e[He],u=bC(a,t[ii]);u!==null&&qx(i,t[an],a,e,u,o)}let s=e[al];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function wl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(In(s)),Bn(s)&&UP(s,r);let o=n.type;if(o&8)wl(t,e,n.child,r);else if(o&32){let a=Lg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=TC(e,n);if(Array.isArray(a))r.push(...a);else{let u=si(e[vn]);wl(u[ce],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function UP(t,e){for(let n=Bt;n<t.length;n++){let r=t[n],i=r[ce].firstChild;i!==null&&wl(r[ce],r,i,e)}t[ii]!==t[jn]&&e.push(t[ii])}var HC=[];function jP(t){return t[jt]??BP(t)}function BP(t){let e=HC.pop()??Object.create(HP);return e.lView=t,e}function $P(t){t.lView[jt]!==t&&(t.lView=null,HC.push(t))}var HP=oe(k({},sa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{kl(t.lView)},consumerOnSignalRead(){this.lView[jt]=this}});function zP(t){let e=t[jt]??Object.create(qP);return e.lView=t,e}var qP=oe(k({},sa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=si(t.lView);for(;e&&!zC(e[ce]);)e=si(e);e&&PD(e)},consumerOnSignalRead(){this.lView[jt]=this}});function zC(t){return t.type!==2}var GP=100;function qC(t,e=!0,n=0){let r=t[yn],i=r.rendererFactory,s=!1;s||i.begin?.();try{WP(t,n)}catch(o){throw e&&$C(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function WP(t,e){let n=UD();try{CE(!0),eg(t,e);let r=0;for(;Ol(t);){if(r===GP)throw new q(103,!1);r++,eg(t,1)}}finally{CE(n)}}function KP(t,e,n,r){let i=e[Y];if((i&256)===256)return;let s=!1,o=!1;!s&&e[yn].inlineEffectRunner?.flush(),Cg(e);let a=!0,u=null,l=null;s||(zC(t)?(l=jP(e),u=yu(l)):Aw()===null?(a=!1,l=zP(e),u=yu(l)):e[jt]&&(Yf(e[jt]),e[jt]=null));try{xD(e),QN(t.bindingStartIndex),n!==null&&xC(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&Xu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&el(e,y,0,null),_p(e,0)}if(o||QP(e),GC(e,0),t.contentQueries!==null&&BC(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&Xu(e,y)}else{let y=t.contentHooks;y!==null&&el(e,y,1),_p(e,1)}aP(t,e);let p=t.components;p!==null&&KC(e,p,0);let m=t.viewQuery;if(m!==null&&Xp(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&Xu(e,y)}else{let y=t.viewHooks;y!==null&&el(e,y,2),_p(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[vp]){for(let y of e[vp])y();e[vp]=null}s||(e[Y]&=-73)}catch(h){throw s||kl(e),h}finally{l!==null&&(Kf(l,u),a&&$P(l)),bg()}}function GC(t,e){for(let n=dC(t);n!==null;n=hC(n))for(let r=Bt;r<n.length;r++){let i=n[r];WC(i,e)}}function QP(t){for(let e=dC(t);e!==null;e=hC(e)){if(!(e[Y]&dl.HasTransplantedViews))continue;let n=e[ll];for(let r=0;r<n.length;r++){let i=n[r];PD(i)}}}function YP(t,e,n){let r=vr(e,t);WC(r,n)}function WC(t,e){Dg(t)&&eg(t,e)}function eg(t,e){let r=t[ce],i=t[Y],s=t[jt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Qf(s)),o||=!1,s&&(s.dirty=!1),t[Y]&=-9217,o)KP(r,t,r.template,t[rn]);else if(i&8192){GC(t,1);let a=r.components;a!==null&&KC(t,a,1)}}function KC(t,e,n){for(let r=0;r<e.length;r++)YP(t,e[r],n)}function qg(t,e){let n=UD()?64:1088;for(t[yn].changeDetectionScheduler?.notify(e);t;){t[Y]|=n;let r=si(t);if(Fp(t)&&!r)return t;t=r}return null}var ui=class{get rootNodes(){let e=this._lView,n=e[ce];return wl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rn]}set context(e){this._lView[rn]=e}get destroyed(){return(this._lView[Y]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(Bn(e)){let n=e[ul],r=n?n.indexOf(this):-1;r>-1&&(Yp(e,r),sl(n,r))}this._attachedToViewContainer=!1}DC(this._lView[ce],this._lView)}onDestroy(e){OD(this._lView,e)}markForCheck(){qg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){Vp(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,qC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Fp(this._lView),n=this._lView[Es];n!==null&&!e&&Vg(n,this._lView),wC(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let n=Fp(this._lView),r=this._lView[Es];r!==null&&!n&&EC(r,this._lView),Vp(this._lView)}},zl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XP;let t=e;return t})(),ZP=zl,JP=class extends ZP{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=LP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ui(i)}};function XP(){return eO(bt(),De())}function eO(t,e){return t.type&4?new JP(e,t,Vl(t,e)):null}var I3=new RegExp(`^(\\d+)*(${kx}|${Ox})*(.*)`);var tO=()=>null;function VE(t,e){return tO(t,e)}var bs=class{},Gg=new G("",{providedIn:"root",factory:()=>!1});var QC=new G(""),YC=new G(""),tg=class{},El=class{};function nO(t){let e=Error(`No component factory found for ${gt(t)}.`);return e[rO]=t,e}var rO="ngComponent";var ng=class{resolveComponentFactory(e){throw nO(e)}},nm=class nm{};nm.NULL=new ng;var Ts=nm,Ss=class{},Hn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>iO();let t=e;return t})();function iO(){let t=De(),e=bt(),n=vr(e.index,t);return(fr(n)?n:t)[He]}var sO=(()=>{let e=class e{};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function rg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=hE(i,a);else if(s==2){let u=a,l=e[++o];r=hE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Dl=class extends Ts{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ri(e);return new ma(n,this.ngModule)}};function UE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:pr.None;e?n.push({propName:o,templateName:r,isSignal:(a&pr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function oO(t){let e=t.toLowerCase();return e==="svg"?kN:e==="math"?FN:null}var ma=class extends El{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=UE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return UE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=pN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ve(null);try{i=i||this.ngModule;let o=i instanceof $t?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new jp(e,o):e,u=a.get(Ss,null);if(u===null)throw new q(407,!1);let l=a.get(sO,null),h=a.get(bs,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?lP(m,r,this.componentDef.encapsulation,a):IC(m,y,oO(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;b!==null&&(R=kg(b,a,!0));let F=Bg(0,null,null,1,0,null,null,null,null,null,null),j=Bl(null,F,null,N,null,null,p,m,a,null,R);Cg(j);let V,K,re=null;try{let H=this.componentDef,w,v=null;H.findHostDirectiveDefs?(w=[],v=new Map,H.findHostDirectiveDefs(H,w,v),w.push(H)):w=[H];let _=aO(j,b);re=cO(_,b,H,w,j,p,m),K=ND(F,_n),b&&dO(m,H,b,r),n!==void 0&&hO(K,this.ngContentSelectors,n),V=lO(re,H,w,v,j,[fO]),zg(F,j,null)}catch(H){throw re!==null&&Kp(re),Kp(j),H}finally{bg()}return new ig(this.componentType,V,Vl(K,j),j,K)}finally{ve(s)}}},ig=class extends tg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ui(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Hg(s[ce],s,i,e,n),this.previousInputValues.set(e,n);let o=vr(this._tNode.index,s);qg(o,1)}}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function aO(t,e){let n=t[ce],r=_n;return t[r]=e,$l(n,r,2,"#host",null)}function cO(t,e,n,r,i,s,o){let a=i[ce];uO(r,t,e,o);let u=null;e!==null&&(u=kg(e,i[ws]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Bl(i,FC(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Jp(a,t,r.length-1),Hl(i,p),i[t.index]=p}function uO(t,e,n,r){for(let i of t)e.mergedAttrs=fa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(rg(e,e.mergedAttrs,!0),n!==null&&AC(r,n,e))}function lO(t,e,n,r,i,s){let o=bt(),a=i[ce],u=zt(o,i);VC(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Cs(i,a,p,o);ci(m,i)}UC(a,i,o),u&&ci(u,i);let l=Cs(i,a,o.directiveStart+o.componentOffset,o);if(t[rn]=i[rn]=l,s!==null)for(let h of s)h(l,e);return PC(a,o,i),l}function dO(t,e,n,r){if(r)xp(t,n,["ng-version","18.2.4"]);else{let{attrs:i,classes:s}=gN(e.selectors[0]);i&&xp(t,n,i),s&&s.length>0&&SC(t,n,s.join(" "))}}function hO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function fO(){let t=bt();Ag(De()[ce],t)}var Ps=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=pO;let t=e;return t})();function pO(){let t=bt();return mO(t,De())}var gO=Ps,ZC=class extends gO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){let e=Mg(this._hostTNode,this._hostLView);if(QD(e)){let n=pl(e,this._hostLView),r=fl(e),i=n[ce].data[r+8];return new ti(i,n)}else return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=jE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=VE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,LE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!NN(e),a;if(o)a=n;else{let b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}let u=o?e:new ma(ri(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get($t,null);N&&(s=N)}let h=ri(u.componentType??{}),p=VE(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,s);return this.insertImpl(y.hostView,a,LE(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(VN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[mt],l=new ZC(u,u[an],u[mt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return VP(o,i,s,r),e.attachToViewContainerRef(),aD(Cp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=jE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Yp(this._lContainer,n);r&&(sl(Cp(this._lContainer),n),DC(r[ce],r))}detach(e){let n=this._adjustIndex(e,-1),r=Yp(this._lContainer,n);return r&&sl(Cp(this._lContainer),n)!=null?new ui(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function jE(t){return t[ul]}function Cp(t){return t[ul]||(t[ul]=[])}function mO(t,e){let n,r=e[t.index];return Bn(r)?n=r:(n=jC(r,e,null,t),e[t.index]=n,Hl(e,n)),vO(n,e,t,r),new ZC(n,t,e)}function yO(t,e){let n=t[He],r=n.createComment(""),i=zt(e,t),s=bC(n,i);return Il(n,s,r,Jx(n,i),!1),r}var vO=wO,_O=()=>!1;function IO(t,e,n){return _O(t,e,n)}function wO(t,e,n,r){if(t[ii])return;let i;n.type&8?i=In(r):i=yO(e,n),t[ii]=i}var BE=new Set;function Ea(t){BE.has(t)||(BE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function EO(t){return typeof t=="function"&&t[Pn]!==void 0}function Da(t,e){Ea("NgSignals");let n=Uw(t),r=n[Pn];return e?.equal&&(r.equal=e.equal),n.set=i=>Zf(r,i),n.update=i=>jw(r,i),n.asReadonly=DO.bind(n),n}function DO(){let t=this[Pn];if(t.readonlyFn===void 0){let e=()=>this();e[Pn]=t,t.readonlyFn=e}return t.readonlyFn}function JC(t){return EO(t)&&typeof t.set=="function"}function CO(t){return Object.getPrototypeOf(t.prototype).constructor}function Rt(t){let e=CO(t.type),n=!0,r=[t];for(;e;){let i;if(gr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Qu(t.inputs),o.inputTransforms=Qu(t.inputTransforms),o.declaredInputs=Qu(t.declaredInputs),o.outputs=Qu(t.outputs);let a=i.hostBindings;a&&MO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&SO(t,u),l&&AO(t,l),bO(t,i),kR(t.outputs,i.outputs),gr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Rt&&(n=!1)}}e=Object.getPrototypeOf(e)}TO(r)}function bO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function TO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fa(i.hostAttrs,n=fa(n,i.hostAttrs))}}function Qu(t){return t===vs?{}:t===Ut?[]:t}function SO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function AO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function MO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var mr=class{},ya=class{};var sg=class extends mr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dl(this);let s=mD(e);this._bootstrapComponents=_C(s.bootstrap),this._r3Injector=iC(e,n,[{provide:mr,useValue:this},{provide:Ts,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},og=class extends ya{constructor(e){super(),this.moduleType=e}create(e){return new sg(this.moduleType,e,[])}};var Cl=class extends mr{constructor(e){super(),this.componentFactoryResolver=new Dl(this),this.instance=null;let n=new pa([...e.providers,{provide:mr,useValue:this},{provide:Ts,useValue:this.componentFactoryResolver}],e.parent||wg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wg(t,e,n=null){return new Cl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function XC(t){return NO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function RO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function NO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function xO(t,e,n){return t[e]=n}function Os(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function PO(t){return(t.flags&32)===32}function OO(t,e,n,r,i,s,o,a,u){let l=e.consts,h=$l(e,t,4,o||null,a||null);LC(e,n,h,hl(l,u)),Ag(e,h);let p=h.tView=Bg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function kO(t,e,n,r,i,s,o,a,u,l){let h=n+_n,p=e.firstCreatePass?OO(h,e,t,r,i,s,o,a,u):e.data[h];wa(p,!1);let m=FO(e,t,p,n);Tg()&&Ug(e,t,m,p),ci(m,t);let y=jC(m,t,m,p);return t[h]=y,Hl(t,y),IO(y,p,t),Eg(p)&&OC(e,t,p),u!=null&&kC(t,p,l),p}function gi(t,e,n,r,i,s,o,a){let u=De(),l=yt(),h=hl(l.consts,s);return kO(u,l,t,e,n,r,i,h,o,a),gi}var FO=LO;function LO(t,e,n,r){return Sg(!0),e[He].createComment("")}var la=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(la||{}),VO=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),ei=class ei{constructor(){this.ngZone=L(Me),this.scheduler=L(bs),this.errorHandler=L(Fn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of ei.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};ei.PHASES=[la.EarlyRead,la.Write,la.MixedReadWrite,la.Read],ei.\u0275prov=Q({token:ei,providedIn:"root",factory:()=>new ei});var $E=ei;function ql(t,e,n,r){let i=De(),s=Fl();if(Os(i,s,e)){let o=yt(),a=Ll();SP(a,i,t,e,n,r)}return ql}function eb(t,e,n,r){return Os(t,Fl(),n)?e+Ml(n)+r:Ir}function Yu(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function UO(t){return(t&2)==2}function jO(t,e){return t&131071|e<<17}function ag(t){return t|2}function As(t){return(t&131068)>>2}function bp(t,e){return t&-131069|e<<2}function BO(t){return(t&1)===1}function cg(t){return t|1}function $O(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=li(o),u=As(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Ia(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=li(t[a+1]);t[r+1]=Yu(m,a),m!==0&&(t[m+1]=bp(t[m+1],r)),t[a+1]=jO(t[a+1],r)}else t[r+1]=Yu(a,0),a!==0&&(t[a+1]=bp(t[a+1],r)),a=r;else t[r+1]=Yu(u,0),a===0?a=r:t[u+1]=bp(t[u+1],r),u=r;l&&(t[r+1]=ag(t[r+1])),HE(t,h,r,!0),HE(t,h,r,!1),HO(e,h,t,r,s),o=Yu(a,u),s?e.classBindings=o:e.styleBindings=o}function HO(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ia(s,e)>=0&&(n[r+1]=cg(n[r+1]))}function HE(t,e,n,r){let i=t[n+1],s=e===null,o=r?li(i):As(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];zO(u,e)&&(a=!0,t[o+1]=r?cg(l):ag(l)),o=r?li(l):As(l)}a&&(t[n+1]=r?ag(i):cg(i))}function zO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ia(t,e)>=0:!1}function Tt(t,e,n){let r=De(),i=Fl();if(Os(r,i,e)){let s=yt(),o=Ll();$g(s,o,r,t,e,r[He],n,!1)}return Tt}function zE(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Hg(t,n,s[o],o,r)}function Gl(t,e){return qO(t,e,null,!0),Gl}function qO(t,e,n,r){let i=De(),s=yt(),o=YN(2);if(s.firstUpdatePass&&WO(s,t,o,r),e!==Ir&&Os(i,o,e)){let a=s.data[Ns()];JO(s,a,i,i[He],t,i[o+1]=XO(e,n),r,o)}}function GO(t,e){return e>=t.expandoStartIndex}function WO(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ns()],o=GO(t,n);ek(s,r)&&e===null&&!o&&(e=!1),e=KO(i,s,e,r),$O(i,s,e,n,o,r)}}function KO(t,e,n,r){let i=ex(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Tp(null,t,e,n,r),n=va(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Tp(i,t,e,n,r),s===null){let u=QO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Tp(null,t,e,u[1],r),u=va(u,e.attrs,r),YO(t,e,r,u))}else s=ZO(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function QO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(As(r)!==0)return t[li(r)]}function YO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[li(i)]=r}function ZO(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=va(r,o,n)}return va(r,e.attrs,n)}function Tp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=va(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function va(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),tN(t,o,n?!0:e[++s]))}return t===void 0?null:t}function JO(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=BO(l)?qE(u,e,n,i,As(l),o):void 0;if(!bl(h)){bl(s)||UO(l)&&(s=qE(u,null,n,i,a,o));let p=RD(Ns(),n);sP(r,o,p,i,s)}}function qE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Ir&&(m=p?Ut:void 0);let y=p?mp(m,r):h===r?m:void 0;if(l&&!bl(y)&&(y=mp(u,r)),bl(y)&&(a=y,o))return a;let b=t[i+1];i=o?li(b):As(b)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=mp(u,r))}return a}function bl(t){return t!==void 0}function XO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=gt(Ul(t)))),t}function ek(t,e){return(t.flags&(e?8:16))!==0}function tk(t,e,n,r,i,s){let o=e.consts,a=hl(o,i),u=$l(e,t,2,r,a);return LC(e,n,u,hl(o,s)),u.attrs!==null&&rg(u,u.attrs,!1),u.mergedAttrs!==null&&rg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function me(t,e,n,r){let i=De(),s=yt(),o=_n+t,a=i[He],u=s.firstCreatePass?tk(o,s,i,e,n,r):s.data[o],l=nk(s,i,u,a,e,t);i[o]=l;let h=Eg(u);return wa(u,!0),AC(a,l,u),!PO(u)&&Tg()&&Ug(s,i,l,u),BN()===0&&ci(l,i),$N(),h&&(OC(s,i,u),PC(s,u,i)),r!==null&&kC(i,u),me}function Ie(){let t=bt();VD()?KN():(t=t.parent,wa(t,!1));let e=t;qN(e)&&GN(),HN();let n=yt();return n.firstCreatePass&&(Ag(n,t),bD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&ax(e)&&zE(n,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&cx(e)&&zE(n,e,De(),e.stylesWithoutHost,!1),Ie}function ks(t,e,n,r){return me(t,e,n,r),Ie(),ks}var nk=(t,e,n,r,i,s)=>(Sg(!0),IC(r,i,rx()));function Wl(){return De()}var Tl="en-US";var rk=Tl;function ik(t){typeof t=="string"&&(rk=t.toLowerCase().replace(/_/g,"-"))}var sk=(t,e,n)=>{};function Oe(t,e,n,r){let i=De(),s=yt(),o=bt();return tb(s,i,i[He],o,t,e,r),Oe}function ok(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[cl],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function tb(t,e,n,r,i,s,o){let a=Eg(r),l=t.firstCreatePass&&xP(t),h=e[rn],p=NP(e),m=!0;if(r.type&3||o){let N=zt(r,e),R=o?o(N):N,F=p.length,j=o?K=>o(In(K[r.index])):r.index,V=null;if(!o&&a&&(V=ok(t,e,i,r.index)),V!==null){let K=V.__ngLastListenerFn__||V;K.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,m=!1}else{s=WE(r,e,h,s),sk(N,i,s);let K=n.listen(R,i,s);p.push(s,K),l&&l.push(i,j,F,F+1)}}else s=WE(r,e,h,s);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let N=b.length;if(N)for(let R=0;R<N;R+=2){let F=b[R],j=b[R+1],re=e[F][j].subscribe(s),H=p.length;p.push(s,re),l&&l.push(i,r.index,H,-(H+1))}}}function GE(t,e,n,r){let i=ve(null);try{return pn(6,e,n),n(r)!==!1}catch(s){return $C(t,s),!1}finally{pn(7,e,n),ve(i)}}function WE(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?vr(t.index,e):e;qg(o,5);let a=GE(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=GE(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function rt(t=1){return nx(t)}function Kg(t,e,n,r,i){let s=De(),o=eb(s,e,n,r);if(o!==Ir){let a=yt(),u=Ll();$g(a,u,s,t,o,s[He],i,!1)}return Kg}function ak(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Be(t,e=""){let n=De(),r=yt(),i=t+_n,s=r.firstCreatePass?$l(r,i,1,e,null):r.data[i],o=ck(r,n,s,e,t);n[i]=o,Tg()&&Ug(r,n,o,s),wa(s,!1)}var ck=(t,e,n,r,i)=>(Sg(!0),$x(e[He],r));function Kl(t){return Ca("",t,""),Kl}function Ca(t,e,n){let r=De(),i=eb(r,t,e,n);return i!==Ir&&PP(r,Ns(),i),Ca}function wr(t,e,n){JC(e)&&(e=e());let r=De(),i=Fl();if(Os(r,i,e)){let s=yt(),o=Ll();$g(s,o,r,t,e,r[He],n,!1)}return wr}function mi(t,e){let n=JC(t);return n&&t.set(e),n}function Er(t,e){let n=De(),r=yt(),i=bt();return tb(r,n,n[He],i,t,e),Er}function uk(t,e,n){let r=yt();if(r.firstCreatePass){let i=gr(t);ug(n,r.data,r.blueprint,i,!0),ug(e,r.data,r.blueprint,i,!1)}}function ug(t,e,n,r,i){if(t=pt(t),Array.isArray(t))for(let s=0;s<t.length;s++)ug(t[s],e,n,r,i);else{let s=yt(),o=De(),a=bt(),u=Is(t)?t:pt(t.provide),l=ED(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Is(t)||!t.multi){let y=new ai(l,i,le),b=Ap(u,e,i?h:h+m,p);b===-1?($p(ml(a,o),s,u),Sp(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[b]=y,o[b]=y)}else{let y=Ap(u,e,h+m,p),b=Ap(u,e,h,h+m),N=y>=0&&n[y],R=b>=0&&n[b];if(i&&!R||!i&&!N){$p(ml(a,o),s,u);let F=hk(i?dk:lk,n.length,i,r,l);!i&&R&&(n[b].providerFactory=F),Sp(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),o.push(F)}else{let F=nb(n[i?b:y],l,!i&&r);Sp(s,t,y>-1?y:b,F)}!i&&r&&R&&n[b].componentProviders++}}}function Sp(t,e,n,r){let i=Is(e),s=DN(e);if(i||s){let u=(s?pt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function nb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ap(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function lk(t,e,n,r){return lg(this.multi,[])}function dk(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Cs(n,n[ce],this.providerFactory.index,r);s=a.slice(0,o),lg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],lg(i,s);return s}function lg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function hk(t,e,n,r,i){let s=new ai(t,n,le);return s.multi=[],s.index=e,s.componentProviders=0,nb(s,i,r&&!n),s}function zn(t,e=[]){return n=>{n.providersResolver=(r,i)=>uk(r,i?i(t):t,e)}}var fk=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=_D(!1,r.type),s=i.length>0?Wg([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Q({token:e,providedIn:"environment",factory:()=>new e(ae($t))});let t=e;return t})();function Fs(t){Ea("NgStandalone"),t.getStandaloneInjector=e=>e.get(fk).getOrCreateStandaloneInjector(t)}function rb(t,e,n,r){return ib(De(),jD(),t,e,n,r)}function pk(t,e){let n=t[e];return n===Ir?void 0:n}function ib(t,e,n,r,i,s){let o=e+n;return Os(t,o,i)?xO(t,o+1,s?r.call(s,i):r(i)):pk(t,o+1)}function Qg(t,e){let n=yt(),r,i=t+_n;n.firstCreatePass?(r=gk(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ni(r.type,!0)),o,a=Ct(le);try{let u=gl(!1),l=s();return gl(u),ak(n,De(),i,l),l}finally{Ct(a)}}function gk(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Yg(t,e,n){let r=t+_n,i=De(),s=LN(i,r);return mk(i,r)?ib(i,jD(),e,s.transform,n,s):s.transform(n)}function mk(t,e){return t[ce].data[e].pure}var Vn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},sb=new Vn("18.2.4");var Ql=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var ob=new G("");function Dr(t){return!!t&&typeof t.then=="function"}function Zg(t){return!!t&&typeof t.subscribe=="function"}var ab=new G(""),cb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=L(ab,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Dr(o))r.push(o);else if(Zg(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jg=new G("");function yk(){Vw(()=>{throw new q(600,!1)})}function vk(t){return t.isBoundToModule}var _k=10;function Ik(t,e,n){try{let r=n();return Dr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var yi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(Sx),this.afterRenderManager=L(VO),this.zonelessEnabled=L(Gg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new tt,this.afterTick=new tt,this.componentTypes=[],this.components=[],this.isStable=L(xs).hasPendingTasks.pipe(ne(r=>!r)),this._injector=L($t)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof El;if(!this._injector.get(cb).done){let y=!s&&gD(r),b=!1;throw new q(405,b)}let a;s?a=r:a=this._injector.get(Ts).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=vk(a)?void 0:this._injector.get(mr),l=i||a.selector,h=a.create(Ht.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(ob,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),tl(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new q(101,!1);let r=ve(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ve(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Ss,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<_k;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)wk(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Ol(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;tl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Jg,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>tl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function wk(t,e,n,r){if(!n&&!Ol(t))return;qC(t,e,n&&!r?0:1)}var dg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Xg=(()=>{let e=class e{compileModuleSync(r){return new og(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=mD(r),o=_C(s.declarations).reduce((a,u)=>{let l=ri(u);return l&&a.push(new ma(l)),a},[]);return new dg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ek=(()=>{let e=class e{constructor(){this.zone=L(Me),this.changeDetectionScheduler=L(bs),this.applicationRef=L(yi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dk=new G("",{factory:()=>!1});function ub({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Me(oe(k({},db()),{scheduleInRootZone:n})),[{provide:Me,useFactory:t},{provide:_s,multi:!0,useFactory:()=>{let r=L(Ek,{optional:!0});return()=>r.initialize()}},{provide:_s,multi:!0,useFactory:()=>{let r=L(Ck);return()=>{r.initialize()}}},e===!0?{provide:QC,useValue:!0}:[],{provide:YC,useValue:n??sC}]}function lb(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=ub({ngZoneFactory:()=>{let i=db(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ea("NgZone_CoalesceEvent"),new Me(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return yr([{provide:Dk,useValue:!0},{provide:Gg,useValue:!1},r])}function db(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ck=(()=>{let e=class e{constructor(){this.subscription=new Ve,this.initialized=!1,this.zone=L(Me),this.pendingTasks=L(xs)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Me.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var bk=(()=>{let e=class e{constructor(){this.appRef=L(yi),this.taskService=L(xs),this.ngZone=L(Me),this.zonelessEnabled=L(Gg),this.disableScheduling=L(QC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ve,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(YC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Wp||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?ME:aC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ME(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tk(){return typeof $localize<"u"&&$localize.locale||Tl}var em=new G("",{providedIn:"root",factory:()=>L(em,ie.Optional|ie.SkipSelf)||Tk()});var hb=new G("");function Zu(t){return!!t.platformInjector}function Sk(t){let e=Zu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Me);return n.run(()=>{Zu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Fn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Zu(t)){let s=()=>e.destroy(),o=t.platformInjector.get(hb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{tl(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return Ik(r,n,()=>{let s=e.get(cb);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(em,Tl);if(ik(o||Tl),Zu(t)){let a=e.get(yi);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return Ak(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Ak(t,e){let n=t.injector.get(yi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new q(-403,!1);e.push(t)}var nl=null;function Mk(t=[],e){return Ht.create({name:e,providers:[{provide:Nl,useValue:"platform"},{provide:hb,useValue:new Set([()=>nl=null])},...t]})}function Rk(t=[]){if(nl)return nl;let e=Mk(t);return nl=e,yk(),Nk(e),e}function Nk(t){t.get(Pg,null)?.forEach(n=>n())}var Cr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xk;let t=e;return t})();function xk(t){return Pk(bt(),De(),(t&16)===16)}function Pk(t,e,n){if(Pl(t)&&!n){let r=vr(t.index,e);return new ui(r,r)}else if(t.type&175){let r=e[vn];return new ui(r,e)}return null}var hg=class{constructor(){}supports(e){return XC(e)}create(e){return new fg(e)}},Ok=(t,e)=>e,fg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ok}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<KE(r,i,s)?n:r,a=KE(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,b=y+m;h<=b&&b<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!XC(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,RO(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new pg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},pg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},gg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Sl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new gg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function KE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function QE(){return new tm([new hg])}var tm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||QE()),deps:[[e,new oD,new on]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new q(901,!1)}};e.\u0275prov=Q({token:e,providedIn:"root",factory:QE});let t=e;return t})();function fb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Rk(r),s=[ub({}),{provide:bs,useExisting:bk},...n||[]],o=new Cl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Sk({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var pb=new G("");function ba(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ta(t,e){Ea("NgSignals");let n=kw(t);return e?.equal&&(n[Pn].equal=e.equal),n}function cn(t){let e=ve(null);try{return t()}finally{ve(e)}}var Ib=null;function qn(){return Ib}function wb(t){Ib??=t}var Yl=class{};var Nt=new G(""),Eb=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>L(Lk),providedIn:"platform"});let t=e;return t})();var Lk=(()=>{let e=class e extends Eb{constructor(){super(),this._doc=L(Nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(r){let i=qn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=qn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Db(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function gb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function _i(t){return t&&t[0]!=="?"?"?"+t:t}var Jl=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>L(Cb),providedIn:"root"});let t=e;return t})(),Vk=new G(""),Cb=(()=>{let e=class e extends Jl{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Db(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+_i(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+_i(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+_i(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(ae(Eb),ae(Vk,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Sa=(()=>{let e=class e{constructor(r){this._subject=new xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Bk(gb(mb(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+_i(i))}normalize(r){return e.stripTrailingSlash(jk(this._basePath,mb(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+_i(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+_i(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=_i,e.joinWithSlash=Db,e.stripTrailingSlash=gb,e.\u0275fac=function(i){return new(i||e)(ae(Jl))},e.\u0275prov=Q({token:e,factory:()=>Uk(),providedIn:"root"});let t=e;return t})();function Uk(){return new Sa(ae(Jl))}function jk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function mb(t){return t.replace(/\/index.html$/,"")}function Bk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function bb(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var rm=/\s+/,yb=[],Tb=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=yb,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(rm):yb}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(rm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(rm).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(le(En),le(Hn))},e.\u0275dir=Pe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var im=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Sb=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new im(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),vb(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);vb(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(le(Ps),le(zl),le(tm))},e.\u0275dir=Pe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function vb(t,e){t.context.$implicit=e.item}var Ab=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new sm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){_b("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){_b("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(le(Ps),le(zl))},e.\u0275dir=Pe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),sm=class{constructor(){this.$implicit=null,this.ngIf=null}};function _b(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${gt(e)}'.`)}function $k(t,e){return new q(2100,!1)}var om=class{createSubscription(e,n){return cn(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){cn(()=>e.unsubscribe())}},am=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},Hk=new am,zk=new om,Mb=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Dr(r))return Hk;if(Zg(r))return zk;throw $k(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(le(Cr,16))},e.\u0275pipe=hD({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var cm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=hi({type:e}),e.\u0275inj=di({});let t=e;return t})(),Rb="browser",qk="server";function um(t){return t===qk}var Zl=class{};var hm=class extends Yl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},fm=class t extends hm{static makeCurrent(){wb(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Wk();return n==null?null:Kk(n)}resetBaseElement(){Aa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bb(document.cookie,e)}},Aa=null;function Wk(){return Aa=Aa||document.querySelector("base"),Aa?Aa.getAttribute("href"):null}function Kk(t){return new URL(t,document.baseURI).pathname}var Qk=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Xl=new G(""),Ob=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(ae(Xl),ae(Me))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Ma=class{constructor(e){this._doc=e}},lm="ng-app-id",kb=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=um(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${lm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(lm),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(lm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(ae(Nt),ae(xg),ae(Og,8),ae(_r))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),dm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gm=/%COMP%/g,Fb="%COMP%",Yk=`_nghost-${Fb}`,Zk=`_ngcontent-${Fb}`,Jk=!0,Xk=new G("",{providedIn:"root",factory:()=>Jk});function e1(t){return Zk.replace(gm,t)}function t1(t){return Yk.replace(gm,t)}function Lb(t,e){return e.map(n=>n.replace(gm,t))}var Nb=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=um(u),this.defaultRenderer=new Ra(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===mn.ShadowDom&&(i=oe(k({},i),{encapsulation:mn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof ed?s.applyToHost(r):s instanceof Na&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case mn.Emulated:o=new ed(l,h,i,this.appId,p,a,u,m);break;case mn.ShadowDom:return new pm(l,h,r,i,a,u,this.nonce,m);default:o=new Na(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(ae(Ob),ae(kb),ae(xg),ae(Xk),ae(Nt),ae(_r),ae(Me),ae(Og))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Ra=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(dm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(xb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(xb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=dm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=dm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ln.DashCase|Ln.Important)?e.style.setProperty(n,r,i&Ln.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ln.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function xb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var pm=class extends Ra{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Lb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Na=class extends Ra{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Lb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ed=class extends Na{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=e1(l),this.hostAttr=t1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},n1=(()=>{let e=class e extends Ma{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(ae(Nt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),r1=(()=>{let e=class e extends Ma{constructor(r){super(r),this.delegate=L(pb,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(ae(Nt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Pb=["alt","control","meta","shift"],i1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},o1=(()=>{let e=class e extends Ma{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),Pb.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=i1[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Pb.forEach(a=>{if(a!==s){let u=s1[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(ae(Nt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function Vb(t,e){return fb(k({rootComponent:t},a1(e)))}function a1(t){return{appProviders:[...h1,...t?.providers??[]],platformProviders:d1}}function c1(){fm.makeCurrent()}function u1(){return new Fn}function l1(){return pC(document),document}var d1=[{provide:_r,useValue:Rb},{provide:Pg,useValue:c1,multi:!0},{provide:Nt,useFactory:l1,deps:[]}];var h1=[{provide:Nl,useValue:"root"},{provide:Fn,useFactory:u1,deps:[]},{provide:Xl,useClass:n1,multi:!0,deps:[Nt,Me,_r]},{provide:Xl,useClass:o1,multi:!0,deps:[Nt]},{provide:Xl,useClass:r1,multi:!0},Nb,kb,Ob,{provide:Ss,useExisting:Nb},{provide:Zl,useClass:Qk,deps:[]},[]];var Ub=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(ae(Nt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var te="primary",Ka=Symbol("RouteTitle"),Im=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function $s(t){return new Im(t)}function p1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function g1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dn(t[n],e[n]))return!1;return!0}function Dn(t,e){let n=t?wm(t):void 0,r=e?wm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Wb(t[i],e[i]))return!1;return!0}function wm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Wb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Kb(t){return t.length>0?t[t.length-1]:null}function br(t){return lp(t)?t:Dr(t)?Ue(Promise.resolve(t)):ee(t)}var m1={exact:Yb,subset:Zb},Qb={exact:y1,subset:v1,ignored:()=>!0};function jb(t,e,n){return m1[n.paths](t.root,e.root,n.matrixParams)&&Qb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function y1(t,e){return Dn(t,e)}function Yb(t,e,n){if(!wi(t.segments,e.segments)||!rd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Yb(t.children[r],e.children[r],n))return!1;return!0}function v1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Wb(t[n],e[n]))}function Zb(t,e,n){return Jb(t,e,e.segments,n)}function Jb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!wi(i,n)||e.hasChildren()||!rd(i,n,r))}else if(t.segments.length===n.length){if(!wi(t.segments,n)||!rd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Zb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!wi(t.segments,i)||!rd(t.segments,i,r)||!t.children[te]?!1:Jb(t.children[te],e,s,r)}}function rd(t,e,n){return e.every((r,i)=>Qb[n](t[i].parameters,r.parameters))}var Wn=class{constructor(e=new Ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=$s(this.queryParams),this._queryParamMap}toString(){return w1.serialize(this)}},Ee=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return id(this)}},Ii=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=$s(this.parameters),this._parameterMap}toString(){return eT(this)}};function _1(t,e){return wi(t,e)&&t.every((n,r)=>Dn(n.parameters,e[r].parameters))}function wi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function I1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var Wm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>new Va,providedIn:"root"});let t=e;return t})(),Va=class{parse(e){let n=new Dm(e);return new Wn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${xa(e.root,!0)}`,r=C1(e.queryParams),i=typeof e.fragment=="string"?`#${E1(e.fragment)}`:"";return`${n}${r}${i}`}},w1=new Va;function id(t){return t.segments.map(e=>eT(e)).join("/")}function xa(t,e){if(!t.hasChildren())return id(t);if(e){let n=t.children[te]?xa(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${xa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=I1(t,(r,i)=>i===te?[xa(t.children[te],!1)]:[`${i}:${xa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${id(t)}/${n[0]}`:`${id(t)}/(${n.join("//")})`}}function Xb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function td(t){return Xb(t).replace(/%3B/gi,";")}function E1(t){return encodeURI(t)}function Em(t){return Xb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sd(t){return decodeURIComponent(t)}function Bb(t){return sd(t.replace(/\+/g,"%20"))}function eT(t){return`${Em(t.path)}${D1(t.parameters)}`}function D1(t){return Object.entries(t).map(([e,n])=>`;${Em(e)}=${Em(n)}`).join("")}function C1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${td(n)}=${td(i)}`).join("&"):`${td(n)}=${td(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var b1=/^[^\/()?;#]+/;function mm(t){let e=t.match(b1);return e?e[0]:""}var T1=/^[^\/()?;=#]+/;function S1(t){let e=t.match(T1);return e?e[0]:""}var A1=/^[^=?&#]+/;function M1(t){let e=t.match(A1);return e?e[0]:""}var R1=/^[^&#]+/;function N1(t){let e=t.match(R1);return e?e[0]:""}var Dm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new Ee(e,n)),r}parseSegment(){let e=mm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Ii(sd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=S1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=mm(this.remaining);i&&(r=i,this.capture(r))}e[sd(n)]=sd(r)}parseQueryParam(e){let n=M1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=N1(this.remaining);o&&(r=o,this.capture(r))}let i=Bb(n),s=Bb(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[te]:new Ee([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function tT(t){return t.segments.length>0?new Ee([],{[te]:t}):t}function nT(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=nT(i);if(r===te&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ee(t.segments,e);return x1(n)}function x1(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new Ee(t.segments.concat(e.segments),e.children)}return t}function Ua(t){return t instanceof Wn}function P1(t,e,n=null,r=null){let i=rT(t);return iT(i,e,n,r)}function rT(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new Ee(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=tT(r);return e??i}function iT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ym(i,i,i,n,r);let s=O1(e);if(s.toRoot())return ym(i,i,new Ee([],{}),n,r);let o=k1(s,i,t),a=o.processChildren?ka(o.segmentGroup,o.index,s.commands):oT(o.segmentGroup,o.index,s.commands);return ym(i,o.segmentGroup,a,n,r)}function od(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ja(t){return typeof t=="object"&&t!=null&&t.outlets}function ym(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=sT(t,e,n);let a=tT(nT(o));return new Wn(a,s,i)}function sT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=sT(s,e,n)}),new Ee(t.segments,r)}var ad=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&od(r[0]))throw new q(4003,!1);let i=r.find(ja);if(i&&i!==Kb(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function O1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ad(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ad(n,e,r)}var Us=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function k1(t,e,n){if(t.isAbsolute)return new Us(e,!0,0);if(!n)return new Us(e,!1,NaN);if(n.parent===null)return new Us(n,!0,0);let r=od(t.commands[0])?0:1,i=n.segments.length-1+r;return F1(n,i,t.numberOfDoubleDots)}function F1(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new Us(r,!1,i-s)}function L1(t){return ja(t[0])?t[0].outlets:{[te]:t}}function oT(t,e,n){if(t??=new Ee([],{}),t.segments.length===0&&t.hasChildren())return ka(t,e,n);let r=V1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ee(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new Ee(t.segments.slice(r.pathIndex),t.children),ka(s,0,i)}else return r.match&&i.length===0?new Ee(t.segments,{}):r.match&&!t.hasChildren()?Cm(t,e,n):r.match?ka(t,0,i):Cm(t,e,n)}function ka(t,e,n){if(n.length===0)return new Ee(t.segments,{});{let r=L1(n),i={};if(Object.keys(r).some(s=>s!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let s=ka(t.children[te],e,n);return new Ee(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=oT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ee(t.segments,i)}}function V1(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ja(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Hb(u,l,o))return s;r+=2}else{if(!Hb(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ja(s)){let u=U1(s.outlets);return new Ee(r,u)}if(i===0&&od(n[0])){let u=t.segments[e];r.push(new Ii(u.path,$b(n[0]))),i++;continue}let o=ja(s)?s.outlets[te]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&od(a)?(r.push(new Ii(o,$b(a))),i+=2):(r.push(new Ii(o,{})),i++)}return new Ee(r,{})}function U1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cm(new Ee([],{}),0,r))}),e}function $b(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Hb(t,e,n){return t==n.path&&Dn(e,n.parameters)}var Fa="imperative",it=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(it||{}),qt=class{constructor(e,n){this.id=e,this.url=n}},Ba=class extends qt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=it.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ei=class extends qt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=it.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Pt||{}),bm=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(bm||{}),Gn=class extends qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=it.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Di=class extends qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=it.NavigationSkipped}},$a=class extends qt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=it.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},cd=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class extends qt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=it.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Am=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mm=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rm=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Nm=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xm=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Om=class{constructor(e){this.snapshot=e,this.type=it.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},km=class{constructor(e){this.snapshot=e,this.type=it.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ha=class{},Hs=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function j1(t,e){return t.providers&&!t._injector&&(t._injector=Wg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function un(t){return t.outlet||te}function B1(t,e){let n=t.filter(r=>un(r)===e);return n.push(...t.filter(r=>un(r)!==e)),n}function Qa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Fm=class{get injector(){return Qa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new gd(this.rootInjector),this.attachRef=null}},gd=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Fm(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(ae($t))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ud=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Lm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Lm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Vm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vm(e,this._root).map(n=>n.value)}};function Lm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Lm(t,n);if(r)return r}return null}function Vm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Vm(t,n);if(r.length)return r.unshift(e),r}return[]}var xt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Vs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ld=class extends ud{constructor(e,n){super(e),this.snapshot=n,Km(this,e)}toString(){return this.snapshot.toString()}};function aT(t){let e=$1(t),n=new nt([new Ii("",{})]),r=new nt({}),i=new nt({}),s=new nt({}),o=new nt(""),a=new zs(n,r,s,o,i,te,t,e.root);return a.snapshot=e.root,new ld(new xt(a,[]),e)}function $1(t){let e={},n={},r={},i="",s=new js([],e,r,i,n,te,t,null,{});return new hd("",new xt(s,[]))}var zs=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[Ka]))??ee(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>$s(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>$s(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&uT(i)&&(r.resolve[Ka]=i.title),r}var js=class{get title(){return this.data?.[Ka]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$s(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$s(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},hd=class extends ud{constructor(e,n){super(n),this.url=e,Km(this,n)}toString(){return cT(this._root)}};function Km(t,e){e.value._routerState=t,e.children.forEach(n=>Km(t,n))}function cT(t){let e=t.children.length>0?` { ${t.children.map(cT).join(", ")} } `:"";return`${t.value}${e}`}function vm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dn(e.params,n.params)||t.paramsSubject.next(n.params),g1(e.url,n.url)||t.urlSubject.next(n.url),Dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Um(t,e){let n=Dn(t.params,e.params)&&_1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Um(t.parent,e.parent))}function uT(t){return typeof t.title=="string"||t.title===null}var H1=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new xe,this.deactivateEvents=new xe,this.attachEvents=new xe,this.detachEvents=new xe,this.parentContexts=L(gd),this.location=L(Ps),this.changeDetector=L(Cr),this.inputBinder=L(Qm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new jm(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$n]});let t=e;return t})(),jm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===zs?this.route:e===gd?this.childContexts:this.parent.get(e,n)}},Qm=new G("");function z1(t,e,n){let r=za(t,e._root,n?n._root:void 0);return new ld(r,e)}function za(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=q1(t,e,n);return new xt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>za(t,a)),o}}let r=G1(e.value),i=e.children.map(s=>za(t,s));return new xt(r,i)}}function q1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return za(t,r,i);return za(t,r)})}function G1(t){return new zs(new nt(t.url),new nt(t.params),new nt(t.queryParams),new nt(t.fragment),new nt(t.data),t.outlet,t.component,t)}var qa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},lT="ngNavigationCancelingError";function fd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ua(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dT(!1,Pt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function dT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[lT]=!0,n.cancellationCode=e,n}function W1(t){return hT(t)&&Ua(t.url)}function hT(t){return!!t&&t[lT]}var K1=(t,e,n,r)=>ne(i=>(new Bm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Bm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),vm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Vs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Vs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Vs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Vs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new km(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Pm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(vm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vm(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},pd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Bs=class{constructor(e,n){this.component=e,this.route=n}};function Q1(t,e,n){let r=t._root,i=e?e._root:null;return Pa(r,i,n,[r.value])}function Y1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Gs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!XE(t)?t:e.get(t):r}function Pa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Vs(e);return t.children.forEach(o=>{Z1(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>La(a,n.getContext(o),i)),i}function Z1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=J1(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new pd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Pa(t,e,a?a.children:null,r,i):Pa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Bs(a.outlet.component,o))}else o&&La(e,a,i),i.canActivateChecks.push(new pd(r)),s.component?Pa(t,null,a?a.children:null,r,i):Pa(t,null,n,r,i);return i}function J1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!wi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wi(t.url,e.url)||!Dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Um(t,e)||!Dn(t.queryParams,e.queryParams);case"paramsChange":default:return!Um(t,e)}}function La(t,e,n){let r=Vs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?La(o,e.children.getContext(s),n):La(o,null,n):La(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Bs(e.outlet.component,i)):n.canDeactivateChecks.push(new Bs(null,i)):n.canDeactivateChecks.push(new Bs(null,i))}function Ya(t){return typeof t=="function"}function X1(t){return typeof t=="boolean"}function eF(t){return t&&Ya(t.canLoad)}function tF(t){return t&&Ya(t.canActivate)}function nF(t){return t&&Ya(t.canActivateChild)}function rF(t){return t&&Ya(t.canDeactivate)}function iF(t){return t&&Ya(t.canMatch)}function fT(t){return t instanceof On||t?.name==="EmptyError"}var nd=Symbol("INITIAL_VALUE");function qs(){return en(t=>Hu(t.map(e=>e.pipe(kn(1),Wu(nd)))).pipe(ne(e=>{for(let n of e)if(n!==!0){if(n===nd)return nd;if(n===!1||sF(n))return n}return!0}),Vt(e=>e!==nd),kn(1)))}function sF(t){return Ua(t)||t instanceof qa}function oF(t,e){return We(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?ee(oe(k({},n),{guardsResult:!0})):aF(o,r,i,t).pipe(We(a=>a&&X1(a)?cF(r,s,t,e):ee(a)),ne(a=>oe(k({},n),{guardsResult:a})))})}function aF(t,e,n,r){return Ue(t).pipe(We(i=>fF(i.component,i.route,n,e,r)),fn(i=>i!==!0,!0))}function cF(t,e,n,r){return Ue(e).pipe(ds(i=>ls(lF(i.route.parent,r),uF(i.route,r),hF(t,i.path,n),dF(t,i.route,n))),fn(i=>i!==!0,!0))}function uF(t,e){return t!==null&&e&&e(new Om(t)),ee(!0)}function lF(t,e){return t!==null&&e&&e(new xm(t)),ee(!0)}function dF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(s=>zu(()=>{let o=Qa(e)??n,a=Gs(s,o),u=tF(a)?a.canActivate(e,t):Un(o,()=>a(e,t));return br(u).pipe(fn())}));return ee(i).pipe(qs())}function hF(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Y1(o)).filter(o=>o!==null).map(o=>zu(()=>{let a=o.guards.map(u=>{let l=Qa(o.node)??n,h=Gs(u,l),p=nF(h)?h.canActivateChild(r,t):Un(l,()=>h(r,t));return br(p).pipe(fn())});return ee(a).pipe(qs())}));return ee(s).pipe(qs())}function fF(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ee(!0);let o=s.map(a=>{let u=Qa(e)??i,l=Gs(a,u),h=rF(l)?l.canDeactivate(t,e,n,r):Un(u,()=>l(t,e,n,r));return br(h).pipe(fn())});return ee(o).pipe(qs())}function pF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let s=i.map(o=>{let a=Gs(o,t),u=eF(a)?a.canLoad(e,n):Un(t,()=>a(e,n));return br(u)});return ee(s).pipe(qs(),pT(r))}function pT(t){return Cu(Ke(e=>{if(typeof e!="boolean")throw fd(t,e)}),ne(e=>e===!0))}function gF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let s=i.map(o=>{let a=Gs(o,t),u=iF(a)?a.canMatch(e,n):Un(t,()=>a(e,n));return br(u)});return ee(s).pipe(qs(),pT(r))}var Ga=class{constructor(e){this.segmentGroup=e||null}},Wa=class extends Error{constructor(e){super(),this.urlTree=e}};function Ls(t){return us(new Ga(t))}function mF(t){return us(new q(4e3,!1))}function yF(t){return us(dT(!1,Pt.GuardRejected))}var $m=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[te])return mF(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:N}=i,R=Un(s,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Wn)throw new Wa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Wa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Wn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Hm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vF(t,e,n,r,i){let s=gT(t,e,n);return s.matched?(r=j1(e,r),gF(r,e,n,i).pipe(ne(o=>o===!0?s:k({},Hm)))):ee(s)}function gT(t,e,n){if(e.path==="**")return _F(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},Hm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||p1)(n,t,e);if(!i)return k({},Hm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?k(k({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _F(t){return{matched:!0,parameters:t.length>0?Kb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function zb(t,e,n,r){return n.length>0&&EF(t,n,r)?{segmentGroup:new Ee(e,wF(r,new Ee(n,t.children))),slicedSegments:[]}:n.length===0&&DF(t,n,r)?{segmentGroup:new Ee(t.segments,IF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ee(t.segments,t.children),slicedSegments:n}}function IF(t,e,n,r){let i={};for(let s of n)if(md(t,e,s)&&!r[un(s)]){let o=new Ee([],{});i[un(s)]=o}return k(k({},r),i)}function wF(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&un(r)!==te){let i=new Ee([],{});n[un(r)]=i}return n}function EF(t,e,n){return n.some(r=>md(t,e,r)&&un(r)!==te)}function DF(t,e,n){return n.some(r=>md(t,e,r))}function md(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CF(t,e,n){return e.length===0&&!t.children[n]}var zm=class{};function bF(t,e,n,r,i,s,o="emptyOnly"){return new qm(t,e,n,r,i,o,s).recognize()}var TF=31,qm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new $m(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=zb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:n,rootSnapshot:r})=>{let i=new xt(r,n),s=new hd("",i),o=P1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new js([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ne(r=>({children:r,rootSnapshot:n})),ur(r=>{if(r instanceof Wa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ga?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ne(o=>o instanceof xt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ue(s).pipe(ds(o=>{let a=r.children[o],u=B1(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Gu((o,a)=>(o.push(...a),o)),lr(null),pp(),We(o=>{if(o===null)return Ls(r);let a=mT(o);return SF(a),ee(a)}))}processSegment(e,n,r,i,s,o,a){return Ue(n).pipe(ds(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(ur(l=>{if(l instanceof Ga)return ee(null);throw l}))),fn(u=>!!u),ur(u=>{if(fT(u))return CF(r,i,s)?ee(new zm):Ls(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return un(r)!==o&&(o===te||!md(i,s,r))?Ls(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Ls(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=gT(n,i,s);if(!u)return Ls(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TF&&(this.allowRedirects=!1));let y=new js(s,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,qb(i),un(i),i.component??i._loadedComponent??null,i,Gb(i)),b=dd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(We(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=vF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(en(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(en(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new js(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,qb(r),un(r),r.component??r._loadedComponent??null,r,Gb(r)),N=dd(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:F}=zb(n,m,y,l);if(F.length===0&&R.hasChildren())return this.processChildren(h,l,R,b).pipe(ne(V=>new xt(b,V)));if(l.length===0&&F.length===0)return ee(new xt(b,[]));let j=un(r)===s;return this.processSegment(h,l,R,F,j?te:s,!0,b).pipe(ne(V=>new xt(b,V instanceof xt?[V]:[])))}))):Ls(n)))}getChildConfig(e,n,r){return n.children?ee({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):pF(e,n,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,n).pipe(Ke(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):yF(n))):ee({routes:[],injector:e})}};function SF(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function AF(t){let e=t.value.routeConfig;return e&&e.path===""}function mT(t){let e=[],n=new Set;for(let r of t){if(!AF(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=mT(r.children);e.push(new xt(r.value,i))}return e.filter(r=>!n.has(r))}function qb(t){return t.data||{}}function Gb(t){return t.resolve||{}}function MF(t,e,n,r,i,s){return We(o=>bF(t,e,n,r,o.extractedUrl,i,s).pipe(ne(({state:a,tree:u})=>oe(k({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function RF(t,e){return We(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ee(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of yT(u))o.add(l);let a=0;return Ue(o).pipe(ds(u=>s.has(u)?NF(u,r,t,e):(u.data=dd(u,u.parent,t).resolve,ee(void 0))),Ke(()=>a++),hs(1),We(u=>a===o.size?ee(n):Mt))})}function yT(t){let e=t.children.map(n=>yT(n)).flat();return[t,...e]}function NF(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!uT(i)&&(s[Ka]=i.title),xF(s,t,e,r).pipe(ne(o=>(t._resolvedData=o,t.data=dd(t,t.parent,n).resolve,null)))}function xF(t,e,n,r){let i=wm(t);if(i.length===0)return ee({});let s={};return Ue(i).pipe(We(o=>PF(t[o],e,n,r).pipe(fn(),Ke(a=>{if(a instanceof qa)throw fd(new Va,a);s[o]=a}))),hs(1),fp(s),ur(o=>fT(o)?Mt:us(o)))}function PF(t,e,n,r){let i=Qa(e)??r,s=Gs(t,i),o=s.resolve?s.resolve(e,n):Un(i,()=>s(e,n));return br(o)}function _m(t){return en(e=>{let n=t(e);return n?Ue(n).pipe(ne(()=>e)):ee(e)})}var vT=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===te);return i}getResolvedTitleForRoute(r){return r.data[Ka]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>L(OF),providedIn:"root"});let t=e;return t})(),OF=(()=>{let e=class e extends vT{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(ae(Ub))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ym=new G("",{providedIn:"root",factory:()=>({})}),kF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ms({type:e,selectors:[["ng-component"]],standalone:!0,features:[Fs],decls:1,vars:0,template:function(i,s){i&1&&ks(0,"router-outlet")},dependencies:[H1],encapsulation:2});let t=e;return t})();function Zm(t){let e=t.children&&t.children.map(Zm),n=e?oe(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=kF),n}var Jm=new G(""),FF=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(Xg)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=br(r.loadComponent()).pipe(ne(_T),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),ca(()=>{this.componentLoaders.delete(r)})),s=new ss(i,()=>new tt).pipe(is());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ee({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=LF(i,this.compiler,r,this.onLoadEndListener).pipe(ca(()=>{this.childrenLoaders.delete(i)})),a=new ss(o,()=>new tt).pipe(is());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LF(t,e,n,r){return br(t.loadChildren()).pipe(ne(_T),We(i=>i instanceof ya||Array.isArray(i)?ee(i):Ue(e.compileModuleAsync(i))),ne(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Jm,[],{optional:!0,self:!0}).flat()),{routes:o.map(Zm),injector:s}}))}function VF(t){return t&&typeof t=="object"&&"default"in t}function _T(t){return VF(t)?t.default:t}var Xm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>L(UF),providedIn:"root"});let t=e;return t})(),UF=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jF=new G("");var BF=new G(""),$F=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new tt,this.transitionAbortSubject=new tt,this.configLoader=L(FF),this.environmentInjector=L($t),this.urlSerializer=L(Wm),this.rootContexts=L(gd),this.location=L(Sa),this.inputBindingEnabled=L(Qm,{optional:!0})!==null,this.titleStrategy=L(vT),this.options=L(Ym,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Xm),this.createViewTransition=L(jF,{optional:!0}),this.navigationErrorHandler=L(BF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Rm(s)),i=s=>this.events.next(new Nm(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(oe(k(k({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new nt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fa,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vt(o=>o.id!==0),ne(o=>oe(k({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),en(o=>{let a=!1,u=!1;return ee(o).pipe(en(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Pt.SupersededByNewNavigation),Mt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?oe(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Di(l.id,this.urlSerializer.serialize(l.rawUrl),m,bm.IgnoredSameUrlNavigation)),l.resolve(!1),Mt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ee(l).pipe(en(m=>{let y=this.transitions?.getValue();return this.events.next(new Ba(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Mt:Promise.resolve(m)}),MF(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=oe(k({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new cd(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:b,restoredState:N,extras:R}=l,F=new Ba(m,this.urlSerializer.serialize(y),b,N);this.events.next(F);let j=aT(this.rootComponentType).snapshot;return this.currentTransition=o=oe(k({},l),{targetSnapshot:j,urlAfterRedirects:y,extras:oe(k({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,ee(o)}else{let m="";return this.events.next(new Di(l.id,this.urlSerializer.serialize(l.extractedUrl),m,bm.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Mt}}),Ke(l=>{let h=new Tm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ne(l=>(this.currentTransition=o=oe(k({},l),{guards:Q1(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),oF(this.environmentInjector,l=>this.events.next(l)),Ke(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw fd(this.urlSerializer,l.guardsResult);let h=new Sm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Vt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Pt.GuardRejected),!1)),_m(l=>{if(l.guards.canActivateChecks.length)return ee(l).pipe(Ke(h=>{let p=new Am(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),en(h=>{let p=!1;return ee(h).pipe(RF(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Pt.NoDataFromResolver)}}))}),Ke(h=>{let p=new Mm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),_m(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ke(y=>{p.component=y}),ne(()=>{})));for(let y of p.children)m.push(...h(y));return m};return Hu(h(l.targetSnapshot.root)).pipe(lr(null),kn(1))}),_m(()=>this.afterPreactivation()),en(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ue(p).pipe(ne(()=>o)):ee(o)}),ne(l=>{let h=z1(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=oe(k({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Ke(()=>{this.events.next(new Ha)}),K1(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),kn(1),Ke({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ei(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),gp(this.transitionAbortSubject.pipe(Ke(l=>{throw l}))),ca(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Pt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ur(l=>{if(u=!0,hT(l))this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),W1(l)?this.events.next(new Hs(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let h=new $a(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=Un(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof qa){let{message:m,cancellationCode:y}=fd(this.urlSerializer,p);this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new Hs(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let m=r.errorHandler(l);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Mt}))}))}cancelNavigationTransition(r,i,s){let o=new Gn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HF(t){return t!==Fa}var zF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>L(qF),providedIn:"root"});let t=e;return t})(),Gm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},qF=(()=>{let e=class e extends Gm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>L(GF),providedIn:"root"});let t=e;return t})(),GF=(()=>{let e=class e extends IT{constructor(){super(...arguments),this.location=L(Sa),this.urlSerializer=L(Wm),this.options=L(Ym,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Xm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=aT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ba)this.stateMemento=this.createStateMemento();else if(r instanceof Di)this.rawUrlTree=i.initialUrl;else if(r instanceof cd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Ha?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Gn&&(r.code===Pt.GuardRejected||r.code===Pt.NoDataFromResolver)?this.restoreHistory(i):r instanceof $a?this.restoreHistory(i,!0):r instanceof Ei&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Wn?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=k(k({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=k(k({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Oa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Oa||{});function WF(t,e){t.events.pipe(Vt(n=>n instanceof Ei||n instanceof Gn||n instanceof $a||n instanceof Di),ne(n=>n instanceof Ei||n instanceof Di?Oa.COMPLETE:(n instanceof Gn?n.code===Pt.Redirect||n.code===Pt.SupersededByNewNavigation:!1)?Oa.REDIRECTING:Oa.FAILED),Vt(n=>n!==Oa.REDIRECTING),kn(1)).subscribe(()=>{e()})}function KF(t){throw t}var QF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wT=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(Ql),this.stateManager=L(IT),this.options=L(Ym,{optional:!0})||{},this.pendingTasks=L(xs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L($F),this.urlSerializer=L(Wm),this.location=L(Sa),this.urlHandlingStrategy=L(Xm),this._events=new tt,this.errorHandler=this.options.errorHandler||KF,this.navigated=!1,this.routeReuseStrategy=L(zF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Jm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(Qm,{optional:!0}),this.eventsSubscription=new Ve,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Gn&&i.code!==Pt.Redirect&&i.code!==Pt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ei)this.navigated=!0;else if(i instanceof Hs){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=k({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||HF(s.source)},a);this.scheduleNavigation(u,Fa,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}JF(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=k({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Zm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let y=s?s.snapshot:this.routerState.snapshot.root;m=rT(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),m=this.currentUrlTree.root}return iT(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ua(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Fa,null,i)}navigate(r,i={skipLocationChange:!1}){return ZF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=k({},QF):i===!1?s=k({},YF):s=i,Ua(r))return jb(this.currentUrlTree,r,s);let o=this.parseUrl(r);return jb(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,y)=>{u=m,l=y});let p=this.pendingTasks.add();return WF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new q(4008,!1)}function JF(t){return!(t instanceof Ha)&&!(t instanceof Hs)}var XF=new G("");function ET(t,...e){return yr([{provide:Jm,multi:!0,useValue:t},[],{provide:zs,useFactory:eL,deps:[wT]},{provide:Jg,multi:!0,useFactory:tL},e.map(n=>n.\u0275providers)])}function eL(t){return t.routerState.root}function tL(){let t=L(Ht);return e=>{let n=t.get(yi);if(e!==n.components[0])return;let r=t.get(wT),i=t.get(nL);t.get(rL)===1&&r.initialNavigation(),t.get(iL,null,ie.Optional)?.setUpPreloading(),t.get(XF,null,ie.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nL=new G("",{factory:()=>new tt}),rL=new G("",{providedIn:"root",factory:()=>1});var iL=new G("");var DT=[];var bT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},TT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new ty;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ty=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},oL=function(t){let e=bT(t);return TT.encodeByteArray(e,!0)},Za=function(t){return oL(t).replace(/\./g,"")},ry=function(t){try{return TT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var cL=()=>aL().__FIREBASE_DEFAULTS__,uL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ry(t[1]);return e&&JSON.parse(e)},vd=()=>{try{return cL()||uL()||lL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ST=t=>{var e,n;return(n=(e=vd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AT=t=>{let e=ST(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iy=()=>{var t;return(t=vd())===null||t===void 0?void 0:t.config},MT=t=>{var e;return(e=vd())===null||e===void 0?void 0:e[`_${t}`]};var yd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function RT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Za(JSON.stringify(n)),Za(JSON.stringify(o)),""].join(".")}function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function dL(){var t;let e=(t=vd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sy(){return!dL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _d(){try{return typeof indexedDB=="object"}catch{return!1}}function OT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var hL="FirebaseError",Gt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kn.prototype.create)}},Kn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?fL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gt(i,a,r)}};function fL(t,e){return t.replace(pL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var pL=/\{\$([^}]+)}/g;function Ws(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(CT(s)&&CT(o)){if(!Ws(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function CT(t){return t!==null&&typeof t=="object"}function oy(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kT(t,e){let n=new ny(t,e);return n.subscribe.bind(n)}var ny=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ey),i.error===void 0&&(i.error=ey),i.complete===void 0&&(i.complete=ey);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function gL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ey(){}var K9=4*60*60*1e3;function vt(t){return t&&t._delegate?t._delegate:t}var Wt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ci="[DEFAULT]";var ay=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new yd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yL(e))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ci){return this.instances.has(e)}getOptions(e=Ci){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ci){return this.component?this.component.multipleInstances?e:Ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mL(t){return t===Ci?void 0:t}function yL(t){return t.instantiationMode==="EAGER"}var Id=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ay(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var vL=[],de=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(de||{}),_L={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},IL=de.INFO,wL={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},EL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=wL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tr=class{constructor(e){this.name=e,this._logLevel=IL,this._logHandler=EL,this._userLogHandler=null,vL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var DL=(t,e)=>e.some(n=>t instanceof n),FT,LT;function CL(){return FT||(FT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bL(){return LT||(LT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VT=new WeakMap,uy=new WeakMap,UT=new WeakMap,cy=new WeakMap,dy=new WeakMap;function TL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Cn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&VT.set(n,t)}).catch(()=>{}),dy.set(e,t),e}function SL(t){if(uy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});uy.set(t,e)}var ly={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jT(t){ly=t(ly)}function AL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(wd(this),e,...n);return UT.set(r,e.sort?e.sort():[e]),Cn(r)}:bL().includes(t)?function(...e){return t.apply(wd(this),e),Cn(VT.get(this))}:function(...e){return Cn(t.apply(wd(this),e))}}function ML(t){return typeof t=="function"?AL(t):(t instanceof IDBTransaction&&SL(t),DL(t,CL())?new Proxy(t,ly):t)}function Cn(t){if(t instanceof IDBRequest)return TL(t);if(cy.has(t))return cy.get(t);let e=ML(t);return e!==t&&(cy.set(t,e),dy.set(e,t)),e}var wd=t=>dy.get(t);function $T(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Cn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Cn(o.result),u.oldVersion,u.newVersion,Cn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var RL=["get","getKey","getAll","getAllKeys","count"],NL=["put","add","delete","clear"],hy=new Map;function BT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hy.get(e))return hy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=NL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RL.includes(n)))return;let s=function(o,...a){return S(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return hy.set(e,s),s}jT(t=>oe(k({},t),{get:(e,n,r)=>BT(e,n)||t.get(e,n,r),has:(e,n)=>!!BT(e,n)||t.has(e,n)}));var py=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function xL(t){let e=t.getComponent();return e?.type==="VERSION"}var gy="@firebase/app",HT="0.10.10";var Qn=new Tr("@firebase/app"),PL="@firebase/app-compat",OL="@firebase/analytics-compat",kL="@firebase/analytics",FL="@firebase/app-check-compat",LL="@firebase/app-check",VL="@firebase/auth",UL="@firebase/auth-compat",jL="@firebase/database",BL="@firebase/database-compat",$L="@firebase/functions",HL="@firebase/functions-compat",zL="@firebase/installations",qL="@firebase/installations-compat",GL="@firebase/messaging",WL="@firebase/messaging-compat",KL="@firebase/performance",QL="@firebase/performance-compat",YL="@firebase/remote-config",ZL="@firebase/remote-config-compat",JL="@firebase/storage",XL="@firebase/storage-compat",eV="@firebase/firestore",tV="@firebase/vertexai-preview",nV="@firebase/firestore-compat",rV="firebase",iV="10.13.1";var my="[DEFAULT]",sV={[gy]:"fire-core",[PL]:"fire-core-compat",[kL]:"fire-analytics",[OL]:"fire-analytics-compat",[LL]:"fire-app-check",[FL]:"fire-app-check-compat",[VL]:"fire-auth",[UL]:"fire-auth-compat",[jL]:"fire-rtdb",[BL]:"fire-rtdb-compat",[$L]:"fire-fn",[HL]:"fire-fn-compat",[zL]:"fire-iid",[qL]:"fire-iid-compat",[GL]:"fire-fcm",[WL]:"fire-fcm-compat",[KL]:"fire-perf",[QL]:"fire-perf-compat",[YL]:"fire-rc",[ZL]:"fire-rc-compat",[JL]:"fire-gcs",[XL]:"fire-gcs-compat",[eV]:"fire-fst",[nV]:"fire-fst-compat",[tV]:"fire-vertex","fire-js":"fire-js",[rV]:"fire-js-all"};var Ja=new Map,oV=new Map,yy=new Map;function zT(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ar(t){let e=t.name;if(yy.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;yy.set(e,t);for(let n of Ja.values())zT(n,t);for(let n of oV.values())zT(n,t);return!0}function wy(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ks(t){return t.settings!==void 0}var aV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Kn("app","Firebase",aV);var vy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}};var Qs=iV;function Ey(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:my,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Sr.create("bad-app-name",{appName:String(i)});if(n||(n=iy()),!n)throw Sr.create("no-options");let s=Ja.get(i);if(s){if(Ws(n,s.options)&&Ws(r,s.config))return s;throw Sr.create("duplicate-app",{appName:i})}let o=new Id(i);for(let u of yy.values())o.addComponent(u);let a=new vy(n,r,o);return Ja.set(i,a),a}function ec(t=my){let e=Ja.get(t);if(!e&&t===my&&iy())return Ey();if(!e)throw Sr.create("no-app",{appName:t});return e}function Ed(){return Array.from(Ja.values())}function Xe(t,e,n){var r;let i=(r=sV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}Ar(new Wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var cV="firebase-heartbeat-database",uV=1,Xa="firebase-heartbeat-store",fy=null;function KT(){return fy||(fy=$T(cV,uV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),fy}function lV(t){return S(this,null,function*(){try{let n=(yield KT()).transaction(Xa),r=yield n.objectStore(Xa).get(QT(t));return yield n.done,r}catch(e){if(e instanceof Gt)Qn.warn(e.message);else{let n=Sr.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(n.message)}}})}function qT(t,e){return S(this,null,function*(){try{let r=(yield KT()).transaction(Xa,"readwrite");yield r.objectStore(Xa).put(e,QT(t)),yield r.done}catch(n){if(n instanceof Gt)Qn.warn(n.message);else{let r=Sr.create("idb-set",{originalErrorMessage:n?.message});Qn.warn(r.message)}}})}function QT(t){return`${t.name}!${t.options.appId}`}var dV=1024,hV=30*24*60*60*1e3,_y=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Iy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=GT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=hV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=GT(),{heartbeatsToSend:r,unsentEntries:i}=fV(this._heartbeatsCache.heartbeats),s=Za(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Qn.warn(n),""}})}};function GT(){return new Date().toISOString().substring(0,10)}function fV(t,e=dV){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),WT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Iy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return _d()?OT().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield lV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function WT(t){return Za(JSON.stringify({version:2,heartbeats:t})).length}function pV(t){Ar(new Wt("platform-logger",e=>new py(e),"PRIVATE")),Ar(new Wt("heartbeat",e=>new _y(e),"PRIVATE")),Xe(gy,HT,t),Xe(gy,HT,"esm2017"),Xe("fire-js","")}pV("");var gV="firebase",mV="10.13.1";Xe(gV,mV,"app");var Zs=new Vn("ANGULARFIRE2_VERSION");function Cy(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var nc=(t,e)=>{let n=e?[e]:Ed(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},tc=class{constructor(){return nc(yV)}},yV="app-check";function Ys(){}var Dd=class{zone;delegate;constructor(e,n=cp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Dy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ys,{},Ys,Ys)),n.pipe(Ke({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},rc=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Dd(Zone.current)),this.insideAngular=n.run(()=>new Dd(Zone.current,ap)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ae(Me))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function vV(t){return Cd().ngZone.runOutsideAngular(()=>t())}function bi(t){return Cd().ngZone.run(()=>t())}function _V(t){return IV(Cd())(t)}function IV(t){return function(n){return n=n.lift(new Dy(t.ngZone)),n.pipe(cr(t.outsideAngular),ar(t.insideAngular))}}var wV=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),bi(()=>t.apply(void 0,r))},Kt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=bi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ys,{},Ys,Ys))),r[s]=wV(r[s],n));let i=vV(()=>t.apply(this,r));if(!e)if(i instanceof he){let s=Cd();return i.pipe(cr(s.outsideAngular),ar(s.insideAngular))}else return bi(()=>i);return i instanceof he?i.pipe(_V):i instanceof Promise?bi(()=>new Promise((s,o)=>i.then(a=>bi(()=>s(a)),a=>bi(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:bi(()=>i)};var Ti=class{constructor(e){return e}},ic=class{constructor(){return Ed()}};function EV(t){return t&&t.length===1?t[0]:new Ti(ec())}var by=new G("angularfire2._apps"),DV={provide:Ti,useFactory:EV,deps:[[new on,by]]},CV={provide:ic,deps:[[new on,by]]};function bV(t){return(e,n)=>{let r=n.get(_r);Xe("angularfire",Zs.full,"core"),Xe("angularfire",Zs.full,"app"),Xe("angular",sb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ti(i)}}function bd(t,...e){return yr([DV,CV,{provide:by,useFactory:bV(t),multi:!0,deps:[Me,Ht,rc,...e]}])}var Td=Kt(Ey,!0);function r0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var i0=r0,s0=new Kn("auth","Firebase",r0());var Rd=new Tr("@firebase/auth");function TV(t,...e){Rd.logLevel<=de.WARN&&Rd.warn(`Auth (${Qs}): ${t}`,...e)}function Ad(t,...e){Rd.logLevel<=de.ERROR&&Rd.error(`Auth (${Qs}): ${t}`,...e)}function YT(t,...e){throw Ly(t,...e)}function Fy(t,...e){return Ly(t,...e)}function o0(t,e,n){let r=Object.assign(Object.assign({},i0()),{[e]:n});return new Kn("auth","Firebase",r).create(e,{appName:t.name})}function Md(t){return o0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ly(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return s0.create(t,...e)}function we(t,e,...n){if(!t)throw Ly(e,...n)}function sc(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ad(e),new Error(e)}function Nd(t,e){t||sc(e)}function SV(){return ZT()==="http:"||ZT()==="https:"}function ZT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function AV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SV()||xT()||"connection"in navigator)?navigator.onLine:!0}function MV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ai=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nd(n>e,"Short delay should be less than long delay!"),this.isMobile=NT()||PT()}get(){return AV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function RV(t,e){Nd(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var NV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var xV=new Ai(3e4,6e4);function a0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Fd(s,o,a,u){return S(this,arguments,function*(t,e,n,r,i={}){return c0(t,i,()=>S(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=oy(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),xd.fetch()(u0(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function c0(t,e,n){return S(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},NV),e);try{let i=new Ay(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Sd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sd(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw o0(t,h,l);YT(t,h)}}catch(i){if(i instanceof Gt)throw i;YT(t,"network-request-failed",{message:String(i)})}})}function u0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?RV(t.config,i):`${t.config.apiScheme}://${i}`}var Ay=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fy(this.auth,"network-request-failed")),xV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Sd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Fy(t,e,r);return i.customData._tokenResponse=n,i}function PV(t,e){return S(this,null,function*(){return Fd(t,"POST","/v1/accounts:delete",e)})}function l0(t,e){return S(this,null,function*(){return Fd(t,"POST","/v1/accounts:lookup",e)})}function oc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Vy(t,e=!1){return S(this,null,function*(){let n=vt(t),r=yield n.getIdToken(e),i=d0(r);we(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:oc(Ty(i.auth_time)),issuedAtTime:oc(Ty(i.iat)),expirationTime:oc(Ty(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ty(t){return Number(t)*1e3}function d0(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ad("JWT malformed, contained fewer than 3 sections"),null;try{let i=ry(n);return i?JSON.parse(i):(Ad("Failed to decode base64 JWT payload"),null)}catch(i){return Ad("Caught error parsing JWT payload as JSON",i?.toString()),null}}function JT(t){let e=d0(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function My(t,e,n=!1){return S(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Gt&&OV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function OV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ry=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),n)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var cc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Pd(t){return S(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield My(t,l0(n,{idToken:r}));we(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?h0(s.providerUserInfo):[],a=kV(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Uy(t){return S(this,null,function*(){let e=vt(t);yield Pd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function kV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function h0(t){return t.map(e=>{var{providerId:n}=e,r=up(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FV(t,e){return S(this,null,function*(){let n=yield c0(t,{},()=>S(this,null,function*(){let r=oy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=u0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function LV(t,e){return S(this,null,function*(){return Fd(t,"POST","/v2/accounts:revokeToken",a0(t,e))})}var ac=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");let n=JT(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return S(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield FV(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(we(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(we(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(we(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return sc("not implemented")}};function Mr(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var uc=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ry(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let n=yield My(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Vy(this,e)}reload(){return Uy(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Pd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Ks(this.auth.app))return Promise.reject(Md(this.auth));let e=yield this.getIdToken();return yield My(this,PV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,j=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:K,isAnonymous:re,providerData:H,stsTokenManager:w}=n;we(V&&w,e,"internal-error");let v=ac.fromJSON(this.name,w);we(typeof V=="string",e,"internal-error"),Mr(p,e.name),Mr(m,e.name),we(typeof K=="boolean",e,"internal-error"),we(typeof re=="boolean",e,"internal-error"),Mr(y,e.name),Mr(b,e.name),Mr(N,e.name),Mr(R,e.name),Mr(F,e.name),Mr(j,e.name);let _=new t({uid:V,auth:e,email:m,emailVerified:K,displayName:p,isAnonymous:re,photoURL:b,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:F,lastLoginAt:j});return H&&Array.isArray(H)&&(_.providerData=H.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return S(this,null,function*(){let i=new ac;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Pd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return S(this,null,function*(){let i=n.users[0];we(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?h0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ac;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var XT=new Map;function Si(t){Nd(t instanceof Function,"Expected a class definition");let e=XT.get(t);return e?(Nd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XT.set(t,e),e)}var VV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(n,r){return S(this,null,function*(){this.storage[n]=r})}_get(n){return S(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return S(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ny=VV;function Sy(t,e,n){return`firebase:${t}:${e}:${n}`}var Od=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Sy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Sy("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?uc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return S(this,null,function*(){if(!n.length)return new t(Si(Ny),e,r);let i=(yield Promise.all(n.map(l=>S(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Si(Ny),o=Sy(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=uc._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>S(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function e0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($V(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zV(e))return"Blackberry";if(qV(e))return"Webos";if(jV(e))return"Safari";if((e.includes("chrome/")||BV(e))&&!e.includes("edge/"))return"Chrome";if(HV(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function UV(t=lt()){return/firefox\//i.test(t)}function jV(t=lt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BV(t=lt()){return/crios\//i.test(t)}function $V(t=lt()){return/iemobile/i.test(t)}function HV(t=lt()){return/android/i.test(t)}function zV(t=lt()){return/blackberry/i.test(t)}function qV(t=lt()){return/webos/i.test(t)}function f0(t,e=[]){let n;switch(t){case"Browser":n=e0(lt());break;case"Worker":n=`${e0(lt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qs}/${r}`}var xy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function GV(n){return S(this,arguments,function*(t,e={}){return Fd(t,"GET","/v2/passwordPolicy",a0(t,e))})}var WV=6,Py=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:WV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Oy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kd(this),this.idTokenSubscription=new kd(this),this.beforeStateQueue=new xy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Od.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let n=yield l0(this,{idToken:e}),r=yield uc._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var n;if(Ks(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield Pd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=MV()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(Ks(this.app))return Promise.reject(Md(this));let n=e?vt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return S(this,null,function*(){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Ks(this.app)?Promise.reject(Md(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ks(this.app)?Promise.reject(Md(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(Si(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield GV(this),n=new Py(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield LV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Si(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=yield Od.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return S(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&TV(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function KV(t){return vt(t)}var kd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=kT(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var QV={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YV(t){QV=t}function ZV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function JV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Si);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var qW=ZV("rcb"),GW=new Ai(3e4,6e4);var WW=new Ai(2e3,1e4);var KW=10*60*1e3;var QW=new Ai(3e4,6e4);var YW=new Ai(5e3,15e3);var ZW=encodeURIComponent("fac");var t0="@firebase/auth",n0="1.7.8";var ky=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function XV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eU(t){Ar(new Wt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f0(t)},l=new Oy(r,i,s,u);return JV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ar(new Wt("auth-internal",e=>{let n=KV(e.getProvider("auth").getImmediate());return(r=>new ky(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(t0,n0,XV(t)),Xe(t0,n0,"esm2017")}var tU=5*60,JW=MT("authIdTokenMaxAge")||tU;function nU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}YV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Fy("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",nU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eU("Browser");var tj="auth";var Ld=class{constructor(){return nc(tj)}};var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g0={};var Rr,jy;(function(){var t;function e(w,v){function _(){}_.prototype=v.prototype,w.D=v.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(E,D,T){for(var I=Array(arguments.length-2),Rn=2;Rn<arguments.length;Rn++)I[Rn-2]=arguments[Rn];return v.prototype[D].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,_){_||(_=0);var E=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)E[D]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=w.g[0],_=w.g[1],D=w.g[2];var T=w.g[3],I=v+(T^_&(D^T))+E[0]+3614090360&4294967295;v=_+(I<<7&4294967295|I>>>25),I=T+(D^v&(_^D))+E[1]+3905402710&4294967295,T=v+(I<<12&4294967295|I>>>20),I=D+(_^T&(v^_))+E[2]+606105819&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(v^D&(T^v))+E[3]+3250441966&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(T^_&(D^T))+E[4]+4118548399&4294967295,v=_+(I<<7&4294967295|I>>>25),I=T+(D^v&(_^D))+E[5]+1200080426&4294967295,T=v+(I<<12&4294967295|I>>>20),I=D+(_^T&(v^_))+E[6]+2821735955&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(v^D&(T^v))+E[7]+4249261313&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(T^_&(D^T))+E[8]+1770035416&4294967295,v=_+(I<<7&4294967295|I>>>25),I=T+(D^v&(_^D))+E[9]+2336552879&4294967295,T=v+(I<<12&4294967295|I>>>20),I=D+(_^T&(v^_))+E[10]+4294925233&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(v^D&(T^v))+E[11]+2304563134&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(T^_&(D^T))+E[12]+1804603682&4294967295,v=_+(I<<7&4294967295|I>>>25),I=T+(D^v&(_^D))+E[13]+4254626195&4294967295,T=v+(I<<12&4294967295|I>>>20),I=D+(_^T&(v^_))+E[14]+2792965006&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(v^D&(T^v))+E[15]+1236535329&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(D^T&(_^D))+E[1]+4129170786&4294967295,v=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(v^_))+E[6]+3225465664&4294967295,T=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(T^v))+E[11]+643717713&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^v&(D^T))+E[0]+3921069994&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(D^T&(_^D))+E[5]+3593408605&4294967295,v=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(v^_))+E[10]+38016083&4294967295,T=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(T^v))+E[15]+3634488961&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^v&(D^T))+E[4]+3889429448&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(D^T&(_^D))+E[9]+568446438&4294967295,v=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(v^_))+E[14]+3275163606&4294967295,T=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(T^v))+E[3]+4107603335&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^v&(D^T))+E[8]+1163531501&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(D^T&(_^D))+E[13]+2850285829&4294967295,v=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(v^_))+E[2]+4243563512&4294967295,T=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(T^v))+E[7]+1735328473&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^v&(D^T))+E[12]+2368359562&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(_^D^T)+E[5]+4294588738&4294967295,v=_+(I<<4&4294967295|I>>>28),I=T+(v^_^D)+E[8]+2272392833&4294967295,T=v+(I<<11&4294967295|I>>>21),I=D+(T^v^_)+E[11]+1839030562&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^v)+E[14]+4259657740&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(_^D^T)+E[1]+2763975236&4294967295,v=_+(I<<4&4294967295|I>>>28),I=T+(v^_^D)+E[4]+1272893353&4294967295,T=v+(I<<11&4294967295|I>>>21),I=D+(T^v^_)+E[7]+4139469664&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^v)+E[10]+3200236656&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(_^D^T)+E[13]+681279174&4294967295,v=_+(I<<4&4294967295|I>>>28),I=T+(v^_^D)+E[0]+3936430074&4294967295,T=v+(I<<11&4294967295|I>>>21),I=D+(T^v^_)+E[3]+3572445317&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^v)+E[6]+76029189&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(_^D^T)+E[9]+3654602809&4294967295,v=_+(I<<4&4294967295|I>>>28),I=T+(v^_^D)+E[12]+3873151461&4294967295,T=v+(I<<11&4294967295|I>>>21),I=D+(T^v^_)+E[15]+530742520&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^v)+E[2]+3299628645&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(D^(_|~T))+E[0]+4096336452&4294967295,v=_+(I<<6&4294967295|I>>>26),I=T+(_^(v|~D))+E[7]+1126891415&4294967295,T=v+(I<<10&4294967295|I>>>22),I=D+(v^(T|~_))+E[14]+2878612391&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~v))+E[5]+4237533241&4294967295,_=D+(I<<21&4294967295|I>>>11),I=v+(D^(_|~T))+E[12]+1700485571&4294967295,v=_+(I<<6&4294967295|I>>>26),I=T+(_^(v|~D))+E[3]+2399980690&4294967295,T=v+(I<<10&4294967295|I>>>22),I=D+(v^(T|~_))+E[10]+4293915773&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~v))+E[1]+2240044497&4294967295,_=D+(I<<21&4294967295|I>>>11),I=v+(D^(_|~T))+E[8]+1873313359&4294967295,v=_+(I<<6&4294967295|I>>>26),I=T+(_^(v|~D))+E[15]+4264355552&4294967295,T=v+(I<<10&4294967295|I>>>22),I=D+(v^(T|~_))+E[6]+2734768916&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~v))+E[13]+1309151649&4294967295,_=D+(I<<21&4294967295|I>>>11),I=v+(D^(_|~T))+E[4]+4149444226&4294967295,v=_+(I<<6&4294967295|I>>>26),I=T+(_^(v|~D))+E[11]+3174756917&4294967295,T=v+(I<<10&4294967295|I>>>22),I=D+(v^(T|~_))+E[2]+718787259&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~v))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+T&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var _=v-this.blockSize,E=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=_;)i(this,w,T),T+=this.blockSize;if(typeof w=="string"){for(;T<v;)if(E[D++]=w.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<v;)if(E[D++]=w[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var _=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=_&255,_/=256;for(this.u(w),w=Array(16),v=_=0;4>v;++v)for(var E=0;32>E;E+=8)w[_++]=this.g[v]>>>E&255;return w};function s(w,v){var _=a;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=v(w)}function o(w,v){this.h=v;for(var _=[],E=!0,D=w.length-1;0<=D;D--){var T=w[D]|0;E&&T==v||(_[D]=T,E=!1)}this.g=_}var a={};function u(w){return-128<=w&&128>w?s(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],_=1,E=0;w>=_;E++)v[E]=w/_|0,_*=4294967296;return new o(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),E=p,D=0;D<w.length;D+=8){var T=Math.min(8,w.length-D),I=parseInt(w.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),E=E.j(T).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var w=0,v=1,_=0;_<this.g.length;_++){var E=this.i(_);w+=(0<=E?E:4294967296+E)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(N(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),_=this,E="";;){var D=K(_,v).g;_=F(_,D.j(v));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=D,b(_))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=F(this,w),N(w)?-1:b(w)?0:1};function R(w){for(var v=w.g.length,_=[],E=0;E<v;E++)_[E]=~w.g[E];return new o(_,~w.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),_=[],E=0,D=0;D<=v;D++){var T=E+(this.i(D)&65535)+(w.i(D)&65535),I=(T>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);E=I>>>16,T&=65535,I&=65535,_[D]=I<<16|T}return new o(_,_[_.length-1]&-2147483648?-1:0)};function F(w,v){return w.add(R(v))}t.j=function(w){if(b(this)||b(w))return p;if(N(this))return N(w)?R(this).j(R(w)):R(R(this).j(w));if(N(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,_=[],E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<w.g.length;D++){var T=this.i(E)>>>16,I=this.i(E)&65535,Rn=w.i(D)>>>16,Uo=w.i(D)&65535;_[2*E+2*D]+=I*Uo,j(_,2*E+2*D),_[2*E+2*D+1]+=T*Uo,j(_,2*E+2*D+1),_[2*E+2*D+1]+=I*Rn,j(_,2*E+2*D+1),_[2*E+2*D+2]+=T*Rn,j(_,2*E+2*D+2)}for(E=0;E<v;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=v;E<2*v;E++)_[E]=0;return new o(_,0)};function j(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function V(w,v){this.g=w,this.h=v}function K(w,v){if(b(v))throw Error("division by zero");if(b(w))return new V(p,p);if(N(w))return v=K(R(w),v),new V(R(v.g),R(v.h));if(N(v))return v=K(w,R(v)),new V(R(v.g),v.h);if(30<w.g.length){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=v;0>=E.l(w);)_=re(_),E=re(E);var D=H(_,1),T=H(E,1);for(E=H(E,2),_=H(_,2);!b(E);){var I=T.add(E);0>=I.l(w)&&(D=D.add(_),T=I),E=H(E,1),_=H(_,1)}return v=F(w,D.j(v)),new V(D,v)}for(D=p;0<=w.l(v);){for(_=Math.max(1,Math.floor(w.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(_),I=T.j(v);N(I)||0<I.l(w);)_-=E,T=l(_),I=T.j(v);b(T)&&(T=m),D=D.add(T),w=F(w,I)}return new V(D,w)}t.A=function(w){return K(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)&w.i(E);return new o(_,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)|w.i(E);return new o(_,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)^w.i(E);return new o(_,this.h^w.h)};function re(w){for(var v=w.g.length+1,_=[],E=0;E<v;E++)_[E]=w.i(E)<<1|w.i(E-1)>>>31;return new o(_,w.h)}function H(w,v){var _=v>>5;v%=32;for(var E=w.g.length-_,D=[],T=0;T<E;T++)D[T]=0<v?w.i(T+_)>>>v|w.i(T+_+1)<<32-v:w.i(T+_);return new o(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jy=g0.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Rr=g0.Integer=o}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yn={};var By,$y,Js,Hy,lc,Ud,zy,qy,Gy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vd=="object"&&Vd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var M=f++;return{value:d(M,c[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,M){for(var O=Array(arguments.length-2),be=2;be<arguments.length;be++)O[be-2]=arguments[be];return d.prototype[C].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,M=g.length||0;c.length=C+M;for(let O=0;O<M;O++)c[C+O]=g[O]}else c.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function K(c){return K[" "](c),c}K[" "]=function(){};var re=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function H(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let M=0;M<_.length;M++)f=_[M],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=_f;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Rn{constructor(){this.h=this.g=null}add(d,f){let g=Uo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Uo=new F(()=>new SM,c=>c.reset());class SM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let jo,Bo=!1,_f=new Rn,bI=()=>{let c=a.Promise.resolve(void 0);jo=()=>{c.then(AM)}};var AM=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){T(f)}var d=Uo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Bo=!1};function nr(){this.s=this.s,this.C=this.C}nr.prototype.s=!1,nr.prototype.ma=function(){this.s||(this.s=!0,this.N())},nr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var MM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function $o(c,d){if(ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(re){e:{try{K(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:RM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&$o.aa.h.call(this)}}b($o,ot);var RM={2:"touch",3:"pen",4:"mouse"};$o.prototype.h=function(){$o.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ho="closure_listenable_"+(1e6*Math.random()|0),NM=0;function xM(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++NM,this.da=this.fa=!1}function Zc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jc(c){this.src=c,this.g={},this.h=0}Jc.prototype.add=function(c,d,f,g,C){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var O=wf(c,d,g,C);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new xM(d,this.src,M,!!g,C),d.fa=f,c.push(d)),d};function If(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),M;(M=0<=C)&&Array.prototype.splice.call(g,C,1),M&&(Zc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function wf(c,d,f,g){for(var C=0;C<c.length;++C){var M=c[C];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==g)return C}return-1}var Ef="closure_lm_"+(1e6*Math.random()|0),Df={};function TI(c,d,f,g,C){if(g&&g.once)return AI(c,d,f,g,C);if(Array.isArray(d)){for(var M=0;M<d.length;M++)TI(c,d[M],f,g,C);return null}return f=Sf(f),c&&c[Ho]?c.K(d,f,l(g)?!!g.capture:!!g,C):SI(c,d,f,!1,g,C)}function SI(c,d,f,g,C,M){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,be=bf(c);if(be||(c[Ef]=be=new Jc(c)),f=be.add(d,f,g,O,M),f.proxy)return f;if(g=PM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)MM||(C=O),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(RI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function PM(){function c(f){return d.call(c.src,c.listener,f)}let d=OM;return c}function AI(c,d,f,g,C){if(Array.isArray(d)){for(var M=0;M<d.length;M++)AI(c,d[M],f,g,C);return null}return f=Sf(f),c&&c[Ho]?c.L(d,f,l(g)?!!g.capture:!!g,C):SI(c,d,f,!0,g,C)}function MI(c,d,f,g,C){if(Array.isArray(d))for(var M=0;M<d.length;M++)MI(c,d[M],f,g,C);else g=l(g)?!!g.capture:!!g,f=Sf(f),c&&c[Ho]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],f=wf(M,f,g,C),-1<f&&(Zc(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=bf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=wf(d,f,g,C)),(f=-1<c?d[c]:null)&&Cf(f))}function Cf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ho])If(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(RI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=bf(d))?(If(f,c),f.h==0&&(f.src=null,d[Ef]=null)):Zc(c)}}}function RI(c){return c in Df?Df[c]:Df[c]="on"+c}function OM(c,d){if(c.da)c=!0;else{d=new $o(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Cf(c),c=f.call(g,d)}return c}function bf(c){return c=c[Ef],c instanceof Jc?c:null}var Tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sf(c){return typeof c=="function"?c:(c[Tf]||(c[Tf]=function(d){return c.handleEvent(d)}),c[Tf])}function at(){nr.call(this),this.i=new Jc(this),this.M=this,this.F=null}b(at,nr),at.prototype[Ho]=!0,at.prototype.removeEventListener=function(c,d,f,g){MI(this,c,d,f,g)};function ht(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ot(d,c);else if(d instanceof ot)d.target=d.target||c;else{var C=d;d=new ot(g,c),E(d,C)}if(C=!0,f)for(var M=f.length-1;0<=M;M--){var O=d.g=f[M];C=Xc(O,g,!0,d)&&C}if(O=d.g=c,C=Xc(O,g,!0,d)&&C,C=Xc(O,g,!1,d)&&C,f)for(M=0;M<f.length;M++)O=d.g=f[M],C=Xc(O,g,!1,d)&&C}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Zc(f[g]);delete c.g[d],c.h--}}this.F=null},at.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},at.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Xc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,M=0;M<d.length;++M){var O=d[M];if(O&&!O.da&&O.capture==f){var be=O.listener,et=O.ha||O.src;O.fa&&If(c.i,O),C=be.call(et,g)!==!1&&C}}return C&&!g.defaultPrevented}function NI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function xI(c){c.g=NI(()=>{c.g=null,c.i&&(c.i=!1,xI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class kM extends nr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:xI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zo(c){nr.call(this),this.h=c,this.g={}}b(zo,nr);var PI=[];function OI(c){H(c.g,function(d,f){this.g.hasOwnProperty(f)&&Cf(d)},c),c.g={}}zo.prototype.N=function(){zo.aa.N.call(this),OI(this)},zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Af=a.JSON.stringify,FM=a.JSON.parse,LM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Mf(){}Mf.prototype.h=null;function kI(c){return c.h||(c.h=c.i())}function FI(){}var qo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rf(){ot.call(this,"d")}b(Rf,ot);function Nf(){ot.call(this,"c")}b(Nf,ot);var qr={},LI=null;function eu(){return LI=LI||new at}qr.La="serverreachability";function VI(c){ot.call(this,qr.La,c)}b(VI,ot);function Go(c){let d=eu();ht(d,new VI(d))}qr.STAT_EVENT="statevent";function UI(c,d){ot.call(this,qr.STAT_EVENT,c),this.stat=d}b(UI,ot);function ft(c){let d=eu();ht(d,new UI(d,c))}qr.Ma="timingevent";function jI(c,d){ot.call(this,qr.Ma,c),this.size=d}b(jI,ot);function Wo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ko(){this.g=!0}Ko.prototype.xa=function(){this.g=!1};function VM(c,d,f,g,C,M){c.info(function(){if(c.g)if(M)for(var O="",be=M.split("&"),et=0;et<be.length;et++){var _e=be[et].split("=");if(1<_e.length){var ct=_e[0];_e=_e[1];var ut=ct.split("_");O=2<=ut.length&&ut[1]=="type"?O+(ct+"="+_e+"&"):O+(ct+"=redacted&")}}else O=null;else O=M;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function UM(c,d,f,g,C,M,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+M+" "+O})}function Qi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+BM(c,f)+(g?" "+g:"")})}function jM(c,d){c.info(function(){return"TIMEOUT: "+d})}Ko.prototype.info=function(){};function BM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return Af(f)}catch{return d}}var tu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},BI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xf;function nu(){}b(nu,Mf),nu.prototype.g=function(){return new XMLHttpRequest},nu.prototype.i=function(){return{}},xf=new nu;function rr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new zo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $I}function $I(){this.i=null,this.g="",this.h=!1}var HI={},Pf={};function Of(c,d,f){c.L=1,c.v=ou(Nn(d)),c.m=f,c.P=!0,zI(c,null)}function zI(c,d){c.F=Date.now(),ru(c),c.A=Nn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),iw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new $I,c.g=Ew(c.j,f?d:null,!c.m),0<c.O&&(c.M=new kM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(PI[0]=C.toString()),C=PI);for(var M=0;M<C.length;M++){var O=TI(f,C[M],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Go(),VM(c.i,c.u,c.A,c.l,c.R,c.m)}rr.prototype.ca=function(c){c=c.target;let d=this.M;d&&xn(c)==3?d.j():this.Y(c)},rr.prototype.Y=function(c){try{if(c==this.g)e:{let ut=xn(this.g);var d=this.g.Ba();let Ji=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||dw(this.g)))){this.J||ut!=4||d==7||(d==8||0>=Ji?Go(3):Go(2)),kf(this);var f=this.g.Z();this.X=f;t:if(qI(this)){var g=dw(this.g);c="";var C=g.length,M=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Qo(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(M&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,UM(this.i,this.u,this.A,this.l,this.R,ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,et=this.g;if((be=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(be)){var _e=be;break t}}_e=null}if(f=_e)Qi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ff(this,f);else{this.o=!1,this.s=3,ft(12),Gr(this),Qo(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<O.length;)if(Jt=$M(this,O),Jt==Pf){ut==4&&(this.s=4,ft(14),f=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==HI){this.s=4,ft(15),Qi(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Qi(this.i,this.l,Jt,null),Ff(this,Jt);if(qI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||O.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)Qi(this.i,this.l,O,"[Invalid Chunked Response]"),Gr(this),Qo(this);else if(0<O.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),$f(ct),ct.M=!0,ft(11))}}else Qi(this.i,this.l,O,null),Ff(this,O);ut==4&&Gr(this),this.o&&!this.J&&(ut==4?vw(this.j,this):(this.o=!1,ru(this)))}else sR(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Gr(this),Qo(this)}}}catch{}finally{}};function qI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function $M(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Pf:(f=Number(d.substring(f,g)),isNaN(f)?HI:(g+=1,g+f>d.length?Pf:(d=d.slice(g,g+f),c.C=g+f,d)))}rr.prototype.cancel=function(){this.J=!0,Gr(this)};function ru(c){c.S=Date.now()+c.I,GI(c,c.I)}function GI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Wo(m(c.ba,c),d)}function kf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}rr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(jM(this.i,this.A),this.L!=2&&(Go(),ft(17)),Gr(this),this.s=2,Qo(this)):GI(this,this.S-c)};function Qo(c){c.j.G==0||c.J||vw(c.j,c)}function Gr(c){kf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,OI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Ff(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Lf(f.h,c))){if(!c.K&&Lf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)du(f),uu(f);else break e;Bf(f),ft(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Wo(m(f.Za,f),6e3));if(1>=QI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Kr(f,11)}else if((c.K||f.g==c)&&du(f),!j(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let _e=C[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];let ct=_e[3];ct!=null&&(f.la=ct,f.j.info("VER="+f.la));let ut=_e[4];ut!=null&&(f.Aa=ut,f.j.info("SVER="+f.Aa));let Ji=_e[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(g=1.5*Ji,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Jt=c.g;if(Jt){let fu=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fu){var M=g.h;M.g||fu.indexOf("spdy")==-1&&fu.indexOf("quic")==-1&&fu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Vf(M,M.h),M.h=null))}if(g.D){let Hf=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hf&&(g.ya=Hf,Re(g.I,g.D,Hf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=ww(g,g.J?g.ia:null,g.W),O.K){YI(g.h,O);var be=O,et=g.L;et&&(be.I=et),be.B&&(kf(be),ru(be)),g.g=O}else mw(g);0<f.i.length&&lu(f)}else _e[0]!="stop"&&_e[0]!="close"||Kr(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Kr(f,7):jf(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}Go(4)}catch{}}var HM=class{constructor(c,d){this.g=c,this.map=d}};function WI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function QI(c){return c.h?1:c.g?c.g.size:0}function Lf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Vf(c,d){c.g?c.g.add(d):c.h=d}function YI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}WI.prototype.cancel=function(){if(this.i=ZI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function ZI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function zM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function qM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function JI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=qM(c),g=zM(c),C=g.length,M=0;M<C;M++)d.call(void 0,g[M],f&&f[M],c)}var XI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var M=c[f].substring(0,g);C=c[f].substring(g+1)}else M=c[f];d(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Wr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Wr){this.h=c.h,iu(this,c.j),this.o=c.o,this.g=c.g,su(this,c.s),this.l=c.l;var d=c.i,f=new Jo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),ew(this,f),this.m=c.m}else c&&(d=String(c).match(XI))?(this.h=!1,iu(this,d[1]||"",!0),this.o=Yo(d[2]||""),this.g=Yo(d[3]||"",!0),su(this,d[4]),this.l=Yo(d[5]||"",!0),ew(this,d[6]||"",!0),this.m=Yo(d[7]||"")):(this.h=!1,this.i=new Jo(null,this.h))}Wr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Zo(d,tw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Zo(d,tw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Zo(f,f.charAt(0)=="/"?QM:KM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Zo(f,ZM)),c.join("")};function Nn(c){return new Wr(c)}function iu(c,d,f){c.j=f?Yo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function su(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function ew(c,d,f){d instanceof Jo?(c.i=d,JM(c.i,c.h)):(f||(d=Zo(d,YM)),c.i=new Jo(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function ou(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Yo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Zo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,WM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function WM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tw=/[#\/\?@]/g,KM=/[#\?:]/g,QM=/[#\?]/g,YM=/[#\?@]/g,ZM=/#/g;function Jo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ir(c){c.g||(c.g=new Map,c.h=0,c.i&&GM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Jo.prototype,t.add=function(c,d){ir(this),this.i=null,c=Yi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function nw(c,d){ir(c),d=Yi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function rw(c,d){return ir(c),d=Yi(c,d),c.g.has(d)}t.forEach=function(c,d){ir(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){ir(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let M=0;M<C.length;M++)f.push(d[g])}return f},t.V=function(c){ir(this);let d=[];if(typeof c=="string")rw(this,c)&&(d=d.concat(this.g.get(Yi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return ir(this),this.i=null,c=Yi(this,c),rw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function iw(c,d,f){nw(c,d),0<f.length&&(c.i=null,c.g.set(Yi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let M=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var C=M;O[g]!==""&&(C+="="+encodeURIComponent(String(O[g]))),c.push(C)}}return this.i=c.join("&")};function Yi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function JM(c,d){d&&!c.j&&(ir(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(nw(this,g),iw(this,C,f))},c)),c.j=d}function XM(c,d){let f=new Ko;if(a.Image){let g=new Image;g.onload=y(sr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(sr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(sr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(sr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function eR(c,d){let f=new Ko,g=new AbortController,C=setTimeout(()=>{g.abort(),sr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(M=>{clearTimeout(C),M.ok?sr(f,"TestPingServer: ok",!0,d):sr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),sr(f,"TestPingServer: error",!1,d)})}function sr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function tR(){this.g=new LM}function nR(c,d,f){let g=f||"";try{JI(c,function(C,M){let O=C;l(C)&&(O=Af(C)),d.push(g+M+"="+encodeURIComponent(O))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Xo(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Xo,Mf),Xo.prototype.g=function(){return new au(this.l,this.j)},Xo.prototype.i=function(c){return function(){return c}}({});function au(c,d){at.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(au,at),t=au.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ta(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ea(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ta(this)),this.g&&(this.readyState=3,ta(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function sw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ea(this):ta(this),this.readyState==3&&sw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ea(this))},t.Qa=function(c){this.g&&(this.response=c,ea(this))},t.ga=function(){this.g&&ea(this)};function ea(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ta(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ta(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ow(c){let d="";return H(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Uf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=ow(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Le(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Le,at);var rR=/^https?$/i,iR=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xf.g(),this.v=this.o?kI(this.o):kI(xf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){aw(this,M);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,O]of f)this.g.setRequestHeader(M,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lw(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){aw(this,M)}};function aw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,cw(c),cu(c)}function cw(c){c.A||(c.A=!0,ht(c,"complete"),ht(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ht(this,"complete"),ht(this,"abort"),cu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cu(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uw(this):this.bb())},t.bb=function(){uw(this)};function uw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||xn(c)!=4||c.Z()!=2)){if(c.u&&xn(c)==4)NI(c.Ea,0,c);else if(ht(c,"readystatechange"),xn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var C=String(c.D).match(XI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!rR.test(C?C.toLowerCase():"")}f=g}if(f)ht(c,"complete"),ht(c,"success");else{c.m=6;try{var M=2<xn(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",cw(c)}}finally{cu(c)}}}}function cu(c,d){if(c.g){lw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ht(c,"ready");try{f.onreadystatechange=g}catch{}}}function lw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function xn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),FM(d)}};function dw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function sR(c){let d={};c=(c.g&&2<=xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(j(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[C]||[];d[C]=M,M.push(f)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function na(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function hw(c){this.Aa=0,this.i=[],this.j=new Ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=na("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=na("baseRetryDelayMs",5e3,c),this.cb=na("retryDelaySeedMs",1e4,c),this.Wa=na("forwardChannelMaxRetries",2,c),this.wa=na("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new WI(c&&c.concurrentRequestLimit),this.Da=new tR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ft(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=ww(this,null,this.W),lu(this)};function jf(c){if(fw(c),c.G==3){var d=c.U++,f=Nn(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),ra(c,f),d=new rr(c,c.j,d),d.L=2,d.v=ou(Nn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Ew(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ru(d)}Iw(c)}function uu(c){c.g&&($f(c),c.g.cancel(),c.g=null)}function fw(c){uu(c),c.u&&(a.clearTimeout(c.u),c.u=null),du(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function lu(c){if(!KI(c.h)&&!c.s){c.s=!0;var d=c.Ga;jo||bI(),Bo||(jo(),Bo=!0),_f.add(d,c),c.B=0}}function oR(c,d){return QI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Wo(m(c.Ga,c,d),_w(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new rr(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),E(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=gw(this,C,d),f=Nn(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),ra(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(ow(M)))+"&"+d:this.m&&Uf(f,this.m,M)),Vf(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,Of(C,f,null)):Of(C,f,d),this.G=2}}else this.G==3&&(c?pw(this,c):this.i.length==0||KI(this.h)||pw(this))};function pw(c,d){var f;d?f=d.l:f=c.U++;let g=Nn(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),ra(c,g),c.m&&c.o&&Uf(g,c.m,c.o),f=new rr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=gw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Vf(c.h,f),Of(f,g,d)}function ra(c,d){c.H&&H(c.H,function(f,g){Re(d,g,f)}),c.l&&JI({},function(f,g){Re(d,g,f)})}function gw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let M=-1;for(;;){let O=["count="+f];M==-1?0<f?(M=C[0].g,O.push("ofs="+M)):M=0:O.push("ofs="+M);let be=!0;for(let et=0;et<f;et++){let _e=C[et].g,ct=C[et].map;if(_e-=M,0>_e)M=Math.max(0,C[et].g-100),be=!1;else try{nR(ct,O,"req"+_e+"_")}catch{g&&g(ct)}}if(be){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function mw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;jo||bI(),Bo||(jo(),Bo=!0),_f.add(d,c),c.v=0}}function Bf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Wo(m(c.Fa,c),_w(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,yw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Wo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),uu(this),yw(this))};function $f(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function yw(c){c.g=new rr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Nn(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),ra(c,d),c.m&&c.o&&Uf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ou(Nn(d)),f.m=null,f.P=!0,zI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,uu(this),Bf(this),ft(19))};function du(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function vw(c,d){var f=null;if(c.g==d){du(c),$f(c),c.g=null;var g=2}else if(Lf(c.h,d))f=d.D,YI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=eu(),ht(g,new jI(g,f)),lu(c)}else mw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&oR(c,d)||g==2&&Bf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Kr(c,5);break;case 4:Kr(c,10);break;case 3:Kr(c,6);break;default:Kr(c,2)}}}function _w(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Kr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Wr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||iu(g,"https"),ou(g),C?XM(g.toString(),f):eR(g.toString(),f)}else ft(2);c.G=0,c.l&&c.l.sa(d),Iw(c),fw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Iw(c){if(c.G=0,c.ka=[],c.l){let d=ZI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function ww(c,d,f){var g=f instanceof Wr?Nn(f):new Wr(f);if(g.g!="")d&&(g.g=d+"."+g.g),su(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var M=new Wr(null);g&&iu(M,g),d&&(M.g=d),C&&su(M,C),f&&(M.l=f),g=M}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),ra(c,g),g}function Ew(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Le(new Xo({eb:f})):new Le(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dw(){}t=Dw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hu(){}hu.prototype.g=function(c,d){return new St(c,d)};function St(c,d){at.call(this),this.g=new hw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!j(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Zi(this)}b(St,at),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){jf(this.g)},St.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Af(c),c=f);d.i.push(new HM(d.Ya++,c)),d.G==3&&lu(d)},St.prototype.N=function(){this.g.l=null,delete this.j,jf(this.g),delete this.g,St.aa.N.call(this)};function Cw(c){Rf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(Cw,Rf);function bw(){Nf.call(this),this.status=1}b(bw,Nf);function Zi(c){this.g=c}b(Zi,Dw),Zi.prototype.ua=function(){ht(this.g,"a")},Zi.prototype.ta=function(c){ht(this.g,new Cw(c))},Zi.prototype.sa=function(c){ht(this.g,new bw)},Zi.prototype.ra=function(){ht(this.g,"b")},hu.prototype.createWebChannel=hu.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Gy=Yn.createWebChannelTransport=function(){return new hu},qy=Yn.getStatEventTarget=function(){return eu()},zy=Yn.Event=qr,Ud=Yn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tu.NO_ERROR=0,tu.TIMEOUT=8,tu.HTTP_ERROR=6,lc=Yn.ErrorCode=tu,BI.COMPLETE="complete",Hy=Yn.EventType=BI,FI.EventType=qo,qo.OPEN="a",qo.CLOSE="b",qo.ERROR="c",qo.MESSAGE="d",at.prototype.listen=at.prototype.K,Js=Yn.WebChannel=FI,$y=Yn.FetchXmlHttpFactory=Xo,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,By=Yn.XhrIo=Le}).apply(typeof Vd<"u"?Vd:typeof self<"u"?self:typeof window<"u"?window:{});var m0="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var Ro="10.13.1";var Ui=new Tr("@firebase/firestore");function ro(){return Ui.logLevel}function P(t,...e){if(Ui.logLevel<=de.DEBUG){let n=e.map(B_);Ui.debug(`Firestore (${Ro}): ${t}`,...n)}}function _t(t,...e){if(Ui.logLevel<=de.ERROR){let n=e.map(B_);Ui.error(`Firestore (${Ro}): ${t}`,...n)}}function Fr(t,...e){if(Ui.logLevel<=de.WARN){let n=e.map(B_);Ui.warn(`Firestore (${Ro}): ${t}`,...n)}}function B_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function $(t="Unexpected state"){let e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+t;throw _t(e),new Error(e)}function z(t,e){t||$()}function Z(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Yd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}},Zy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Jy=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new dn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>S(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new Yd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new Qe(e)}},Xy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ev=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Xy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},tv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},nv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(z(typeof n.token=="string"),this.R=n.token,new tv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function nj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Zd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=nj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function X(t,e){return t<e?-1:t>e?1:0}function fo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function mS(t){return t+"\0"}var ke=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var W=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ke(0,0))}static max(){return new t(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Jd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(),r===void 0?r=e.length-n:r>e.length-n&&$(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Se=class t extends Jd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},rj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ye=class t extends Jd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return rj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};var po=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function rv(t){return t.fields.find(e=>e.kind===2)}function Ri(t){return t.fields.filter(e=>e.kind!==2)}po.UNKNOWN_ID=-1;var uo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var wc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Zt.min())}};function ij(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=W.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new Zt(i,U.empty(),e)}function yS(t){return new Zt(t.readTime,t.key,-1)}var Zt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(W.min(),U.empty(),-1)}static max(){return new t(W.max(),U.empty(),-1)}};function $_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:X(t.largestBatchId,e.largestBatchId))}var vS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Gi(t){return S(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==vS)throw t;P("LocalStore","Unexpectedly lost primary lease")})}var A=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var eh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new dn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Li(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=H_(r.target.error);this.V.reject(new Li(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Li(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new sv(n)}},go=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(lt())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),Ni(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!_d())return!1;if(t.v())return!0;let e=lt(),n=t.S(e),r=0<n&&n<10,i=_S(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return S(this,null,function*(){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Li(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new B(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new B(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Li(e,o))},i.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return S(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=eh.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function _S(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var iv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ni(this.B.delete())}},Li=class extends B{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function zr(t){return t.name==="IndexedDbTransactionError"}var sv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(P("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ni(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),Ni(this.store.add(e))}get(e){return Ni(this.store.get(e)).next(n=>(n===void 0&&(n=null),P("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),Ni(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),Ni(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new A((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new A((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){P("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new A((r,i)=>{n.onerror=s=>{let o=H_(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){let r=[];return new A((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let u=new iv(a),l=n(a.primaryKey,a.value,u);if(l instanceof A){let h=l.catch(p=>(u.done(),A.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>A.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ni(t){return new A((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=H_(r.target.error);n(i)}})}var y0=!1;function H_(t){let e=go.S(lt());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return y0||(y0=!0,setTimeout(()=>{throw r},0)),r}}return t}var ov=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){P("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>S(this,null,function*(){this.task=null;try{P("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){zr(n)?P("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Gi(n)}yield this.X(6e4)}))}},av=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return S(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,s=!0;return A.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return P("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(P("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=yS(s);$_(o,r)>0&&(r=o)}),new Zt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var ln=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function qh(t){return t==null}function Ec(t){return t===0&&1/t==-1/0}function sj(t){return typeof t=="number"&&Number.isInteger(t)&&!Ec(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function wt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=v0(e)),e=oj(t.get(n),e);return v0(e)}function oj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function v0(t){return t+""}function bn(t){let e=t.length;if(z(e>=2),e===2)return z(t.charAt(0)===""&&t.charAt(1)===""),Se.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&$(),t.charAt(o+1)){case"":let a=t.substring(s,o),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:$()}s=o+2}return new Se(r)}var _0=["userId","batchId"];function zd(t,e){return[t,wt(e)]}function IS(t,e,n){return[t,wt(e),n]}var aj={},cj=["prefixPath","collectionGroup","readTime","documentId"],uj=["prefixPath","collectionGroup","documentId"],lj=["collectionGroup","readTime","prefixPath","documentId"],dj=["canonicalId","targetId"],hj=["targetId","path"],fj=["path","targetId"],pj=["collectionId","parent"],gj=["indexId","uid"],mj=["uid","sequenceNumber"],yj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vj=["indexId","uid","orderedDocumentKey"],_j=["userId","collectionPath","documentId"],Ij=["userId","collectionPath","largestBatchId"],wj=["userId","collectionGroup","largestBatchId"],wS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ej=[...wS,"documentOverlays"],ES=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DS=ES,z_=[...DS,"indexConfiguration","indexState","indexEntries"],Dj=z_,Cj=[...z_,"globals"];var Dc=class extends Xd{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Je(t,e){let n=Z(t);return go.F(n._e,e)}function I0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Fe=class t{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new co(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new co(this.root,e,this.comparator,!1)}getReverseIterator(){return new co(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new co(this.root,e,this.comparator,!0)}},co=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class t{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new th(this.data.getIterator())}getIteratorFrom(e){return new th(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},th=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Xs(t){return t.hasNext()?t.getNext():void 0}var Ot=class t{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ae(Ye.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var nh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nh("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var bj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(t){if(z(!!t),typeof t=="string"){let e=0,n=bj.exec(t);if(z(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}function q_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function G_(t){let e=t.mapValue.fields.__previous_value__;return q_(e)?G_(e):e}function Cc(t){let e=Xn(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}var cv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},mo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Or={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qd={nullValue:"NULL_VALUE"};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?q_(t)?4:bS(t)?9007199254740991:Gh(t)?10:11:$()}function An(t,e){if(t===e)return!0;let n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cc(t).isEqual(Cc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Xn(i.timestampValue),a=Xn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Lr(i.bytesValue).isEqual(Lr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ne(i.doubleValue),a=Ne(s.doubleValue);return o===a?Ec(o)===Ec(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fo(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(I0(o)!==I0(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!An(o[u],a[u])))return!1;return!0}(t,e);default:return $()}}function bc(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Vr(t,e){if(t===e)return 0;let n=ji(t),r=ji(e);if(n!==r)return X(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ne(s.integerValue||s.doubleValue),u=Ne(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return w0(t.timestampValue,e.timestampValue);case 4:return w0(Cc(t),Cc(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Lr(s),u=Lr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=X(a[l],u[l]);if(h!==0)return h}return X(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=X(Ne(s.latitude),Ne(o.latitude));return a!==0?a:X(Ne(s.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return E0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=X(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:E0(y,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Or.mapValue&&o===Or.mapValue)return 0;if(s===Or.mapValue)return 1;if(o===Or.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=X(u[p],h[p]);if(m!==0)return m;let y=Vr(a[u[p]],l[h[p]]);if(y!==0)return y}return X(u.length,h.length)}(t.mapValue,e.mapValue);default:throw $()}}function w0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return X(t,e);let n=Xn(t),r=Xn(e),i=X(n.seconds,r.seconds);return i!==0?i:X(n.nanos,r.nanos)}function E0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Vr(n[i],r[i]);if(s)return s}return X(n.length,r.length)}function yo(t){return uv(t)}function uv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Xn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=uv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${uv(n.fields[o])}`;return i+"}"}(t.mapValue):$()}function W_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lv(t){return!!t&&"integerValue"in t}function Tc(t){return!!t&&"arrayValue"in t}function D0(t){return!!t&&"nullValue"in t}function C0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gd(t){return!!t&&"mapValue"in t}function Gh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var TS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Tj(t){return"nullValue"in t?qd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?W_(mo.empty(),U.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Gh(t)?TS:{mapValue:{}}:$()}function Sj(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?W_(mo.empty(),U.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?TS:"mapValue"in t?Gh(t)?{mapValue:{}}:Or:$()}function b0(t,e){let n=Vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function T0(t,e){let n=Vr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var It=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(n)}setAll(e){let n=Ye.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(yc(this.value))}};function SS(t){let e=[];return Wi(t.fields,(n,r)=>{let i=new Ye([n]);if(Gd(r)){let s=SS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}var st=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,W.min(),W.min(),W.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,W.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,W.min(),W.min(),It.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,W.min(),W.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ur=class{constructor(e,n){this.position=e,this.inclusive=n}};function S0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(o.referenceValue),n.key):r=Vr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function A0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}var vo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Aj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var rh=class{},pe=class t extends rh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fv(e,n,r):n==="array-contains"?new mv(e,r):n==="in"?new ih(e,r):n==="not-in"?new yv(e,r):n==="array-contains-any"?new vv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pv(e,r):new gv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vr(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(Vr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ce=class t extends rh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return _o(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function _o(t){return t.op==="and"}function dv(t){return t.op==="or"}function K_(t){return AS(t)&&_o(t)}function AS(t){for(let e of t.filters)if(e instanceof Ce)return!1;return!0}function hv(t){if(t instanceof pe)return t.field.canonicalString()+t.op.toString()+yo(t.value);if(K_(t))return t.filters.map(e=>hv(e)).join(",");{let e=t.filters.map(n=>hv(n)).join(",");return`${t.op}(${e})`}}function MS(t,e){return t instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)}(t,e):t instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&MS(o,i.filters[a]),!0):!1}(t,e):void $()}function RS(t,e){let n=t.filters.concat(e);return Ce.create(n,t.op)}function NS(t){return t instanceof pe?function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`}(t):t instanceof Ce?function(n){return n.op.toString()+" {"+n.getFilters().map(NS).join(" ,")+"}"}(t):"Filter"}var fv=class extends pe{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},pv=class extends pe{constructor(e,n){super(e,"in",n),this.keys=xS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},gv=class extends pe{constructor(e,n){super(e,"not-in",n),this.keys=xS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function xS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var mv=class extends pe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Tc(n)&&bc(n.arrayValue,this.value)}},ih=class extends pe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&bc(this.value.arrayValue,n)}},yv=class extends pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!bc(this.value.arrayValue,n)}},vv=class extends pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Tc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bc(this.value.arrayValue,r))}};var _v=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Iv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new _v(t,e,n,r,i,s,o)}function Bi(t){let e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yo(r)).join(",")),e.ue=n}return e.ue}function Lc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Aj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!A0(t.startAt,e.startAt)&&A0(t.endAt,e.endAt)}function sh(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function oh(t,e){return t.filters.filter(n=>n instanceof pe&&n.field.isEqual(e))}function M0(t,e,n){let r=qd,i=!0;for(let s of oh(t,e)){let o=qd,a=!0;switch(s.op){case"<":case"<=":o=Tj(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=qd}b0({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];b0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function R0(t,e,n){let r=Or,i=!0;for(let s of oh(t,e)){let o=Or,a=!0;switch(s.op){case">=":case">":o=Sj(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Or}T0({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];T0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var Io=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Mj(t,e,n,r,i,s,o,a){return new Io(t,e,n,r,i,s,o,a)}function Wh(t){return new Io(t)}function N0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Rj(t){return t.collectionGroup!==null}function vc(t){let e=Z(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(Ye.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vo(s,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new vo(Ye.keyField(),r))}return e.ce}function Yt(t){let e=Z(t);return e.le||(e.le=Nj(e,vc(t))),e.le}function Nj(t,e){if(t.limitType==="F")return Iv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new vo(i.field,s)});let n=t.endAt?new Ur(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ur(t.startAt.position,t.startAt.inclusive):null;return Iv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wv(t,e,n){return new Io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kh(t,e){return Lc(Yt(t),Yt(e))&&t.limitType===e.limitType}function PS(t){return`${Bi(Yt(t))}|lt:${t.limitType}`}function io(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>NS(i)).join(", ")}]`),qh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yo(i)).join(",")),`Target(${r})`}(Yt(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of vc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=S0(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,vc(r),i)||r.endAt&&!function(o,a,u){let l=S0(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,vc(r),i))}(t,e)}function xj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OS(t){return(e,n)=>{let r=!1;for(let i of vc(t)){let s=Pj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Pj(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Vr(u,l):$()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}var Mn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return CS(this.inner)}size(){return this.innerSize}};var Oj=new Fe(U.comparator);function kt(){return Oj}var kS=new Fe(U.comparator);function gc(...t){let e=kS;for(let n of t)e=e.insert(n.key,n);return e}function FS(t){let e=kS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tn(){return _c()}function LS(){return _c()}function _c(){return new Mn(t=>t.toString(),(t,e)=>t.isEqual(e))}var kj=new Fe(U.comparator),Fj=new Ae(U.comparator);function se(...t){let e=Fj;for(let n of t)e=e.add(n);return e}var Lj=new Ae(X);function Vj(){return Lj}function Q_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(e)?"-0":e}}function VS(t){return{integerValue:""+t}}function Uj(t,e){return sj(e)?VS(e):Q_(t,e)}var wo=class{constructor(){this._=void 0}};function jj(t,e,n){return t instanceof $i?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&q_(s)&&(s=G_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof jr?jS(t,e):t instanceof Br?BS(t,e):function(i,s){let o=US(i,s),a=x0(o)+x0(i.Pe);return lv(o)&&lv(i.Pe)?VS(a):Q_(i.serializer,a)}(t,e)}function Bj(t,e,n){return t instanceof jr?jS(t,e):t instanceof Br?BS(t,e):n}function US(t,e){return t instanceof Hi?function(r){return lv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var $i=class extends wo{},jr=class extends wo{constructor(e){super(),this.elements=e}};function jS(t,e){let n=$S(e);for(let r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}var Br=class extends wo{constructor(e){super(),this.elements=e}};function BS(t,e){let n=$S(e);for(let r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}var Hi=class extends wo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function x0(t){return Ne(t.integerValue||t.doubleValue)}function $S(t){return Tc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ev=class{constructor(e,n){this.field=e,this.transform=n}};function $j(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof jr&&i instanceof jr||r instanceof Br&&i instanceof Br?fo(r.elements,i.elements,An):r instanceof Hi&&i instanceof Hi?An(r.Pe,i.Pe):r instanceof $i&&i instanceof $i}(t.transform,e.transform)}var Dv=class{constructor(e,n){this.version=e,this.transformResults=n}},Ft=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Wd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Eo=class{};function HS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Do(t.key,Ft.none()):new $r(t.key,t.data,Ft.none());{let n=t.data,r=It.empty(),i=new Ae(Ye.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hn(t.key,r,new Ot(i.toArray()),Ft.none())}}function Hj(t,e,n){t instanceof $r?function(i,s,o){let a=i.value.clone(),u=O0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hn?function(i,s,o){if(!Wd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=O0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(zS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ic(t,e,n,r){return t instanceof $r?function(s,o,a,u){if(!Wd(s.precondition,o))return a;let l=s.value.clone(),h=k0(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof hn?function(s,o,a,u){if(!Wd(s.precondition,o))return a;let l=k0(s.fieldTransforms,u,o),h=o.data;return h.setAll(zS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Wd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function zj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=US(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function P0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fo(r,i,(s,o)=>$j(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var $r=class extends Eo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hn=class extends Eo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function zS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function O0(t,e,n){let r=new Map;z(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Bj(o,a,n[i]))}return r}function k0(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,jj(s,o,e))}return r}var Do=class extends Eo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ah=class extends Eo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sc=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Hj(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=LS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=HS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(n,r)=>P0(n,r))&&fo(this.baseMutations,e.baseMutations,(n,r)=>P0(n,r))}},Cv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){z(e.mutations.length===r.length);let i=function(){return kj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Ac=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,ye;function qj(t){switch(t){default:return $();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function qS(t){if(t===void 0)return _t("GRPC error has no .code"),x.UNKNOWN;switch(t){case ze.OK:return x.OK;case ze.CANCELLED:return x.CANCELLED;case ze.UNKNOWN:return x.UNKNOWN;case ze.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ze.INTERNAL:return x.INTERNAL;case ze.UNAVAILABLE:return x.UNAVAILABLE;case ze.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ze.NOT_FOUND:return x.NOT_FOUND;case ze.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ze.ABORTED:return x.ABORTED;case ze.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ze.DATA_LOSS:return x.DATA_LOSS;default:return $()}}(ye=ze||(ze={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var F0=null;function Gj(){return new TextEncoder}var Wj=new Rr([4294967295,4294967295],0);function L0(t){let e=Gj().encode(t),n=new jy;return n.update(e),new Uint8Array(n.digest())}function V0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([i,s],0)]}var Tv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ki(`Invalid padding: ${n}`);if(r<0)throw new ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ki(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Rr.fromNumber(r)));return i.compare(Wj)===1&&(i=new Rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=L0(e),[r,i]=V0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=L0(e),[r,i]=V0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ch=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(W.min(),i,new Fe(X),kt(),se())}},Mc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,se(),se(),se())}};var lo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},uh=class{constructor(e,n){this.targetId=e,this.me=n}},lh=class{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},dh=class{constructor(){this.fe=0,this.ge=j0(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$()}}),new Mc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=j0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Sv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kt(),this.qe=U0(),this.Qe=new Fe(X)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(sh(s))if(r===0){let o=new U(s.path);this.Ue(n,o,st.newNoDocument(o,W.min()))}else z(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}F0?.et(function(h,p,m,y,b){var N,R,F,j,V,K;let re={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},H=p.unchangedNames;return H&&(re.bloomFilter={applied:b===0,hashCount:(N=H?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(j=(F=(R=H?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&j!==void 0?j:0,padding:(K=(V=H?.bits)===null||V===void 0?void 0:V.padding)!==null&&K!==void 0?K:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),re}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Lr(r).toUint8Array()}catch(u){if(u instanceof nh)return Fr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Tv(o,i,s)}catch(u){return Fr(u instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&sh(a.target)){let u=new U(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,st.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ch(e,n,this.Qe,this.ke,r);return this.ke=kt(),this.qe=U0(),this.Qe=new Fe(X),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ae(X),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||P("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function U0(){return new Fe(U.comparator)}function j0(){return new Fe(U.comparator)}var Kj={asc:"ASCENDING",desc:"DESCENDING"},Qj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yj={and:"AND",or:"OR"},Av=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Mv(t,e){return t.useProto3Json||qh(e)?e:{value:e}}function Co(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Zj(t,e){return Co(t,e.toTimestamp())}function Et(t){return z(!!t),W.fromTimestamp(function(n){let r=Xn(n);return new ke(r.seconds,r.nanos)}(t))}function Y_(t,e){return Rv(t,e).canonicalString()}function Rv(t,e){let n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WS(t){let e=Se.fromString(t);return z(nA(e)),e}function hh(t,e){return Y_(t.databaseId,e.path)}function Vi(t,e){let n=WS(e);if(n.get(1)!==t.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(YS(n))}function KS(t,e){return Y_(t.databaseId,e)}function QS(t){let e=WS(t);return e.length===4?Se.emptyPath():YS(e)}function Nv(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YS(t){return z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function B0(t,e,n){return{name:hh(t,e),fields:n.value.mapValue.fields}}function Jj(t,e,n){let r=Vi(t,e.name),i=Et(e.updateTime),s=e.createTime?Et(e.createTime):W.min(),o=new It({mapValue:{fields:e.fields}}),a=st.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Xj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(z(h===void 0||typeof h=="string"),Ze.fromBase64String(h||"")):(z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ze.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?x.UNKNOWN:qS(l.code);return new B(h,l.message||"")}(o);n=new lh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vi(t,r.document.name),s=Et(r.document.updateTime),o=r.document.createTime?Et(r.document.createTime):W.min(),a=new It({mapValue:{fields:r.document.fields}}),u=st.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new lo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vi(t,r.document),s=r.readTime?Et(r.readTime):W.min(),o=st.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vi(t,r.document),s=r.removedTargetIds||[];n=new lo([],s,i,null)}else{if(!("filter"in e))return $();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new bv(i,s),a=r.targetId;n=new uh(a,o)}}return n}function fh(t,e){let n;if(e instanceof $r)n={update:B0(t,e.key,e.value)};else if(e instanceof Do)n={delete:hh(t,e.key)};else if(e instanceof hn)n={update:B0(t,e.key,e.data),updateMask:s2(e.fieldMask)};else{if(!(e instanceof ah))return $();n={verify:hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof $i)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Br)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hi)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw $()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Zj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(t,e.precondition)),n}function xv(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Ft.updateTime(Et(s.updateTime)):s.exists!==void 0?Ft.exists(s.exists):Ft.none()}(e.currentDocument):Ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)z(a.setToServerValue==="REQUEST_TIME"),u=new $i;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new jr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Br(h)}else"increment"in a?u=new Hi(o,a.increment):$();let l=Ye.fromServerFormat(a.fieldPath);return new Ev(l,u)}(t,i)):[];if(e.update){e.update.name;let i=Vi(t,e.update.name),s=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(u){let l=u.fieldPaths||[];return new Ot(l.map(h=>Ye.fromServerFormat(h)))}(e.updateMask);return new hn(i,s,o,n,r)}return new $r(i,s,n,r)}if(e.delete){let i=Vi(t,e.delete);return new Do(i,n)}if(e.verify){let i=Vi(t,e.verify);return new ah(i,n)}return $()}function e2(t,e){return t&&t.length>0?(z(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Et(i.updateTime):Et(s);return o.isEqual(W.min())&&(o=Et(s)),new Dv(o,i.transformResults||[])}(n,e))):[]}function ZS(t,e){return{documents:[KS(t,e.path)]}}function JS(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KS(t,i);let s=function(l){if(l.length!==0)return tA(Ce.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:so(m.field),direction:n2(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Mv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function XS(t){let e=QS(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){z(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=eA(p);return m instanceof Ce&&K_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(b){return new vo(oo(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,qh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Ur(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Ur(y,m)}(n.endAt)),Mj(e,i,o,s,a,"F",u,l)}function t2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=oo(n.unaryFilter.field);return pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=oo(n.unaryFilter.field);return pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=oo(n.unaryFilter.field);return pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=oo(n.unaryFilter.field);return pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(t):t.fieldFilter!==void 0?function(n){return pe.create(oo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ce.create(n.compositeFilter.filters.map(r=>eA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $()}}(n.compositeFilter.op))}(t):$()}function n2(t){return Kj[t]}function r2(t){return Qj[t]}function i2(t){return Yj[t]}function so(t){return{fieldPath:t.canonicalString()}}function oo(t){return Ye.fromServerFormat(t.fieldPath)}function tA(t){return t instanceof pe?function(n){if(n.op==="=="){if(C0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(D0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(D0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:r2(n.op),value:n.value}}}(t):t instanceof Ce?function(n){let r=n.getFilters().map(i=>tA(i));return r.length===1?r[0]:{compositeFilter:{op:i2(n.op),filters:r}}}(t):$()}function s2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var bo=class t{constructor(e,n,r,i,s=W.min(),o=W.min(),a=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ph=class{constructor(e){this.ct=e}};function o2(t,e){let n;if(e.document)n=Jj(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=U.fromSegments(e.noDocument.path),i=qi(e.noDocument.readTime);n=st.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return $();{let r=U.fromSegments(e.unknownDocument.path),i=qi(e.unknownDocument.version);n=st.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new ke(i[0],i[1]);return W.fromTimestamp(s)}(e.readTime)),n}function $0(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:gh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:hh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Co(s,o.version.toTimestamp()),createTime:Co(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zi(e.version)};else{if(!e.isUnknownDocument())return $();r.unknownDocument={path:n.path.toArray(),version:zi(e.version)}}return r}function gh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qi(t){let e=new ke(t.seconds,t.nanoseconds);return W.fromTimestamp(e)}function xi(t,e){let n=(e.baseMutations||[]).map(s=>xv(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>xv(t.ct,s)),i=ke.fromMillis(e.localWriteTimeMs);return new Sc(e.batchId,i,n,r)}function mc(t){let e=qi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?qi(t.lastLimboFreeSnapshotVersion):W.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return z(s.documents.length===1),Yt(Wh(QS(s.documents[0])))}(t.query):function(s){return Yt(XS(s))}(t.query),new bo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ze.fromBase64String(t.resumeToken))}function rA(t,e){let n=zi(e.snapshotVersion),r=zi(e.lastLimboFreeSnapshotVersion),i;i=sh(e.target)?ZS(t.ct,e.target):JS(t.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iA(t){let e=XS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wv(e,e.limit,"L"):e}function Wy(t,e){return new Ac(e.largestBatchId,xv(t.ct,e.overlayMutation))}function H0(t,e){let n=e.path.lastSegment();return[t,wt(e.path.popLast()),n]}function z0(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:zi(r.readTime),documentKey:wt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Pv=class{getBundleMetadata(e,n){return q0(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:qi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return q0(e).put(function(i){return{bundleId:i.id,createTime:zi(Et(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return G0(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:iA(s.bundledQuery),readTime:qi(s.readTime)}}(r)})}saveNamedQuery(e,n){return G0(e).put(function(i){return{name:i.name,readTime:zi(Et(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function q0(t){return Je(t,"bundles")}function G0(t){return Je(t,"namedQueries")}var mh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return dc(e).get(H0(this.userId,n)).next(r=>r?Wy(this.serializer,r):null)}getOverlays(e,n){let r=Tn();return A.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new Ac(n,o);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(wt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(dc(e).j("collectionPathOverlayIndex",a))}),A.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Tn(),s=wt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return dc(e).U("collectionPathOverlayIndex",o).next(a=>{for(let u of a){let l=Wy(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Tn(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return dc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Wy(this.serializer,l);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return dc(e).put(function(i,s,o){let[a,u,l]=H0(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:fh(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function dc(t){return Je(t,"documentOverlays")}var Ov=class{Pt(e){return Je(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?Ze.fromUint8Array(r):Ze.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var Zn=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ec(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Xn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Lr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?bS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Gh(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):$()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ne(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),U.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Zn.vt=new Zn;function a2(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function W0(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=a2(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var kv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let n=this.qt(e),r=W0(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){let n=this.qt(e),r=W0(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Fv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Lv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Pi=class{constructor(){this.jt=new kv,this.Ht=new Fv(this.jt),this.Jt=new Lv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Oi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Nr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=K0(t.arrayValue,e.arrayValue),n!==0?n:(n=K0(t.directionalValue,e.directionalValue),n!==0?n:U.comparator(t.documentKey,e.documentKey)))}function K0(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var yh=class{constructor(e){this.Xt=new Ae((n,r)=>Ye.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(z(e.collectionGroup===this.collectionId),this.nn)return!1;let n=rv(e);if(n!==void 0&&!this.sn(n))return!1;let r=Ri(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Ye.comparator),n=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new uo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new uo(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new uo(r.field,r.dir==="asc"?0:1)));return new po(po.UNKNOWN_ID,this.collectionId,n,wc.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function sA(t){var e,n;if(z(t instanceof pe||t instanceof Ce),t instanceof pe){if(t instanceof ih){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>pe.create(t.field,"==",s)))||[];return Ce.create(i,"or")}return t}let r=t.filters.map(i=>sA(i));return Ce.create(r,t.op)}function c2(t){if(t.getFilters().length===0)return[];let e=jv(sA(t));return z(oA(e)),Vv(e)||Uv(e)?[e]:e.getFilters()}function Vv(t){return t instanceof pe}function Uv(t){return t instanceof Ce&&K_(t)}function oA(t){return Vv(t)||Uv(t)||function(n){if(n instanceof Ce&&dv(n)){for(let r of n.getFilters())if(!Vv(r)&&!Uv(r))return!1;return!0}return!1}(t)}function jv(t){if(z(t instanceof pe||t instanceof Ce),t instanceof pe)return t;if(t.filters.length===1)return jv(t.filters[0]);let e=t.filters.map(r=>jv(r)),n=Ce.create(e,t.op);return n=vh(n),oA(n)?n:(z(n instanceof Ce),z(_o(n)),z(n.filters.length>1),n.filters.reduce((r,i)=>Z_(r,i)))}function Z_(t,e){let n;return z(t instanceof pe||t instanceof Ce),z(e instanceof pe||e instanceof Ce),n=t instanceof pe?e instanceof pe?function(i,s){return Ce.create([i,s],"and")}(t,e):Q0(t,e):e instanceof pe?Q0(e,t):function(i,s){if(z(i.filters.length>0&&s.filters.length>0),_o(i)&&_o(s))return RS(i,s.getFilters());let o=dv(i)?i:s,a=dv(i)?s:i,u=o.filters.map(l=>Z_(l,a));return Ce.create(u,"or")}(t,e),vh(n)}function Q0(t,e){if(_o(e))return RS(e,t.getFilters());{let n=e.filters.map(r=>Z_(t,r));return Ce.create(n,"or")}}function vh(t){if(z(t instanceof pe||t instanceof Ce),t instanceof pe)return t;let e=t.getFilters();if(e.length===1)return vh(e[0]);if(AS(t))return t;let n=e.map(i=>vh(i)),r=[];return n.forEach(i=>{i instanceof pe?r.push(i):i instanceof Ce&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ce.create(r,t.op)}var Bv=class{constructor(){this.un=new Rc}addToCollectionParentIndex(e,n){return this.un.add(n),A.resolve()}getCollectionParents(e,n){return A.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return A.resolve()}deleteFieldIndex(e,n){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,n){return A.resolve()}getDocumentsMatchingTarget(e,n){return A.resolve(null)}getIndexType(e,n){return A.resolve(0)}getFieldIndexes(e,n){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,n){return A.resolve(Zt.min())}getMinOffsetFromCollectionGroup(e,n){return A.resolve(Zt.min())}updateCollectionGroup(e,n,r){return A.resolve()}updateIndexEntries(e,n){return A.resolve()}},Rc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(Se.comparator)).toArray()}};var jd=new Uint8Array(0),$v=class{constructor(e,n){this.databaseId=n,this.cn=new Rc,this.ln=new Mn(r=>Bi(r),(r,i)=>Lc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let s={collectionId:r,parent:wt(i)};return Y0(e).put(s)}return A.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[mS(n),""],!1,!0);return Y0(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(bn(o.parent))}return r})}addFieldIndex(e,n){let r=hc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=to(e);return s.next(a=>{o.put(z0(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=hc(e),i=to(e),s=eo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=hc(e),r=eo(e),i=to(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return A.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new yh(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=eo(e),i=!0,s=new Map;return A.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se(),a=[];return A.forEach(s,(u,l)=>{P("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(u)} to execute ${Bi(n)}`);let h=function(V,K){let re=rv(K);if(re===void 0)return null;for(let H of oh(V,re.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(l,u),p=function(V,K){let re=new Map;for(let H of Ri(K))for(let w of oh(V,H.fieldPath))switch(w.op){case"==":case"in":re.set(H.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return re.set(H.fieldPath.canonicalString(),w.value),Array.from(re.values())}return null}(l,u),m=function(V,K){let re=[],H=!0;for(let w of Ri(K)){let v=w.kind===0?M0(V,w.fieldPath,V.startAt):R0(V,w.fieldPath,V.startAt);re.push(v.value),H&&(H=v.inclusive)}return new Ur(re,H)}(l,u),y=function(V,K){let re=[],H=!0;for(let w of Ri(K)){let v=w.kind===0?R0(V,w.fieldPath,V.endAt):M0(V,w.fieldPath,V.endAt);re.push(v.value),H&&(H=v.inclusive)}return new Ur(re,H)}(l,u),b=this.In(u,l,m),N=this.In(u,l,y),R=this.Tn(u,l,p),F=this.En(u.indexId,h,b,m.inclusive,N,y.inclusive,R);return A.forEach(F,j=>r.G(j,n.limit).next(V=>{V.forEach(K=>{let re=U.fromSegments(K.documentKey);o.has(re)||(o=o.add(re),a.push(re))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=c2(Ce.create(e.filters,"and")).map(r=>Iv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){let u=(n!=null?n.length:1)*Math.max(r.length,s.length),l=u/(n!=null?n.length:1),h=[];for(let p=0;p<u;++p){let m=n?this.dn(n[p/l]):jd,y=this.An(e,m,r[p%l],i),b=this.Rn(e,m,s[p%l],o),N=a.map(R=>this.An(e,m,R,!0));h.push(...this.createRange(y,b,N))}return h}An(e,n,r,i){let s=new Oi(e,U.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){let s=new Oi(e,U.empty(),n,r);return i?s.Zt():s}Pn(e,n){let r=new yh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.hn(n);return A.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let l=new Ae(Ye.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){let r=new Pi;for(let i of Ri(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);Zn.vt.It(s,o)}return r.zt()}dn(e){let n=new Pi;return Zn.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let r=new Pi;return Zn.vt.It(W_(this.databaseId,n),r.Yt(function(s){let o=Ri(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Pi);let s=0;for(let o of Ri(e)){let a=r[s++];for(let u of i)if(this.fn(n,o.fieldPath)&&Tc(a))i=this.gn(i,o,a);else{let l=u.Yt(o.kind);Zn.vt.It(a,l)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let u=new Pi;u.seed(a.zt()),Zn.vt.It(o,u.Yt(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=hc(e),i=to(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{let o=[];return A.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,p){let m=p?new wc(p.sequenceNumber,new Zt(qi(p.readTime),new U(bn(p.documentKey)),p.largestBatchId)):wc.empty(),y=h.fields.map(([b,N])=>new uo(Ye.fromServerFormat(b),N));return new po(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:X(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=hc(e),s=to(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>A.forEach(a,u=>s.put(z0(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return A.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?A.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(s,u);return l.isEqual(h)?A.resolve():this.bn(e,s,u,l,h)}))))})}Dn(e,n,r,i){return eo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return eo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){let i=eo(e),s=new Ae(Nr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Oi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ae(Nr),i=this.Vn(n,e);if(i==null)return r;let s=rv(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Tc(o))for(let a of o.arrayValue.values||[])r=r.add(new Oi(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Oi(n.indexId,e.key,jd,i));return r}bn(e,n,r,i,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(u,l,h,p,m){let y=u.getIterator(),b=l.getIterator(),N=Xs(y),R=Xs(b);for(;N||R;){let F=!1,j=!1;if(N&&R){let V=h(N,R);V<0?j=!0:V>0&&(F=!0)}else N!=null?j=!0:F=!0;F?(p(R),R=Xs(b)):j?(m(N),N=Xs(y)):(N=Xs(y),R=Xs(b))}}(i,s,Nr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),A.waitFor(o)}yn(e){let n=1;return to(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Nr(o,a)).filter((o,a,u)=>!a||Nr(o,u[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Nr(o,e),u=Nr(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,jd,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,jd,[]];s.push(IDBKeyRange.bound(a,u))}return s}Cn(e,n){return Nr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Z0)}getMinOffset(e,n){return A.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||$())).next(Z0)}};function Y0(t){return Je(t,"collectionParents")}function eo(t){return Je(t,"indexEntries")}function hc(t){return Je(t,"indexConfiguration")}function to(t){return Je(t,"indexState")}function Z0(t){z(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;$_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Zt(e.readTime,e.documentKey,n)}var J0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function aA(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:o},(h,p,m)=>(a++,m.delete()));s.push(u.next(()=>{z(a===1)}));let l=[];for(let h of n.mutations){let p=IS(e,h.key.path,n.batchId);s.push(i.delete(p)),l.push(h.key)}return A.waitFor(s).next(()=>l)}function _h(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw $();e=t.noDocument}return JSON.stringify(e).length}Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(41943040,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);var Ih=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){z(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=ao(e),o=xr(e);return o.add({}).next(a=>{z(typeof a=="number");let u=new Sc(a,n,r,i),l=function(y,b,N){let R=N.baseMutations.map(j=>fh(y.ct,j)),F=N.mutations.map(j=>fh(y.ct,j));return{userId:b,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:R,mutations:F}}(this.serializer,this.userId,u),h=[],p=new Ae((m,y)=>X(m.canonicalString(),y.canonicalString()));for(let m of i){let y=IS(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(y,aj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),A.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return xr(e).get(n).next(r=>r?(z(r.userId===this.userId),xi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?A.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return xr(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(z(a.batchId>=r),s=xi(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return xr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xr(e).U("userMutationsIndex",n).next(r=>r.map(i=>xi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=zd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ao(e).J({range:i},(o,a,u)=>{let[l,h,p]=o,m=bn(h);if(l===this.userId&&n.path.isEqual(m))return xr(e).get(p).next(y=>{if(!y)throw $();z(y.userId===this.userId),s.push(xi(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(X),i=[];return n.forEach(s=>{let o=zd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=ao(e).J({range:a},(l,h,p)=>{let[m,y,b]=l,N=bn(y);m===this.userId&&s.path.isEqual(N)?r=r.add(b):p.done()});i.push(u)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=zd(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ae(X);return ao(e).J({range:o},(u,l,h)=>{let[p,m,y]=u,b=bn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(xr(e).get(s).next(o=>{if(o===null)throw $();z(o.userId===this.userId),r.push(xi(this.serializer,o))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return aA(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return A.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ao(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let u=bn(s[1]);i.push(u)}else a.done()}).next(()=>{z(i.length===0)})})}containsKey(e,n){return cA(e,this.userId,n)}Nn(e){return uA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function cA(t,e,n){let r=zd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return ao(t).J({range:s,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(o=!0),l.done()}).next(()=>o)}function xr(t){return Je(t,"mutations")}function ao(t){return Je(t,"documentMutations")}function uA(t){return Je(t,"mutationQueues")}var To=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Hv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let r=new To(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>W.fromTimestamp(new ke(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>no(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return no(e).J((o,a)=>{let u=mc(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>A.waitFor(s)).next(()=>i)}forEachTarget(e,n){return no(e).J((r,i)=>{let s=mc(i);n(s)})}qn(e){return X0(e).get("targetGlobalKey").next(n=>(z(n!==null),n))}Qn(e,n){return X0(e).put("targetGlobalKey",n)}Kn(e,n){return no(e).put(rA(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Bi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return no(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{let l=mc(a);Lc(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Pr(e);return n.forEach(o=>{let a=wt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),A.waitFor(i)}removeMatchingKeys(e,n,r){let i=Pr(e);return A.forEach(n,s=>{let o=wt(s.path);return A.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Pr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Pr(e),s=se();return i.J({range:r,H:!0},(o,a,u)=>{let l=bn(o[1]),h=new U(l);s=s.add(h)}).next(()=>s)}containsKey(e,n){let r=wt(n.path),i=IDBKeyRange.bound([r],[mS(r)],!1,!0),s=0;return Pr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,n){return no(e).get(n).next(r=>r?mc(r):null)}};function no(t){return Je(t,"targets")}function X0(t){return Je(t,"targetGlobal")}function Pr(t){return Je(t,"targetDocuments")}function eS([t,e],[n,r]){let i=X(t,n);return i===0?X(e,r):i}var zv=class{constructor(e){this.Un=e,this.buffer=new Ae(eS),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();eS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},qv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){zr(n)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Gi(n)}yield this.Hn(3e5)}))}},Gv=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return A.resolve(ln.oe);let r=new zv(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(J0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J0):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ro()<=de.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function u2(t,e){return new Gv(t,e)}var Wv=class{constructor(e,n){this.db=e,this.garbageCollector=u2(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Bd(e,r)}removeReference(e,n,r){return Bd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Bd(e,n)}nr(e,n){return function(i,s){let o=!1;return uA(i).Y(a=>cA(i,a,s).next(u=>(u&&(o=!0),A.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=n){let u=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,W.min()),Pr(e).delete(function(p){return[0,wt(p.path)]}(o))))});i.push(u)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Bd(e,n)}tr(e,n){let r=Pr(e),i,s=ln.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{o===0?(s!==ln.oe&&n(new U(bn(i)),s),s=l,i=u):s=ln.oe}).next(()=>{s!==ln.oe&&n(new U(bn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Bd(t,e){return Pr(t).put(function(r,i){return{targetId:0,path:wt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var wh=class{constructor(){this.changes=new Mn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?A.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Kv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Mi(e).put(r)}removeEntry(e,n,r){return Mi(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],gh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=st.newInvalidDocument(n);return Mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fc(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:st.newInvalidDocument(n)};return Mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fc(n))},(i,s)=>{r={document:this.ir(n,s),size:_h(s)}}).next(()=>r)}getEntries(e,n){let r=kt();return this._r(e,n,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=kt(),i=new Fe(U.comparator);return this._r(e,n,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,_h(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return A.resolve();let i=new Ae(rS);n.forEach(u=>i=i.add(u));let s=IDBKeyRange.bound(fc(i.first()),fc(i.last())),o=i.getIterator(),a=o.getNext();return Mi(e).J({index:"documentKeyIndex",range:s},(u,l,h)=>{let p=U.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rS(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(fc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),gh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=kt();for(let p of l){let m=this.ir(U.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Vc(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=kt(),o=nS(n,r),a=nS(n,Zt.max());return Mi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{let p=this.ir(U.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new Qv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return tS(e).get("remoteDocumentGlobalKey").next(n=>(z(!!n),n))}rr(e,n){return tS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let r=o2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(W.min())))return r}return st.newInvalidDocument(e)}};function lA(t){return new Kv(t)}var Qv=class extends wh{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Mn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ae((s,o)=>X(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let u=$0(this.cr.serializer,o);i=i.add(s.path.popLast());let l=_h(u);r+=l-a.size,n.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){let u=$0(this.cr.serializer,o.convertToNoDocument(W.min()));n.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),A.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function tS(t){return Je(t,"remoteDocumentGlobal")}function Mi(t){return Je(t,"remoteDocumentsV14")}function fc(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nS(t,e){let n=e.documentKey.path.toArray();return[t,gh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function rS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=X(n[s],r[s]),i)return i;return i=X(n.length,r.length),i||(i=X(n[n.length-2],r[r.length-2]),i||X(n[n.length-1],r[r.length-1]))}var Yv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Eh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ic(r.mutation,i,Ot.empty(),ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){let i=Tn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Tn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=kt(),o=_c(),a=function(){return _c()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof hn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Ic(h.mutation,l,h.mutation.getFieldMask(),ke.now())):o.set(l.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Yv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=_c(),i=new Fe((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Ot.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=LS();h.forEach(m=>{if(!s.has(m)){let y=HS(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return U.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Rj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):A.resolve(Tn()),a=-1,u=s;return o.next(l=>A.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:a,changes:FS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=gc();return this.indexManager.getCollectionParents(e,s).next(a=>A.forEach(a,u=>{let l=function(p,m){return new Io(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,st.newInvalidDocument(h)))});let a=gc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Ic(h.mutation,l,Ot.empty(),ke.now()),Vc(n,l)&&(a=a.insert(u,l))}),a})}};var Zv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return A.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Et(i.createTime)}}(n)),A.resolve()}getNamedQuery(e,n){return A.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:iA(i.bundledQuery),readTime:Et(i.readTime)}}(n)),A.resolve()}};var Jv=class{constructor(){this.overlays=new Fe(U.comparator),this.Ir=new Map}getOverlay(e,n){return A.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Tn();return A.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),A.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,n,r){let i=Tn(),s=n.length+1,o=new U(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Tn(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Tn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ac(n,r));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Xv=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,A.resolve()}};var Nc=class{constructor(){this.Tr=new Ae(qe.Er),this.dr=new Ae(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new U(new Se([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new U(new Se([])),r=new qe(n,e),i=new qe(n,e+1),s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return U.comparator(e.key,n.key)||X(e.wr,n.wr)}static Ar(e,n){return X(e.wr,n.wr)||U.comparator(e.key,n.key)}};var e_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ae(qe.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Sc(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(o)}lookupMutationBatch(e,n){return A.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return A.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),A.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(X);return n.forEach(i=>{let s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let o=new qe(new U(s),0),a=new Ae(X);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),A.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){z(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(n.mutations,i=>{let s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return A.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var t_=class{constructor(e){this.Mr=e,this.docs=function(){return new Fe(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return A.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=kt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=kt(),o=n.path,a=new U(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||$_(yS(h),r)<=0||(i.has(h.key)||Vc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return A.resolve(s)}getAllFromCollectionGroup(e,n,r,i){$()}Or(e,n){return A.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new n_(this)}getSize(e){return A.resolve(this.size)}},n_=class extends wh{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var r_=class{constructor(e){this.persistence=e,this.Nr=new Mn(n=>Bi(n),Lc),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nc,this.targetCount=0,this.kr=To.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),A.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new To(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,A.resolve()}updateTargetData(e,n){return this.Kn(n),A.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(s).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return A.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),A.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),A.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),A.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return A.resolve(r)}containsKey(e,n){return A.resolve(this.Br.containsKey(n))}};var Dh=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ln(0),this.Kr=!1,this.Kr=!0,this.$r=new Xv,this.referenceDelegate=e(this),this.Ur=new r_(this),this.indexManager=new Bv,this.remoteDocumentCache=function(i){return new t_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ph(n),this.Gr=new Zv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new e_(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);let i=new i_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},i_=class extends Xd{constructor(e){super(),this.currentSequenceNumber=e}},Ch=class t{constructor(e){this.persistence=e,this.Jr=new Nc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw $()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),A.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=U.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,W.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return A.or([()=>A.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var s_=class{constructor(e){this.serializer=e}O(e,n,r,i){let s=new eh("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0}),u.createObjectStore("documentMutations")}(e),iS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=A.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),iS(e)),o=o.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:W.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return A.waitFor(m)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:_j});l.createIndex("collectionPathOverlayIndex",Ij,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",wj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:cj});l.createIndex("documentKeyIndex",uj),l.createIndex("collectionGroupIndex",lj)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:gj}).createIndex("sequenceNumberIndex",mj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:yj}).createIndex("documentKeyIndex",vj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=_h(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>A.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>A.forEach(a,u=>{z(u.userId===s.userId);let l=xi(this.serializer,u);return aA(e,s.userId,l).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let u=new Se(o),l=function(p){return[0,wt(p)]}(u);s.push(n.get(l).next(h=>h?A.resolve():(p=>n.put({targetId:0,path:wt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>A.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:pj});let r=n.store("collectionParents"),i=new Rc,s=o=>{if(i.add(o)){let a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:wt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let u=new Se(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],l)=>{let h=bn(a);return s(h.popLast())}))}oi(e){let n=e.store("targets");return n.J((r,i)=>{let s=mc(i),o=rA(this.serializer,s);return n.put(o)})}_i(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=n.store("remoteDocumentsV14"),u=function(p){return p.document?new U(Se.fromString(p.document.name).popFirst(5)):p.noDocument?U.fromSegments(p.noDocument.path):p.unknownDocument?U.fromSegments(p.unknownDocument.path):$()}(o).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,n){let r=n.store("mutations"),i=lA(this.serializer),s=new Dh(Ch.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:se();xi(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),A.forEach(a,(u,l)=>{let h=new Qe(l),p=mh.lt(this.serializer,h),m=s.getIndexManager(h),y=Ih.lt(h,this.serializer,m,s.referenceDelegate);return new Eh(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Dc(n,ln.oe),u).next()})})}};function iS(t){t.createObjectStore("targetDocuments",{keyPath:hj}).createIndex("documentTargetsIndex",fj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dj,{unique:!0}),t.createObjectStore("targetGlobal")}var Ky="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",o_=class t{constructor(e,n,r,i,s,o,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!t.D())throw new B(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wv(this,i),this.Ai=n+"main",this.serializer=new ph(u),this.Ri=new go(this.Ai,this.hi,new s_(this.serializer)),this.$r=new Ov,this.Ur=new Hv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lA(this.serializer),this.Gr=new Pv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&_t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(x.FAILED_PRECONDITION,Ky);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ln(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>S(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>S(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>S(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$d(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(zr(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return pc(e).get("owner").next(n=>A.resolve(this.vi(n)))}Ci(e){return $d(e).delete(this.clientId)}Fi(){return S(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Je(n,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return A.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):pc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new B(x.FAILED_PRECONDITION,Ky);return!1}}return!(!this.networkEnabled||!this.inForeground)||$d(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&P("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return S(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Dc(e,ln.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>$d(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Ih.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $v(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return mh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){P("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===17?Cj:u===16?Dj:u===15?z_:u===14?DS:u===13?ES:u===12?Ej:u===11?wS:void $()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Dc(a,this.Qr?this.Qr.next():ln.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new B(x.FAILED_PRECONDITION,vS);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return pc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(x.FAILED_PRECONDITION,Ky)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pc(e).put("owner",n)}static D(){return go.D()}bi(e){let n=pc(e);return n.get("owner").next(r=>this.vi(r)?(P("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):A.resolve())}Mi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;sy()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function pc(t){return Je(t,"owner")}function $d(t){return Je(t,"clientMetadata")}function l2(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var a_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=se(),i=se();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var c_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var bh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sy()?8:_S(lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new c_;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ro()<=de.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(ro()<=de.DEBUG&&P("QueryEngine","Query:",io(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ro()<=de.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yt(n))):A.resolve())}Yi(e,n){if(N0(n))return A.resolve(null);let r=Yt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wv(n,null,"F"),r=Yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,wv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return N0(n)||i.isEqual(W.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?A.resolve(null):(ro()<=de.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),io(n)),this.rs(e,o,n,ij(i,-1)).next(a=>a))})}ts(e,n){let r=new Ae(OS(e));return n.forEach((i,s)=>{Vc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ro()<=de.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",io(n)),this.Ji.getDocumentsMatchingQuery(e,n,Zt.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var u_=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Fe(X),this._s=new Mn(s=>Bi(s),Lc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function dA(t,e,n,r){return new u_(t,e,n,r)}function hA(t,e){return S(this,null,function*(){let n=Z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=se();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function d2(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=A.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(N=>{let R=l.docVersions.get(b);z(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fA(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function h2(t,e){let n=Z(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ze.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,F){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=kt(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(f2(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(W.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function f2(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=kt();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function p2(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g2(t,e){let n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,A.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new bo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function l_(t,e,n){return S(this,null,function*(){let r=Z(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!zr(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function sS(t,e,n){let r=Z(t),i=W.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Z(u),m=p._s.get(h);return m!==void 0?A.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Yt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:W.min(),n?s:se())).next(a=>(m2(r,xj(e),a),{documents:a,Ts:s})))}function m2(t,e,n){let r=t.us.get(e)||W.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Th=class{constructor(){this.activeTargetIds=Vj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Sh=class{constructor(){this.so=new Th,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Th,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var d_=class{_o(e){}shutdown(){}};var Ah=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hd=null;function Qy(){return Hd===null?Hd=function(){return 268435456+Math.round(2147483648*Math.random())}():Hd++,"0x"+Hd.toString(16)}var y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var h_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var dt="WebChannelConnection",f_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Qy(),u=this.xo(n,r.toUriEncodedString());P("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(P("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Fr("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=y2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Qy();return new Promise((o,a)=>{let u=new By;u.setWithCredentials(!0),u.listenOnce(Hy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case lc.NO_ERROR:let h=u.getResponseJson();P(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case lc.TIMEOUT:P(dt,`RPC '${e}' ${s} timed out`),a(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case lc.HTTP_ERROR:let p=u.getStatus();if(P(dt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(F)>=0?F:x.UNKNOWN}(y.status);a(new B(b,y.message))}else a(new B(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new B(x.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{P(dt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);P(dt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Qy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gy(),a=qy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new $y({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");P(dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,y=!1,b=new h_({Io:R=>{y?P(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(P(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(dt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,F,j)=>{R.listen(F,V=>{try{j(V)}catch(K){setTimeout(()=>{throw K},0)}})};return N(p,Js.EventType.OPEN,()=>{y||(P(dt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),N(p,Js.EventType.CLOSE,()=>{y||(y=!0,P(dt,`RPC '${e}' stream ${i} transport closed`),b.So())}),N(p,Js.EventType.ERROR,R=>{y||(y=!0,Fr(dt,`RPC '${e}' stream ${i} transport errored:`,R),b.So(new B(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,Js.EventType.MESSAGE,R=>{var F;if(!y){let j=R.data[0];z(!!j);let V=j,K=V.error||((F=V[0])===null||F===void 0?void 0:F.error);if(K){P(dt,`RPC '${e}' stream ${i} received error:`,K);let re=K.status,H=function(_){let E=ze[_];if(E!==void 0)return qS(E)}(re),w=K.message;H===void 0&&(H=x.INTERNAL,w="Unknown error status: "+re+" with message "+K.message),y=!0,b.So(new B(H,w)),p.close()}else P(dt,`RPC '${e}' stream ${i} received:`,j),b.bo(j)}}),N(a,zy.STAT_EVENT,R=>{R.stat===Ud.PROXY?P(dt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Ud.NOPROXY&&P(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function v2(){return typeof window<"u"?window:null}function Kd(){return typeof document<"u"?document:null}function Qh(t){return new Av(t,!0)}var Mh=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Rh=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mh(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return S(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return S(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return S(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new B(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>S(this,null,function*(){this.state=0,this.start()}))}I_(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},p_=class extends Rh{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=Xj(this.serializer,e),r=function(s){if(!("targetChange"in s))return W.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?W.min():o.readTime?Et(o.readTime):W.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Nv(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=sh(u)?{documents:ZS(s,u)}:{query:JS(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=GS(s,o.resumeToken);let l=Mv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(W.min())>0){a.readTime=Co(s,o.snapshotVersion.toTimestamp());let l=Mv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=t2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Nv(this.serializer),n.removeTarget=e,this.a_(n)}},g_=class extends Rh{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return z(!!e.streamToken),this.lastStreamToken=e.streamToken,z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=e2(e.writeResults,e.commitTime),r=Et(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Nv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>fh(this.serializer,r))};this.a_(n)}};var m_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Rv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Rv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},y_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_t(n),this.D_=!1):P("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var v_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>S(this,null,function*(){Ki(this)&&(P("RemoteStore","Restarting streams for network reachability change."),yield function(u){return S(this,null,function*(){let l=Z(u);l.L_.add(4),yield Uc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Yh(l)})}(this))}))}),this.q_=new y_(r,i)}};function Yh(t){return S(this,null,function*(){if(Ki(t))for(let e of t.B_)yield e(!0)})}function Uc(t){return S(this,null,function*(){for(let e of t.B_)yield e(!1)})}function pA(t,e){let n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),tI(n)?eI(n):No(n).r_()&&X_(n,e))}function J_(t,e){let n=Z(t),r=No(n);n.N_.delete(e),r.r_()&&gA(n,e),n.N_.size===0&&(r.r_()?r.o_():Ki(n)&&n.q_.set("Unknown"))}function X_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).A_(e)}function gA(t,e){t.Q_.xe(e),No(t).R_(e)}function eI(t){t.Q_=new Sv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),No(t).start(),t.q_.v_()}function tI(t){return Ki(t)&&!No(t).n_()&&t.N_.size>0}function Ki(t){return Z(t).L_.size===0}function mA(t){t.Q_=void 0}function _2(t){return S(this,null,function*(){t.q_.set("Online")})}function I2(t){return S(this,null,function*(){t.N_.forEach((e,n)=>{X_(t,e)})})}function w2(t,e){return S(this,null,function*(){mA(t),tI(t)?(t.q_.M_(e),eI(t)):t.q_.set("Unknown")})}function E2(t,e,n){return S(this,null,function*(){if(t.q_.set("Online"),e instanceof lh&&e.state===2&&e.cause)try{yield function(i,s){return S(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Nh(t,r)}else if(e instanceof lo?t.Q_.Ke(e):e instanceof uh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(W.min()))try{let r=yield fA(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),gA(s,u);let p=new bo(h.target,u,l,h.sequenceNumber);X_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){P("RemoteStore","Failed to raise snapshot:",r),yield Nh(t,r)}})}function Nh(t,e,n){return S(this,null,function*(){if(!zr(e))throw e;t.L_.add(1),yield Uc(t),t.q_.set("Offline"),n||(n=()=>fA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){P("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Yh(t)}))})}function yA(t,e){return e().catch(n=>Nh(t,n,e))}function jc(t){return S(this,null,function*(){let e=Z(t),n=Hr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;D2(e);)try{let i=yield p2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,C2(e,i)}catch(i){yield Nh(e,i)}vA(e)&&_A(e)})}function D2(t){return Ki(t)&&t.O_.length<10}function C2(t,e){t.O_.push(e);let n=Hr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vA(t){return Ki(t)&&!Hr(t).n_()&&t.O_.length>0}function _A(t){Hr(t).start()}function b2(t){return S(this,null,function*(){Hr(t).p_()})}function T2(t){return S(this,null,function*(){let e=Hr(t);for(let n of t.O_)e.m_(n.mutations)})}function S2(t,e,n){return S(this,null,function*(){let r=t.O_.shift(),i=Cv.from(r,e,n);yield yA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield jc(t)})}function A2(t,e){return S(this,null,function*(){e&&Hr(t).V_&&(yield function(r,i){return S(this,null,function*(){if(function(o){return qj(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();Hr(r).s_(),yield yA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield jc(r)}})}(t,e)),vA(t)&&_A(t)})}function oS(t,e){return S(this,null,function*(){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");let r=Ki(n);n.L_.add(3),yield Uc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Yh(n)})}function M2(t,e){return S(this,null,function*(){let n=Z(t);e?(n.L_.delete(2),yield Yh(n)):e||(n.L_.add(2),yield Uc(n),n.q_.set("Unknown"))})}function No(t){return t.K_||(t.K_=function(n,r,i){let s=Z(n);return s.w_(),new p_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:_2.bind(null,t),Ro:I2.bind(null,t),mo:w2.bind(null,t),d_:E2.bind(null,t)}),t.B_.push(e=>S(this,null,function*(){e?(t.K_.s_(),tI(t)?eI(t):t.q_.set("Unknown")):(yield t.K_.stop(),mA(t))}))),t.K_}function Hr(t){return t.U_||(t.U_=function(n,r,i){let s=Z(n);return s.w_(),new g_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b2.bind(null,t),mo:A2.bind(null,t),f_:T2.bind(null,t),g_:S2.bind(null,t)}),t.B_.push(e=>S(this,null,function*(){e?(t.U_.s_(),yield jc(t)):(yield t.U_.stop(),t.O_.length>0&&(P("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var __=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nI(t,e){if(_t("AsyncQueue",`${e}: ${t}`),zr(t))return new B(x.UNAVAILABLE,`${e}: ${t}`);throw t}var xh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ph=class{constructor(){this.W_=new Fe(U.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):$():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},So=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,xh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var I_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},w_=class{constructor(){this.queries=aS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Z(n),s=i.queries;i.queries=aS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new B(x.ABORTED,"Firestore shutting down"))}};function aS(){return new Mn(t=>PS(t),Kh)}function R2(t,e){return S(this,null,function*(){let n=Z(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new I_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=nI(o,`Initialization of query '${io(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&rI(n)})}function N2(t,e){return S(this,null,function*(){let n=Z(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function x2(t,e){let n=Z(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&rI(n)}function P2(t,e,n){let r=Z(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function rI(t){t.Y_.forEach(e=>{e.next()})}var E_,cS;(cS=E_||(E_={})).ea="default",cS.Cache="cache";var D_=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new So(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==E_.Cache}};var Oh=class{constructor(e){this.key=e}},kh=class{constructor(e){this.key=e}},C_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=OS(e),this.Ra=new xh(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Ph,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Vc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?b!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,b){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return N(y)-N(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new So(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ph,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new kh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Oh(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return So.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},b_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},T_=class{constructor(e){this.key=e,this.va=!1}},S_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Mn(a=>PS(a),Kh),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(U.comparator),this.Na=new Map,this.La=new Nc,this.Ba={},this.ka=new Map,this.qa=To.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function O2(t,e,n=!0){return S(this,null,function*(){let r=bA(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield IA(r,e,n,!0),i})}function k2(t,e){return S(this,null,function*(){let n=bA(t);yield IA(n,e,!0,!1)})}function IA(t,e,n,r){return S(this,null,function*(){let i=yield g2(t.localStore,Yt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield F2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&pA(t.remoteStore,i),a})}function F2(t,e,n,r,i){return S(this,null,function*(){t.Ka=(p,m,y)=>function(N,R,F,j){return S(this,null,function*(){let V=R.view.ma(F);V.ns&&(V=yield sS(N.localStore,R.query,!1).then(({documents:w})=>R.view.ma(w,V)));let K=j&&j.targetChanges.get(R.targetId),re=j&&j.targetMismatches.get(R.targetId)!=null,H=R.view.applyChanges(V,N.isPrimaryClient,K,re);return lS(N,R.targetId,H.wa),H.snapshot})}(t,p,m,y);let s=yield sS(t.localStore,e,!0),o=new C_(e,s.Ts),a=o.ma(s.documents),u=Mc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);lS(t,n,l.wa);let h=new b_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function L2(t,e,n){return S(this,null,function*(){let r=Z(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Kh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield l_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&J_(r.remoteStore,i.targetId),A_(r,i.targetId)}).catch(Gi))):(A_(r,i.targetId),yield l_(r.localStore,i.targetId,!0))})}function V2(t,e){return S(this,null,function*(){let n=Z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),J_(n.remoteStore,r.targetId))})}function U2(t,e,n){return S(this,null,function*(){let r=TA(t);try{let i=yield function(o,a){let u=Z(o),l=ke.now(),h=a.reduce((y,b)=>y.add(b.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=kt(),N=se();return u.cs.getEntries(y,h).next(R=>{b=R,b.forEach((F,j)=>{j.isValidDocument()||(N=N.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(R=>{p=R;let F=[];for(let j of a){let V=zj(j,p.get(j.key).overlayedDocument);V!=null&&F.push(new hn(j.key,V,SS(V.value.mapValue),Ft.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(R=>{m=R;let F=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,F)})}).then(()=>({batchId:m.batchId,changes:FS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Fe(X)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Bc(r,i.changes),yield jc(r.remoteStore)}catch(i){let s=nI(i,"Failed to persist write");n.reject(s)}})}function wA(t,e){return S(this,null,function*(){let n=Z(t);try{let r=yield h2(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?z(o.va):i.removedDocuments.size>0&&(z(o.va),o.va=!1))}),yield Bc(n,r,e)}catch(r){yield Gi(r)}})}function uS(t,e,n){let r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Z(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&rI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function j2(t,e,n){return S(this,null,function*(){let r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Fe(U.comparator);o=o.insert(s,st.newNoDocument(s,W.min()));let a=se().add(s),u=new ch(W.min(),new Map,new Fe(X),o,a);yield wA(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),iI(r)}else yield l_(r.localStore,e,!1).then(()=>A_(r,e,n)).catch(Gi)})}function B2(t,e){return S(this,null,function*(){let n=Z(t),r=e.batch.batchId;try{let i=yield d2(n.localStore,e);DA(n,r,null),EA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Bc(n,i)}catch(i){yield Gi(i)}})}function $2(t,e,n){return S(this,null,function*(){let r=Z(t);try{let i=yield function(o,a){let u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(z(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);DA(r,e,n),EA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Bc(r,i)}catch(i){yield Gi(i)}})}function EA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function DA(t,e,n){let r=Z(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function A_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||CA(t,r)})}function CA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(J_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),iI(t))}function lS(t,e,n){for(let r of n)r instanceof Oh?(t.La.addReference(r.key,e),H2(t,r)):r instanceof kh?(P("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||CA(t,r.key)):$()}function H2(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(P("SyncEngine","New document in limbo: "+n),t.xa.add(r),iI(t))}function iI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new U(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new T_(n)),t.Oa=t.Oa.insert(n,r),pA(t.remoteStore,new bo(Yt(Wh(n.path)),r,"TargetPurposeLimboResolution",ln.oe))}}function Bc(t,e,n){return S(this,null,function*(){let r=Z(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=a_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return S(this,null,function*(){let h=Z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,m=>A.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>A.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!zr(p))throw p;P("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function z2(t,e){return S(this,null,function*(){let n=Z(t);if(!n.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());let r=yield hA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new B(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bc(n,r.hs)}})}function q2(t,e){let n=Z(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function bA(t){let e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j2.bind(null,e),e.Ca.d_=x2.bind(null,e.eventManager),e.Ca.$a=P2.bind(null,e.eventManager),e}function TA(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$2.bind(null,e),e}var xc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return S(this,null,function*(){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return dA(this.persistence,new bh,e.initialUser,this.serializer)}createPersistence(e){return new Dh(Ch.Zr,this.serializer)}createSharedClientState(e){return new Sh}terminate(){return S(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var M_=class t extends xc{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return S(this,null,function*(){yield zf(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield TA(this.Wa.syncEngine),yield jc(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return dA(this.persistence,new bh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new qv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new av(n,this.persistence);return new ov(e.asyncQueue,r)}createPersistence(e){let n=l2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new o_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,v2(),Kd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Sh}};var Fh=class{initialize(e,n){return S(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z2.bind(null,this.syncEngine),yield M2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new w_}()}createDatastore(e){let n=Qh(e.databaseInfo.databaseId),r=function(s){return new f_(s)}(e.databaseInfo);return function(s,o,a,u){return new m_(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new v_(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>uS(this.syncEngine,n,0),function(){return Ah.D()?new Ah:new d_}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new S_(i,s,o,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return S(this,null,function*(){var e,n;yield function(i){return S(this,null,function*(){let s=Z(i);P("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Uc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var R_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var N_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Zd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>S(this,null,function*(){P("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(P("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=nI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Qd(t,e){return S(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>S(this,null,function*(){r.isEqual(i)||(yield hA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function x_(t,e){return S(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield G2(t);P("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>oS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>oS(e.remoteStore,i)),t._onlineComponents=e})}function SA(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function G2(t){return S(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!SA(n))throw n;Fr("Error using user provided cache. Falling back to memory cache: "+n),yield Qd(t,new xc)}}else P("FirestoreClient","Using default OfflineComponentProvider"),yield Qd(t,new xc);return t._offlineComponents})}function AA(t){return S(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),yield x_(t,t._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),yield x_(t,new Fh))),t._onlineComponents})}function W2(t){return AA(t).then(e=>e.syncEngine)}function dS(t){return S(this,null,function*(){let e=yield AA(t),n=e.eventManager;return n.onListen=O2.bind(null,e.syncEngine),n.onUnlisten=L2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=V2.bind(null,e.syncEngine),n})}function MA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var hS=new Map;function RA(t,e,n){if(!n)throw new B(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function K2(t,e,n,r){if(e===!0&&r===!0)throw new B(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fS(t){if(!U.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pS(t){if(U.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=sI(t);throw new B(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Lh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ao=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yy;switch(r.type){case"firstParty":return new ev(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=hS.get(n);r&&(P("ComponentProvider","Removing Datastore"),hS.delete(n),r.terminate())}(this),Promise.resolve()}};function NA(t,e,n,r={}){var i;let s=(t=Jn(t,Ao))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Qe.MOCK_USER;else{a=RT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qe(l)}t._authCredentials=new Zy(new Yd(a,u))}}var Vh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Lt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},kr=class t extends Vh{constructor(e,n,r){super(e,n,Wh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xA(t,e,...n){if(t=vt(t),RA("collection","path",e),t instanceof Ao){let r=Se.fromString(e,...n);return pS(r),new kr(t,null,r)}{if(!(t instanceof Lt||t instanceof kr))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return pS(r),new kr(t.firestore,null,r)}}function oI(t,e,...n){if(t=vt(t),arguments.length===1&&(e=Zd.newId()),RA("doc","path",e),t instanceof Ao){let r=Se.fromString(e,...n);return fS(r),new Lt(t,null,new U(r))}{if(!(t instanceof Lt||t instanceof kr))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return fS(r),new Lt(t.firestore,t instanceof kr?t.converter:null,new U(r))}}var P_=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Mh(this,"async_queue_retry"),this.Eu=()=>{let n=Kd();n&&P("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Kd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Kd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new dn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return S(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!zr(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=__.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&$()}verifyOperationInProgress(){}mu(){return S(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function gS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var er=class extends Ao{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new P_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OA(this),this._firestoreClient.terminate()}};function PA(t,e){let n=typeof t=="object"?t:ec(),r=typeof t=="string"?t:e||"(default)",i=wy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=AT("firestore");s&&NA(i,...s)}return i}function aI(t){return t._firestoreClient||OA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function OA(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new cv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,MA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new N_(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function kA(t,e){Y2(t=Jn(t,er));let n=aI(t);if(n._uninitializedComponentsProvider)throw new B(x.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Fh;return Q2(n,i,new M_(i,r.cacheSizeBytes,e?.forceOwnership))}function Q2(t,e,n){let r=new dn;return t.asyncQueue.enqueue(()=>S(this,null,function*(){try{yield Qd(t,n),yield x_(t,e),r.resolve()}catch(i){let s=i;if(!SA(s))throw s;Fr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function Y2(t){if(t._initialized||t._terminated)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Pc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ze.fromBase64String(e))}catch(n){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Mo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Oc=class{constructor(e){this._methodName=e}};var kc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}};var Fc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Z2=/^__.*__$/,O_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hn(e,this.data,this.fieldMask,n,this.fieldTransforms):new $r(e,this.data,n,this.fieldTransforms)}},Uh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function FA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var k_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Bh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(FA(this.wu)&&Z2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},F_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qh(e)}Nu(e,n,r,i=!1){return new k_({wu:e,methodName:n,Ou:r,path:Ye.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function LA(t){let e=t._freezeSettings(),n=Qh(t._databaseId);return new F_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function J2(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);cI("Data must be an object, but it was:",o,r);let a=VA(r,o),u,l;if(s.merge)u=new Ot(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=L_(e,p,n);if(!o.contains(m))throw new B(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);jA(h,m)||h.push(m)}u=new Ot(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new O_(new It(a),u,l)}var jh=class t extends Oc{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function X2(t,e,n,r){let i=t.Nu(1,e,n);cI("Data must be an object, but it was:",i,r);let s=[],o=It.empty();Wi(r,(u,l)=>{let h=uI(e,u,n);l=vt(l);let p=i.Cu(h);if(l instanceof jh)s.push(h);else{let m=Zh(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Ot(s);return new Uh(o,a,i.fieldTransforms)}function eB(t,e,n,r,i,s){let o=t.Nu(1,e,n),a=[L_(e,r,n)],u=[i];if(s.length%2!=0)throw new B(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(L_(e,s[m])),u.push(s[m+1]);let l=[],h=It.empty();for(let m=a.length-1;m>=0;--m)if(!jA(l,a[m])){let y=a[m],b=u[m];b=vt(b);let N=o.Cu(y);if(b instanceof jh)l.push(y);else{let R=Zh(b,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Ot(l);return new Uh(h,p,o.fieldTransforms)}function Zh(t,e){if(UA(t=vt(t)))return cI("Unsupported field value:",e,t),VA(t,e);if(t instanceof Oc)return function(r,i){if(!FA(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Zh(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ke.fromDate(r);return{timestampValue:Co(i.serializer,s)}}if(r instanceof ke){let s=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Co(i.serializer,s)}}if(r instanceof kc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pc)return{bytesValue:GS(i.serializer,r._byteString)};if(r instanceof Lt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Y_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Q_(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${sI(r)}`)}(t,e)}function VA(t,e){let n={};return CS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(r,i)=>{let s=Zh(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof kc||t instanceof Pc||t instanceof Lt||t instanceof Oc||t instanceof Fc)}function cI(t,e,n){if(!UA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=sI(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function L_(t,e,n){if((e=vt(e))instanceof Mo)return e._internalPath;if(typeof e=="string")return uI(t,e);throw Bh("Field path arguments must be of type string or ",t,!1,void 0,n)}var tB=new RegExp("[~\\*/\\[\\]]");function uI(t,e,n){if(e.search(tB)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mo(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new B(x.INVALID_ARGUMENT,a+t+u)}function jA(t,e){return t.some(n=>n.isEqual(e))}var $h=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new V_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(BA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},V_=class extends $h{data(){return super.data()}};function BA(t,e){return typeof e=="string"?uI(t,e):e instanceof Mo?e._internalPath:e._delegate._internalPath}function nB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var U_=class{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ne(o.doubleValue));return new Fc(s)}convertGeoPoint(e){return new kc(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=G_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){let n=Xn(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);z(nA(r));let i=new mo(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(n)||_t(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function rB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Fi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Hh=class extends $h{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ho(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(BA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ho=class extends Hh{data(e={}){return super.data(e)}},j_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ho(this._firestore,this._userDataWriter,r.key,r,new Fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new ho(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new ho(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:iB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function iB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}var zh=class extends U_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}};function $A(t,e,n,...r){t=Jn(t,Lt);let i=Jn(t.firestore,er),s=LA(i),o;return o=typeof(e=vt(e))=="string"||e instanceof Mo?eB(s,"updateDoc",t._key,e,n,r):X2(s,"updateDoc",t._key,e),dI(i,[o.toMutation(t._key,Ft.exists(!0))])}function HA(t){return dI(Jn(t.firestore,er),[new Do(t._key,Ft.none())])}function zA(t,e){let n=Jn(t.firestore,er),r=oI(t),i=rB(t.converter,e);return dI(n,[J2(LA(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ft.exists(!1))]).then(()=>r)}function lI(t,...e){var n,r,i;t=vt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gS(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(gS(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Lt)l=Jn(t.firestore,er),h=Wh(t._key.path),u={next:p=>{e[o]&&e[o](sB(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=Jn(t,Vh);l=Jn(p.firestore,er),h=p._query;let m=new zh(l);u={next:y=>{e[o]&&e[o](new j_(l,m,p,y))},error:e[o+1],complete:e[o+2]},nB(t._query)}return function(m,y,b,N){let R=new R_(N),F=new D_(y,R,b);return m.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return R2(yield dS(m),F)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return N2(yield dS(m),F)}))}}(aI(l),h,a,u)}function dI(t,e){return function(r,i){let s=new dn;return r.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return U2(yield W2(r),i,s)})),s.promise}(aI(t),e)}function sB(t,e,n){let r=n.docs.get(e._key),i=new zh(t);return new Hh(t,i,e._key,r,new Fi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ro=i})(Qs),Ar(new Wt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new er(new Jy(r.getProvider("auth-internal")),new nv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xe(m0,"4.7.1",e),Xe(m0,"4.7.1","esm2017")})();var Jh=function(){return Jh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jh.apply(this,arguments)};var cB={includeMetadataChanges:!1};function qA(t,e){return e===void 0&&(e=cB),new he(function(n){var r=lI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function GA(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Jh(Jh({},r),(n={},n[e.idField]=t.id,n))}function WA(t){return qA(t,{includeMetadataChanges:!0}).pipe(ne(function(e){return e.docs}))}function KA(t,e){return e===void 0&&(e={}),WA(t).pipe(ne(function(n){return n.map(function(r){return GA(r,e)})}))}var tr=class{constructor(e){return e}},QA="firestore",hI=class{constructor(){return nc(QA)}};var fI=new G("angularfire2.firestore-instances");function uB(t,e){let n=Cy(QA,t,e);return n&&new tr(n)}function lB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new tr(r)}}var dB={provide:hI,deps:[[new on,fI]]},hB={provide:tr,useFactory:uB,deps:[[new on,fI],Ti]};function Xh(t,...e){return Xe("angularfire",Zs.full,"fst"),yr([hB,dB,{provide:fI,useFactory:lB(t),multi:!0,deps:[Me,Ht,rc,ic,[new on,Ld],[new on,tc],...e]}])}var pI=Kt(KA,!0);var ef=Kt(zA,!0);var xo=Kt(xA,!0);var gI=Kt(HA,!0);var Po=Kt(oI,!0);var YA=Kt(kA,!0);var tf=Kt(PA,!0);var nf=Kt($A,!0);var ZA={providers:[lb({eventCoalescing:!0}),ET(DT),bd(()=>Td({projectId:"einkaufsliste-9b538",appId:"1:1011603034815:web:abb6c9dd879d1e9db9ac0a",storageBucket:"einkaufsliste-9b538.appspot.com",apiKey:"AIzaSyAzwOOdHCEngfwgxs26eZLSZu20CMJND8s",authDomain:"einkaufsliste-9b538.firebaseapp.com",messagingSenderId:"1011603034815",measurementId:"G-ZH61NMQ0MY"})),Xh(()=>tf())]};var aM=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(le(Hn),le(En))},e.\u0275dir=Pe({type:e});let t=e;return t})(),Kc=(()=>{let e=class e extends aM{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,features:[Rt]});let t=e;return t})(),Vo=new G(""),fB={provide:Vo,useExisting:sn(()=>yI),multi:!0},yI=(()=>{let e=class e extends Kc{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&Oe("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[zn([fB]),Rt]});let t=e;return t})(),pB={provide:Vo,useExisting:sn(()=>df),multi:!0};function gB(){let t=qn()?qn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var mB=new G(""),df=(()=>{let e=class e extends aM{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gB())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(le(Hn),le(En),le(mB,8))},e.\u0275dir=Pe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Oe("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[zn([pB]),Rt]});let t=e;return t})();function yB(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var vI=new G(""),cM=new G("");function vB(t){return yB(t.value)?{required:!0}:null}function JA(t){return null}function uM(t){return t!=null}function lM(t){return Dr(t)?Ue(t):t}function dM(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function hM(t,e){return e.map(n=>n(t))}function _B(t){return!t.validate}function fM(t){return t.map(e=>_B(e)?e:n=>e.validate(n))}function IB(t){if(!t)return null;let e=t.filter(uM);return e.length==0?null:function(n){return dM(hM(n,e))}}function _I(t){return t!=null?IB(fM(t)):null}function wB(t){if(!t)return null;let e=t.filter(uM);return e.length==0?null:function(n){let r=hM(n,e).map(lM);return hp(r).pipe(ne(dM))}}function II(t){return t!=null?wB(fM(t)):null}function XA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function EB(t){return t._rawValidators}function DB(t){return t._rawAsyncValidators}function mI(t){return t?Array.isArray(t)?t:[t]:[]}function sf(t,e){return Array.isArray(t)?t.includes(e):t===e}function eM(t,e){let n=mI(e);return mI(t).forEach(i=>{sf(n,i)||n.push(i)}),n}function tM(t,e){return mI(e).filter(n=>!sf(t,n))}var of=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_I(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=II(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Fo=class extends of{get formDirective(){return null}get path(){return null}},Wc=class extends of{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},af=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},CB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},eK=oe(k({},CB),{"[class.ng-submitted]":"isSubmitted"}),hf=(()=>{let e=class e extends af{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(le(Wc,2))},e.\u0275dir=Pe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Gl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Rt]});let t=e;return t})(),pM=(()=>{let e=class e extends af{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(le(Fo,10))},e.\u0275dir=Pe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Gl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Rt]});let t=e;return t})();var $c="VALID",rf="INVALID",Oo="PENDING",Hc="DISABLED",Lo=class{},cf=class extends Lo{constructor(e,n){super(),this.value=e,this.source=n}},qc=class extends Lo{constructor(e,n){super(),this.pristine=e,this.source=n}},Gc=class extends Lo{constructor(e,n){super(),this.touched=e,this.source=n}},ko=class extends Lo{constructor(e,n){super(),this.status=e,this.source=n}};function gM(t){return(ff(t)?t.validators:t)||null}function bB(t){return Array.isArray(t)?_I(t):t||null}function mM(t,e){return(ff(e)?e.asyncValidators:t)||null}function TB(t){return Array.isArray(t)?II(t):t||null}function ff(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function SB(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[n])throw new q(1001,"")}function AB(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new q(1002,"")})}var uf=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ta(()=>this.statusReactive()),this.statusReactive=Da(void 0),this._pristine=Ta(()=>this.pristineReactive()),this.pristineReactive=Da(!0),this._touched=Ta(()=>this.touchedReactive()),this.touchedReactive=Da(!1),this._events=new tt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return cn(this.statusReactive)}set status(e){cn(()=>this.statusReactive.set(e))}get valid(){return this.status===$c}get invalid(){return this.status===rf}get pending(){return this.status==Oo}get disabled(){return this.status===Hc}get enabled(){return this.status!==Hc}get pristine(){return cn(this.pristineReactive)}set pristine(e){cn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return cn(this.touchedReactive)}set touched(e){cn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tM(e,this._rawAsyncValidators))}hasValidator(e){return sf(this._rawValidators,e)}hasAsyncValidator(e){return sf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Gc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Gc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new qc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new qc(!0,r))}markAsPending(e={}){this.status=Oo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ko(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Hc,this.errors=null,this._forEachChild(i=>{i.disable(oe(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cf(this.value,r)),this._events.next(new ko(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$c,this._forEachChild(r=>{r.enable(oe(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$c||this.status===Oo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cf(this.value,n)),this._events.next(new ko(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hc:$c}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Oo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=lM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ko(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new xe,this.statusChanges=new xe}_calculateStatus(){return this._allControlsDisabled()?Hc:this.errors?rf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oo)?Oo:this._anyControlsHaveStatus(rf)?rf:$c}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new qc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Gc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ff(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=TB(this._rawAsyncValidators)}},lf=class extends uf{constructor(e,n,r){super(gM(n),mM(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){AB(this,!0,e),Object.keys(e).forEach(r=>{SB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wI=new G("CallSetDisabledState",{providedIn:"root",factory:()=>EI}),EI="always";function MB(t,e){return[...e.path,t]}function yM(t,e,n=EI){vM(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),NB(t,e),PB(t,e),xB(t,e),RB(t,e)}function nM(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function RB(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function vM(t,e){let n=EB(t);e.validator!==null?t.setValidators(XA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=DB(t);e.asyncValidator!==null?t.setAsyncValidators(XA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();nM(e._rawValidators,i),nM(e._rawAsyncValidators,i)}function NB(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&_M(t,e)})}function xB(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&_M(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function _M(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function PB(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function OB(t,e){t==null,vM(t,e)}function kB(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function FB(t){return Object.getPrototypeOf(t.constructor)===Kc}function LB(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function VB(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===df?n=s:FB(s)?r=s:i=s}),i||r||n||null}var UB={provide:Fo,useExisting:sn(()=>DI)},zc=Promise.resolve(),DI=(()=>{let e=class e extends Fo{get submitted(){return cn(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Ta(()=>this.submittedReactive()),this.submittedReactive=Da(!1),this._directives=new Set,this.ngSubmit=new xe,this.form=new lf({},_I(r),II(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){zc.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),yM(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){zc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){zc.then(()=>{let i=this._findContainer(r.path),s=new lf({});OB(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){zc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){zc.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),LB(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(le(vI,10),le(cM,10),le(wI,8))},e.\u0275dir=Pe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Oe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zn([UB]),Rt]});let t=e;return t})();function rM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function iM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var jB=class extends uf{constructor(e=null,n,r){super(gM(n),mM(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ff(n)&&(n.nonNullable||n.initialValueIsDefault)&&(iM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){iM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var BB={provide:Wc,useExisting:sn(()=>Qc)},sM=Promise.resolve(),Qc=(()=>{let e=class e extends Wc{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new jB,this._registered=!1,this.name="",this.update=new xe,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=VB(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),kB(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){sM.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&ba(i);sM.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?MB(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(le(Fo,9),le(vI,10),le(cM,10),le(Vo,10),le(Cr,8),le(wI,8))},e.\u0275dir=Pe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zn([BB]),Rt,$n]});let t=e;return t})(),IM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),$B={provide:Vo,useExisting:sn(()=>CI),multi:!0},CI=(()=>{let e=class e extends Kc{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Oe("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[zn([$B]),Rt]});let t=e;return t})();var HB={provide:Vo,useExisting:sn(()=>pf),multi:!0};function wM(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function zB(t){return t.split(":")[0]}var pf=(()=>{let e=class e extends Kc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=wM(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=zB(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Oe("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[zn([HB]),Rt]});let t=e;return t})(),EM=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(wM(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(le(En),le(Hn),le(pf,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),qB={provide:Vo,useExisting:sn(()=>DM),multi:!0};function oM(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function GB(t){return t.split(":")[0]}var DM=(()=>{let e=class e extends Kc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let u=0;u<a.length;u++){let l=a[u],h=this._getOptionValue(l.value);s.push(h)}}else{let a=i.options;for(let u=0;u<a.length;u++){let l=a[u];if(l.selected){let h=this._getOptionValue(l.value);s.push(h)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=GB(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Oe("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[zn([qB]),Rt]});let t=e;return t})(),CM=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(oM(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(oM(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(le(En),le(Hn),le(DM,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var WB=(()=>{let e=class e{constructor(){this._validator=JA}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):JA,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pe({type:e,features:[$n]});let t=e;return t})();var KB={provide:vI,useExisting:sn(()=>Yc),multi:!0};var Yc=(()=>{let e=class e extends WB{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ba,this.createValidator=r=>vB}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=wn(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&ql("required",s._enabled?"":null)},inputs:{required:"required"},features:[zn([KB]),Rt]});let t=e;return t})();var QB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=hi({type:e}),e.\u0275inj=di({});let t=e;return t})();var gf=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:wI,useValue:r.callSetDisabledState??EI}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=hi({type:e}),e.\u0275inj=di({imports:[QB]});let t=e;return t})();var mf=Tw("SpeechRecognition",{web:()=>import("./chunk-4NGJVGSU.js").then(t=>new t.SpeechRecognitionWeb)});var yf=class t{selectedListId;editingProduct=null;productAdded=new xe;cancelAdd=new xe;firestore=L(tr);newProduct={name:"",count:1,einheit:"",checked:!1,checkedAt:null,angebot:!1};ngOnChanges(){this.editingProduct&&(this.newProduct=k({},this.editingProduct))}incrementCount(){this.newProduct.count++}decrementCount(){this.newProduct.count>1&&this.newProduct.count--}startVoiceRecognition(){return S(this,null,function*(){try{if(yield mf.available())if(yield mf.requestPermissions()){let r=yield mf.start({language:"de-DE",maxResults:1});r.matches&&r.matches.length>0&&(this.newProduct.name=r.matches[0])}else alert("Spracherkennungserlaubnis wurde nicht erteilt.");else alert("Spracherkennung ist auf diesem Ger\xE4t nicht verf\xFCgbar.")}catch(e){console.error("Fehler bei der Spracherkennung:",e)}})}saveProduct(){return S(this,null,function*(){if(!this.newProduct.name.trim()){console.error("Produktname ist erforderlich");return}this.newProduct.einheit.trim()||(this.newProduct.einheit="St\xFCck");try{if(this.editingProduct){let e=Po(this.firestore,`lists/${this.selectedListId}/items/${this.editingProduct.id}`);yield nf(e,this.newProduct)}else{let e=xo(this.firestore,`lists/${this.selectedListId}/items`);yield ef(e,this.newProduct)}this.productAdded.emit()}catch(e){console.error("Fehler beim Speichern des Produkts:",e)}})}cancel(){this.cancelAdd.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ms({type:t,selectors:[["app-add-product"]],inputs:{selectedListId:"selectedListId",editingProduct:"editingProduct"},outputs:{productAdded:"productAdded",cancelAdd:"cancelAdd"},standalone:!0,features:[$n,Fs],decls:28,vars:4,consts:[[3,"ngSubmit"],[1,"input-group"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","button",1,"voice-btn",3,"click"],["for","count"],["type","button",1,"btn-minus",3,"click"],["type","number","id","count","name","count","required","",3,"ngModelChange","ngModel"],["type","button",1,"btn-plus",3,"click"],["for","einheit"],["type","text","id","einheit","name","einheit","required","",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","id","angebot","name","angebot",3,"ngModelChange","ngModel"],["for","angebot"],[2,"display","flex","justify-content","space-between"],["type","submit"],["type","button",3,"click"]],template:function(n,r){n&1&&(me(0,"form",0),Oe("ngSubmit",function(){return r.saveProduct()}),me(1,"div",1)(2,"label",2),Be(3,"Produktname"),Ie(),me(4,"input",3),Er("ngModelChange",function(s){return mi(r.newProduct.name,s)||(r.newProduct.name=s),s}),Ie(),me(5,"button",4),Oe("click",function(){return r.startVoiceRecognition()}),Be(6," \u{1F3A4} "),Ie()(),me(7,"div",1)(8,"label",5),Be(9,"Anzahl"),Ie(),me(10,"button",6),Oe("click",function(){return r.decrementCount()}),Be(11,"-"),Ie(),me(12,"input",7),Er("ngModelChange",function(s){return mi(r.newProduct.count,s)||(r.newProduct.count=s),s}),Ie(),me(13,"button",8),Oe("click",function(){return r.incrementCount()}),Be(14,"+"),Ie()(),me(15,"div")(16,"label",9),Be(17,"Einheit"),Ie(),me(18,"input",10),Er("ngModelChange",function(s){return mi(r.newProduct.einheit,s)||(r.newProduct.einheit=s),s}),Ie()(),me(19,"div",11)(20,"input",12),Er("ngModelChange",function(s){return mi(r.newProduct.angebot,s)||(r.newProduct.angebot=s),s}),Ie(),me(21,"label",13),Be(22,"Angebot"),Ie()(),me(23,"div",14)(24,"button",15),Be(25,"Produkt speichern"),Ie(),me(26,"button",16),Oe("click",function(){return r.cancel()}),Be(27,"Abbrechen"),Ie()()()),n&2&&(je(4),wr("ngModel",r.newProduct.name),je(8),wr("ngModel",r.newProduct.count),je(6),wr("ngModel",r.newProduct.einheit),je(2),wr("ngModel",r.newProduct.angebot))},dependencies:[gf,IM,df,CI,yI,hf,pM,Yc,Qc,DI],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background-color:#f9f9f9;width:300px;margin:auto}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.voice-btn[_ngcontent-%COMP%]{background-color:#012952;color:#fff;border:none;padding:8px 12px;border-radius:5px;cursor:pointer;font-size:1.2rem;transition:background-color .3s ease}.voice-btn[_ngcontent-%COMP%]:hover{background-color:#005f8f}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{padding:10px;border:2px solid #ddd;border-radius:5px;font-size:1rem;width:100%;box-sizing:border-box;transition:border-color .3s}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus{border-color:#d0e7ec}button[type=submit][_ngcontent-%COMP%], button[type=button][_ngcontent-%COMP%]{background-color:#d0e7ec;color:#012952;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover, button[type=button][_ngcontent-%COMP%]:hover{background-color:#005f8f}.btn-minus[_ngcontent-%COMP%], .btn-plus[_ngcontent-%COMP%]{background-color:#012952;color:#fff;border:none;padding:5px 10px;border-radius:5px;font-size:1.2rem;cursor:pointer;transition:background-color .3s ease}.btn-minus[_ngcontent-%COMP%]:hover, .btn-plus[_ngcontent-%COMP%]:hover{background-color:#005f8f}label[_ngcontent-%COMP%]{font-size:1rem;color:#333;margin-bottom:5px}']})};var ZB=t=>({"angebot-markiert":t});function JB(t,e){if(t&1&&(me(0,"span",13),ks(1,"img",14),Ie()),t&2){let n=rt().$implicit,r=rt();je(),Kg("alt","",n.name," Logo"),Tt("src",r.getLogo(n.name),vC)}}function XB(t,e){if(t&1&&(me(0,"option",11),gi(1,JB,2,3,"span",12),Be(2),Ie()),t&2){let n=e.$implicit,r=rt();Tt("value",n.id),je(),Tt("ngIf",r.getLogo(n.name)),je(),Ca(" ",n.name," ")}}function e$(t,e){if(t&1){let n=Wl();me(0,"button",15),Oe("click",function(){fi(n);let i=rt();return pi(i.deleteList(i.selectedListId))}),Be(1,"\u{1F5D1}\uFE0F"),Ie()}}function t$(t,e){if(t&1){let n=Wl();me(0,"div",16)(1,"div",17)(2,"app-add-product",18),Oe("productAdded",function(){fi(n);let i=rt();return pi(i.onProductAdded())})("cancelAdd",function(){fi(n);let i=rt();return pi(i.onCancelAdd())}),Ie()()()}if(t&2){let n=rt();je(2),Tt("selectedListId",n.selectedListId)("editingProduct",n.editingProduct)}}function n$(t,e){if(t&1){let n=Wl();me(0,"div",20)(1,"div",21),Oe("click",function(){fi(n);let i=rt().$implicit,s=rt();return pi(s.changeChecked(i))}),ks(2,"input",22),me(3,"h1",23),Be(4),Ie()(),me(5,"div",24)(6,"p"),Be(7),me(8,"span",25),Be(9),Ie()(),me(10,"button",26),Oe("click",function(){fi(n);let i=rt().$implicit,s=rt();return pi(s.editProduct(i))}),Be(11,"\u{1F58A}\uFE0F"),Ie(),me(12,"button",27),Oe("click",function(i){fi(n);let s=rt().$implicit;return rt().deleteItem(s.id),pi(i.stopPropagation())}),Be(13,"\u{1F5D1}\uFE0F"),Ie()()()}if(t&2){let n=rt().$implicit,r=rt();Tt("ngClass",rb(6,ZB,n.angebot)),je(2),Tt("checked",n.checked),je(),Tt("ngClass",r.checkProductNameLength(n.name)),je(),Kl(n.name),je(3),Ca("",n.count," "),je(2),Kl(n.einheit)}}function r$(t,e){if(t&1&&(me(0,"div"),gi(1,n$,14,8,"div",19),Ie()),t&2){let n=e.$implicit,r=rt();je(),Tt("ngIf",r.shouldShowItem(n))}}var vf=class t{firestore=L(tr);lists$;products$=null;selectedListId=null;isAddingProduct=!1;isDarkMode=!1;editingProduct=null;constructor(){let e=xo(this.firestore,"lists");this.lists$=pI(e,{idField:"id"})}ngOnInit(){let e=localStorage.getItem("isDarkMode");this.isDarkMode=e==="true",this.applyTheme();let n=localStorage.getItem("selectedListId");n&&(this.selectedListId=n,this.loadProductsForSelectedList())}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("isDarkMode",this.isDarkMode.toString()),this.applyTheme()}applyTheme(){this.isDarkMode?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")}onListChange(e){let r=e.target.value;r==="new"?this.addNewList():(this.selectedListId=r,this.loadProductsForSelectedList(),localStorage.setItem("selectedListId",this.selectedListId))}addNewList(){return S(this,null,function*(){let e=prompt("Bitte den Namen der neuen Liste eingeben:");if(e)try{let n=xo(this.firestore,"lists"),r=yield ef(n,{name:e});this.selectedListId=r.id,this.loadProductsForSelectedList(),localStorage.setItem("selectedListId",this.selectedListId)}catch(n){console.error("Fehler beim Erstellen der neuen Liste:",n)}})}deleteList(e){if(confirm("Bist du sicher, dass du diese Liste l\xF6schen m\xF6chtest?")){let r=Po(this.firestore,`lists/${e}`);gI(r).then(()=>{this.selectedListId=null,this.products$=null,localStorage.removeItem("selectedListId")}).catch(i=>{console.error("Fehler beim L\xF6schen der Liste:",i)})}}deleteItem(e){if(this.selectedListId){let n=Po(this.firestore,`lists/${this.selectedListId}/items/${e}`);gI(n).then(()=>console.log("Item gel\xF6scht")).catch(r=>console.error("Fehler beim L\xF6schen des Items:",r))}}addItem(){this.isAddingProduct=!0}onProductAdded(){this.isAddingProduct=!1,this.editingProduct=null,this.loadProductsForSelectedList()}onCancelAdd(){this.isAddingProduct=!1}changeChecked(e){return S(this,null,function*(){try{let n=Po(this.firestore,`lists/${this.selectedListId}/items/${e.id}`),r=!e.checked;yield nf(n,{checked:r,checkedAt:r?new Date:null})}catch(n){console.error("Fehler beim Aktualisieren des Items:",n)}})}shouldShowItem(e){if(!e.checked)return!0;if(e.checkedAt){let n;if(e.checkedAt instanceof ke)n=e.checkedAt.toDate();else if(e.checkedAt instanceof Date)n=e.checkedAt;else return console.error("Ung\xFCltiger Zeitstempel:",e.checkedAt),!0;let r=Date.now()-2*60*60*1e3;return n.getTime()>r}return!0}getLogo(e){return{lidl:"./lidl.png",edeka:"./edeka.png",aldi:"./aldi.png",rewe:"./rewe.png"}[e.toLowerCase()]||null}checkProductNameLength(e){return e.length>10?"small-text":""}loadProductsForSelectedList(){if(!this.selectedListId)return;let e=xo(this.firestore,`lists/${this.selectedListId}/items`);this.products$=pI(e,{idField:"id"})}editProduct(e){this.editingProduct=k({},e),this.isAddingProduct=!0}trackById(e,n){return n.id}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ms({type:t,selectors:[["app-root"]],standalone:!0,features:[Fs],decls:17,vars:9,consts:[[1,"select-container"],["for","list"],[1,"list-select-wrapper"],["required","",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["value","new"],["class","delete-list","type","button",3,"click",4,"ngIf"],[1,"all"],["id","addproduct",1,"item",3,"click"],["class","modal-overlay",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],["class","logo-wrapper",4,"ngIf"],[1,"logo-wrapper"],[1,"logo",3,"src","alt"],["type","button",1,"delete-list",3,"click"],[1,"modal-overlay"],[1,"modal"],[3,"productAdded","cancelAdd","selectedListId","editingProduct"],["class","item",3,"ngClass",4,"ngIf"],[1,"item",3,"ngClass"],[1,"item-left",3,"click"],["type","checkbox","id","checkbox",3,"checked"],[3,"ngClass"],[1,"item-right"],[1,"einheit"],["type","button",1,"edit-item",3,"click"],["type","button",1,"delete-item",3,"click"]],template:function(n,r){n&1&&(me(0,"div",0)(1,"label",1),Be(2,"Liste ausw\xE4hlen"),Ie(),me(3,"div",2)(4,"select",3),Er("ngModelChange",function(s){return mi(r.selectedListId,s)||(r.selectedListId=s),s}),Oe("change",function(s){return r.onListChange(s)}),gi(5,XB,3,3,"option",4),Qg(6,"async"),me(7,"option",5),Be(8,"+ Neue Liste hinzuf\xFCgen"),Ie()(),gi(9,e$,2,0,"button",6),Ie()(),me(10,"div",7)(11,"div",8),Oe("click",function(){return r.addItem()}),me(12,"h1"),Be(13,"+ Produkt Hinzuf\xFCgen"),Ie()(),gi(14,t$,3,2,"div",9)(15,r$,2,1,"div",10),Qg(16,"async"),Ie()),n&2&&(je(4),wr("ngModel",r.selectedListId),je(),Tt("ngForOf",Yg(6,5,r.lists$)),je(4),Tt("ngIf",r.selectedListId),je(5),Tt("ngIf",r.isAddingProduct&&r.selectedListId),je(),Tt("ngForOf",Yg(16,7,r.products$)))},dependencies:[Mb,gf,EM,CM,pf,hf,Yc,Qc,yf,cm,Tb,Sb,Ab],styles:['@charset "UTF-8";#true[_ngcontent-%COMP%]{background-color:#e8f3f6;text-decoration:line-through}#false[_ngcontent-%COMP%]{background-color:#fff}.all[_ngcontent-%COMP%]{margin-left:2%}.item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border:1px lightgray solid;border-radius:15px;padding:15px;background-color:#fff;margin-top:1%;box-shadow:0 2px 5px #0000001a;transition:box-shadow .3s ease,transform .3s ease;width:100%;box-sizing:border-box}.item-left[_ngcontent-%COMP%], .item-right[_ngcontent-%COMP%]{display:flex;align-items:center}.item-left[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;min-width:0}.item-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:#012952;white-space:normal;word-wrap:break-word;max-width:70%;overflow:hidden;text-overflow:ellipsis}.item-left[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:15px;width:24px;height:24px;border-radius:100%;accent-color:#012952}.item-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;white-space:nowrap;flex-shrink:0}.item-right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#666}.einheit[_ngcontent-%COMP%]{font-size:.9rem;color:#666}#addproduct[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#e8f3f6;color:#012952;border:1px dashed #ddd;padding:15px;border-radius:15px;cursor:pointer;transition:background-color .3s ease;width:100%}#addproduct[_ngcontent-%COMP%]:hover{background-color:#d0e7ec}#addproduct[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:#012952}*[_ngcontent-%COMP%]{font-family:sans-serif;color:#012952}.list-select-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.item[_ngcontent-%COMP%]{cursor:pointer}.item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{pointer-events:none}.select-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 0}label[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#012952;margin-bottom:8px}.logo-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.logo[_ngcontent-%COMP%]{width:24px;height:24px;vertical-align:middle}select[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:1rem;border-radius:8px;border:2px solid #ddd;background-color:#d0e7ec;color:#333;cursor:pointer;transition:border-color .3s,box-shadow .3s,background-color .3s;box-shadow:0 2px 5px #0000001a}option[_ngcontent-%COMP%]{padding:10px;background-color:#fff;color:#333;font-size:1rem;cursor:pointer}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:focus{background-color:#e8f5e9}@media (max-width: 600px){.item[_ngcontent-%COMP%]{flex-direction:row;align-items:center;padding:10px}.item-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem;max-width:60%}.item-right[_ngcontent-%COMP%]{font-size:.9rem}.item-left[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px}}.delete-list[_ngcontent-%COMP%]{background-color:#d0e7ec;color:#fff;border:none;padding:6px 12px;border-radius:8px;cursor:pointer;transition:background-color .3s ease;display:flex;align-items:center;gap:5px;font-size:1rem;height:50px}.delete-list[_ngcontent-%COMP%]:hover{background-color:#d0e7ec}.edit-item[_ngcontent-%COMP%]{background-color:#d0e7ec;color:#fff;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;transition:background-color .3s ease;display:flex;align-items:center;gap:5px;font-size:.9rem}.edit-item[_ngcontent-%COMP%]:hover{background-color:#012952}.delete-item[_ngcontent-%COMP%]{background-color:#d0e7ec;color:#fff;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;transition:background-color .3s ease;display:flex;align-items:center;gap:5px;font-size:.9rem}.delete-item[_ngcontent-%COMP%]:hover{background-color:#012952}.dark-mode[_ngcontent-%COMP%]{background-color:#121212;color:#fff}.logo-wrapper[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:5px}.logo[_ngcontent-%COMP%]{width:20px;height:20px}.angebot-markiert[_ngcontent-%COMP%]{border:2px solid #ff9800;background-color:#fff7e0}.small-text[_ngcontent-%COMP%]{font-size:.8rem;word-wrap:break-word}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000b3;display:flex;justify-content:center;align-items:center}.modal[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px}.item-checked[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-decoration:line-through;color:#888}']})};var TM={production:!1,firebase:{projectId:"einkaufsliste-9b538",appId:"1:1011603034815:web:abb6c9dd879d1e9db9ac0a",storageBucket:"einkaufsliste-9b538.appspot.com",apiKey:"AIzaSyAzwOOdHCEngfwgxs26eZLSZu20CMJND8s",authDomain:"einkaufsliste-9b538.firebaseapp.com",messagingSenderId:"1011603034815",measurementId:"G-ZH61NMQ0MY"}};Vb(vf,oe(k({},ZA),{providers:[bd(()=>Td(TM.firebase)),Xh(()=>{let t=tf();return YA(t).catch(e=>{e.code=="failed-precondition"?console.error("Offline-Persistenz konnte nicht aktiviert werden:",e):e.code=="unimplemented"&&console.error("Browser unterst\xFCtzt keine Offline-Persistenz:",e)}),t})]})).catch(t=>console.error(t));
